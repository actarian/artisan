{"version":3,"file":"artisan-core.umd.js.map","sources":["ng://@artisan/core/lib/storage/storage.service.ts","ng://@artisan/core/lib/auth/auth.service.ts","ng://@artisan/core/lib/config/core.config.ts","ng://@artisan/core/lib/config/config.service.ts","ng://@artisan/core/lib/content/default-content.directive.ts","ng://@artisan/core/lib/core.component.ts","node_modules/tslib/tslib.es6.js","ng://@artisan/core/lib/disposable/disposable.component.ts","ng://@artisan/core/lib/pipes/segment.pipe.ts","ng://@artisan/core/lib/logger/logger.ts","ng://@artisan/core/lib/api/api.service.ts","ng://@artisan/core/lib/translate/translate.service.ts","ng://@artisan/core/lib/routes/route.service.ts","ng://@artisan/core/lib/pages/page.component.ts","ng://@artisan/core/lib/pages/page-not-found.component.ts","ng://@artisan/core/lib/http/http-status-code.service.ts","ng://@artisan/core/lib/models/identity.service.ts","ng://@artisan/core/lib/models/entity.service.ts","ng://@artisan/core/lib/models/image.ts","ng://@artisan/core/lib/pages/link.service.ts","ng://@artisan/core/lib/pages/page.ts","ng://@artisan/core/lib/pages/page.service.ts","ng://@artisan/core/lib/pages/page-outlet.component.ts","ng://@artisan/core/lib/pages/page-resolver.ts","ng://@artisan/core/lib/pages/page-resolver.service.ts","ng://@artisan/core/lib/pages/page.guard.ts","ng://@artisan/core/lib/pages/static.guard.ts","ng://@artisan/core/lib/core.routing.ts","ng://@artisan/core/lib/forms/controls/control-base.ts","ng://@artisan/core/lib/forms/controls/control-checkbox.ts","ng://@artisan/core/lib/forms/controls/control-email.ts","ng://@artisan/core/lib/forms/controls/control-markdown.ts","ng://@artisan/core/lib/forms/controls/control-number.ts","ng://@artisan/core/lib/forms/controls/control-password.ts","ng://@artisan/core/lib/forms/controls/control-radio.ts","ng://@artisan/core/lib/forms/controls/control-select.ts","ng://@artisan/core/lib/forms/controls/control-text.ts","ng://@artisan/core/lib/forms/controls/match.validator.ts","ng://@artisan/core/lib/forms/controls/control.service.ts","ng://@artisan/core/lib/forms/form.service.ts","ng://@artisan/core/lib/editor/editor.component.ts","ng://@artisan/core/lib/forms/controls/control.component.ts","ng://@artisan/core/lib/forms/exists.validator.ts","ng://@artisan/core/lib/forms/match.validator.ts","ng://@artisan/core/lib/forms/uppercase.directive.ts","ng://@artisan/core/lib/highlight/highlight.pipe.ts","ng://@artisan/core/lib/http/http-response.interceptor.ts","ng://@artisan/core/lib/json-formatter/json-formatter.component.ts","ng://@artisan/core/lib/pipes/custom-async.pipe.ts","ng://@artisan/core/lib/labels/label.service.ts","ng://@artisan/core/lib/labels/label-async.pipe.ts","ng://@artisan/core/lib/labels/label.directive.ts","ng://@artisan/core/lib/labels/label.pipe.ts","ng://@artisan/core/lib/logger/logger.component.ts","ng://@artisan/core/lib/models/event-dispatcher.service.ts","ng://@artisan/core/lib/models/menu.service.ts","ng://@artisan/core/lib/once/once.service.ts","ng://@artisan/core/lib/pipes/asset.pipe.ts","ng://@artisan/core/lib/pipes/image.pipe.ts","ng://@artisan/core/lib/pipes/public.pipe.ts","ng://@artisan/core/lib/plugins/facebook/facebook.service.ts","ng://@artisan/core/lib/plugins/google/google-tag-manager.service.ts","ng://@artisan/core/lib/plugins/google/google-tag-manager.component.ts","ng://@artisan/core/lib/plugins/google/google.service.ts","ng://@artisan/core/lib/plugins/mapbox/mapbox.service.ts","ng://@artisan/core/lib/plugins/paypal/paypal.service.ts","ng://@artisan/core/lib/plugins/paypal/paypal-widget.component.ts","ng://@artisan/core/lib/plugins/trustpilot/trustpilot.service.ts","ng://@artisan/core/lib/plugins/trustpilot/trustpilot-widget.component.ts","ng://@artisan/core/lib/routes/route.pipe.ts","ng://@artisan/core/lib/slugs/slug.service.ts","ng://@artisan/core/lib/slugs/slug-async.pipe.ts","ng://@artisan/core/lib/slugs/slug.pipe.ts","ng://@artisan/core/lib/translate/translate.pipe.ts","ng://@artisan/core/lib/trust/safe-style.pipe.ts","ng://@artisan/core/lib/trust/safe-url.pipe.ts","ng://@artisan/core/lib/trust/trust.pipe.ts","ng://@artisan/core/lib/ui/click-outside/click-outside.directive.ts","ng://@artisan/core/lib/ui/fancybox/fancybox.directive.ts","ng://@artisan/core/lib/ui/lazy-images/lazy-images.directive.ts","ng://@artisan/core/lib/ui/modal/modal.ts","ng://@artisan/core/lib/ui/modal/modal.service.ts","ng://@artisan/core/lib/ui/modal/modal-container.component.ts","ng://@artisan/core/lib/ui/modal/modal-view.component.ts","ng://@artisan/core/lib/core.module.ts","ng://@artisan/core/lib/core.service.ts","ng://@artisan/core/lib/labels/label.ts","ng://@artisan/core/lib/models/document.ts","ng://@artisan/core/lib/models/menu-item.ts"],"sourcesContent":["import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { Observable, of } from 'rxjs';\n\nconst TIMEOUT = 5 * 60 * 1000; // five minutes\n\n/*\nexport class StorageEvent extends Event {}\n\nexport class CookieStorageEvent extends StorageEvent { }\n\nexport class SessionStorageEvent extends StorageEvent { }\n\nexport class LocalStorageEvent extends StorageEvent { }\n*/\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class StorageService {\n\tpublic delete(name: string): void { }\n\tpublic exist(name: string): boolean { return false; }\n\tpublic get(name: string): any { return null; }\n\tpublic set(name: string, value: any, days?: number): void { }\n\tpublic on(): Observable<any> { return of(null); }\n\tpublic tryGet(): StorageService {\n\t\t// console.log('no StorageService available...');\n\t\treturn this;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CookieStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate storageService: StorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('CookieStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.storageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\tthis.setter(name, '', -1);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn document.cookie.indexOf(';' + name + '=') !== -1 || document.cookie.indexOf(name + '=') === 0;\n\t}\n\n\tpublic get(name: string): any {\n\t\tconst cookieName = name + '=';\n\t\tconst ca = document.cookie.split(';');\n\t\tfor (let i = 0; i < ca.length; i++) {\n\t\t\tlet c = ca[i];\n\t\t\twhile (c.charAt(0) === ' ') {\n\t\t\t\tc = c.substring(1, c.length);\n\t\t\t}\n\t\t\tif (c.indexOf(cookieName) === 0) {\n\t\t\t\tconst value = c.substring(cookieName.length, c.length);\n\t\t\t\tlet model = null;\n\t\t\t\ttry {\n\t\t\t\t\tmodel = JSON.parse(decodeURIComponent(atob(value)));\n\t\t\t\t} catch (e) {\n\t\t\t\t\tconsole.log('Cookie.get.error parsing', name, e);\n\t\t\t\t}\n\t\t\t\treturn model;\n\t\t\t}\n\t\t}\n\t\treturn null;\n\t}\n\n\tpublic set(name: string, value: any, days?: number) {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\tthis.setter(name, btoa(encodeURIComponent(json)), days);\n\t\t} catch (e) {\n\t\t\tconsole.log('CookieSet.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t// todo\n\t\tconst interval: number = 1000, timeout: number = TIMEOUT;\n\t\tlet i, elapsed: number = 0;\n\t\tfunction checkCookie() {\n\t\t\tif (elapsed > timeout) {\n\t\t\t\t// promise.reject('timeout');\n\t\t\t} else {\n\t\t\t\tconst c: any = this.get(name);\n\t\t\t\tif (c) {\n\t\t\t\t\t// promise.resolve(c);\n\t\t\t\t} else {\n\t\t\t\t\telapsed += interval;\n\t\t\t\t\ti = setTimeout(checkCookie, interval);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\tcheckCookie();\n\t\treturn of(null);\n\t}\n\n\tprivate setter(name: string, value: any, days?: number) {\n\t\tlet expires;\n\t\tif (days) {\n\t\t\tconst date = new Date();\n\t\t\tdate.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));\n\t\t\texpires = '; expires=' + date.toUTCString();\n\t\t} else {\n\t\t\texpires = '';\n\t\t}\n\t\tdocument.cookie = name + '=' + value + expires + '; path=/';\n\t}\n\n\tprivate isSupported(): boolean {\n\t\treturn isPlatformBrowser(this.platformId);\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SessionStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('SessionStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.sessionStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.sessionStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.sessionStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.sessionStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('SessionStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('SessionStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.sessionStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('SessionStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'sessionStorage' in window && window.sessionStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.sessionStorage.setItem('test', '1');\n\t\t\t\t\twindow.sessionStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LocalStorageService implements StorageService {\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate cookieStorageService: CookieStorageService,\n\t) { }\n\n\tpublic tryGet(): StorageService {\n\t\tif (this.isSupported()) {\n\t\t\t// console.log('LocalStorageService.supported');\n\t\t\treturn this;\n\t\t} else {\n\t\t\treturn this.cookieStorageService.tryGet();\n\t\t}\n\t}\n\n\tpublic delete(name: string): void {\n\t\twindow.localStorage.removeItem(name);\n\t}\n\n\tpublic exist(name: string): boolean {\n\t\treturn window.localStorage[name] !== undefined;\n\t}\n\n\tpublic get(name: string): any {\n\t\tlet value = null;\n\t\tif (window.localStorage[name] !== undefined) {\n\t\t\ttry {\n\t\t\t\tvalue = JSON.parse(window.localStorage[name]);\n\t\t\t} catch (e) {\n\t\t\t\tconsole.log('LocalStorage.get.error parsing', name, e);\n\t\t\t}\n\t\t}\n\t\treturn value;\n\t}\n\n\tpublic on(): Observable<any> {\n\t\t/*\n\t\treturn $promise(function (promise) {\n\t\t\tconst timeout = TIMEOUT;\n\t\t\tlet i;\n\t\t\tfunction storageEvent(e) {\n\t\t\t\tif (i) {\n\t\t\t\t\tclearTimeout(i);\n\t\t\t\t}\n\t\t\t\tif (e.originalEvent.key === name) {\n\t\t\t\t\ttry {\n\t\t\t\t\t\tlet value = JSON.parse(e.originalEvent.newValue);\n\t\t\t\t\t\tpromise.resolve(value);\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('LocalStorage.on.error parsing', name, error);\n\t\t\t\t\t\tpromise.reject('error parsing ' + name);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t}\n\t\t\t// return fromEvent(window, 'storage');\n\t\t\tangular.element(window).on('storage', storageEvent);\n\t\t\ti = setTimeout(function () {\n\t\t\t\tpromise.reject('timeout');\n\t\t\t}, timeout);\n\t\t});\n\t\t*/\n\t\treturn of(null);\n\t}\n\n\tpublic set(name: string, value: any, days?: number): void {\n\t\ttry {\n\t\t\tlet cache = [];\n\t\t\tconst json = JSON.stringify(value, function (key, value) {\n\t\t\t\tif (key === 'pool') {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\tif (typeof value === 'object' && value !== null) {\n\t\t\t\t\tif (cache.indexOf(value) !== -1) {\n\t\t\t\t\t\t// throw (new Error('circular reference found, discard key'));\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t\tcache.push(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t\tcache = null;\n\t\t\twindow.localStorage.setItem(name, json);\n\t\t} catch (e) {\n\t\t\tconsole.log('LocalStorage.set.error serializing', name, value, e);\n\t\t}\n\t}\n\n\tprivate isSupported(): boolean {\n\t\tlet supported: boolean = false;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\ttry {\n\t\t\t\tsupported = 'localStorage' in window && window.localStorage !== null;\n\t\t\t\tif (supported) {\n\t\t\t\t\twindow.localStorage.setItem('test', '1');\n\t\t\t\t\twindow.localStorage.removeItem('test');\n\t\t\t\t} else {\n\t\t\t\t\tsupported = false;\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\tsupported = false;\n\t\t\t}\n\t\t}\n\t\treturn supported;\n\t}\n\n}\n","import { HttpRequest } from '@angular/common/http';\nimport { Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { LocalStorageService } from '../storage/storage.service';\n\nexport class AuthToken {\n\tconstructor(\n\t\tpublic accessToken: string,\n\t\tpublic expiresIn: number = 0\n\t) { }\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AuthService {\n\n\tprivate cachedRequests: Array<HttpRequest<any>> = [];\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate injector: Injector,\n\t\tprivate localStorageService: LocalStorageService,\n\t) { }\n\n\tsetToken(authToken: AuthToken): void {\n\t\tthis.localStorageService.set('authToken', authToken);\n\t\tthis.retryFailedRequests();\n\t}\n\n\tgetToken(): AuthToken {\n\t\treturn this.localStorageService.get('authToken') as AuthToken;\n\t}\n\n\tgetFakeToken(): AuthToken {\n\t\treturn new AuthToken('fakeToken');\n\t}\n\n\tisValid(authToken: AuthToken): boolean {\n\t\t// return a boolean reflecting whether or not the token is expired\n\t\treturn authToken && (authToken.expiresIn > Date.now() || authToken.expiresIn === 0);\n\t}\n\n\tisAuthenticated(): boolean {\n\t\tconst authToken = this.getToken();\n\t\treturn this.isValid(authToken);\n\t}\n\n\tcollectFailedRequest(request): void {\n\t\tthis.cachedRequests.push(request);\n\t}\n\n\tretryFailedRequests(): void {\n\t\t// this method can be called after the token is refreshed\n\t\t// console.log('AuthService.retryFailedRequests');\n\t\t// retry the requests.\n\t}\n\n}\n","import { InjectionToken, Type } from '@angular/core';\nimport { PageComponent } from '../pages/page.component';\nimport { Pages } from '../pages/pages';\nimport { FacebookConfig } from '../plugins/facebook/facebook.service';\nimport { GoogleTagManagerConfig } from '../plugins/google/google-tag-manager.service';\nimport { GoogleConfig } from '../plugins/google/google.service';\nimport { MapboxConfig } from '../plugins/mapbox/mapbox.service';\nimport { PayPalConfig } from '../plugins/paypal/paypal.service';\nimport { TrustPilotConfig } from '../plugins/trustpilot/trustpilot.service';\n\nexport enum AuthStrategy {\n\tBearer = 0,\n\tCookie = 1,\n}\n\nexport class Language {\n\tid?: number;\n\tname?: string;\n\tlang?: string;\n}\n\nexport class CoreConfigPlugins {\n\tfacebook?: FacebookConfig;\n\tgoogle?: GoogleConfig;\n\tgoogleTagManager?: GoogleTagManagerConfig;\n\tmapbox?: MapboxConfig;\n\tpaypal?: PayPalConfig;\n\ttrustPilot?: TrustPilotConfig;\n\n\tconstructor(options?: CoreConfigPlugins) {\n\t\tconsole.log('CoreConfigPlugins', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class CoreTransitionConfig {\n\tappId?: string;\n\n\tconstructor(options?: CoreTransitionConfig) {\n\t\tconsole.log('CoreTransitionConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class CorePrebootConfig {\n\tappRoot?: string;\n\n\tconstructor(options?: CorePrebootConfig) {\n\t\tconsole.log('CorePrebootConfig', options);\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class CoreConfig {\n\tassets?: string = '';\n\tauthStrategy?: AuthStrategy = AuthStrategy.Cookie;\n\tdefaultLanguage?: string = 'it';\n\tdefaultMarket?: string = 'it';\n\tdefaultPage?: Type<PageComponent>;\n\teditor?: boolean;\n\tenableTracing?: boolean;\n\tlanguages?: Language[] = [{ id: 1, name: 'Italiano', lang: 'it' }];\n\tnotFoundPage?: Type<PageComponent>;\n\torigin?: string = '';\n\tpages?: Pages = {};\n\tplugins?: CoreConfigPlugins;\n\tpreboot?: CorePrebootConfig;\n\tproduction?: boolean = false;\n\tpublic?: string = '';\n\ttransition?: CoreTransitionConfig;\n\turlStrategy?: string = '';\n\tuseHash?: boolean = true;\n\tuseLang?: boolean = false;\n\tuseMarket?: boolean = false;\n\tuseServiceWorker?: boolean;\n\n\tconstructor(options?: CoreConfig) {\n\t\tconsole.log('CoreConfig', options);\n\t\tif (options) {\n\t\t\tthis.pages = options.pages || {};\n\t\t\tthis.plugins = new CoreConfigPlugins(options.plugins);\n\t\t\tthis.preboot = new CorePrebootConfig(options.preboot);\n\t\t\tthis.transition = new CoreTransitionConfig(options.transition);\n\t\t\tthis.defaultPage = options.defaultPage;\n\t\t\tthis.notFoundPage = options.notFoundPage;\n\t\t} else {\n\t\t\tthis.plugins = new CoreConfigPlugins();\n\t\t\tthis.preboot = new CorePrebootConfig();\n\t\t\tthis.transition = new CoreTransitionConfig();\n\t\t}\n\t}\n}\n\nexport const CORE_CONFIG = new InjectionToken<CoreConfig>('core.config');\n","\nimport { Inject, Injectable } from '@angular/core';\nimport { CoreConfig, CORE_CONFIG } from './core.config';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ConfigService {\n\n\tpublic options: CoreConfig;\n\n\tconstructor(\n\t\t@Inject(CORE_CONFIG) options: CoreConfig\n\t) {\n\t\tconsole.log('ConfigService', options);\n\t\toptions = options || {};\n\t\t// options.defaultPage = (options.defaultPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\t// options.notFoundPage = (options.notFoundPage || PageNotFoundComponent) as Type<PageComponent>;\n\t\tthis.options = new CoreConfig(options);\n\t}\n\n}\n","import { AfterContentChecked, Directive, ElementRef, Input, Renderer2, TemplateRef, ViewContainerRef } from '@angular/core';\n\n@Directive({\n\tselector: '[default]',\n})\nexport class DefaultContentDirective implements AfterContentChecked {\n\n\t@Input() default: TemplateRef<any>;\n\tprivate element: HTMLElement;\n\tprivate hasContent = true;\n\n\tconstructor(\n\t\telement: ElementRef,\n\t\tprivate container: ViewContainerRef,\n\t\tprivate renderer: Renderer2) {\n\t\tthis.element = element.nativeElement;\n\t}\n\n\tngAfterContentChecked(): void {\n\t\tlet hasContent = false;\n\t\tconsole.log('DefaultContentDirective', this.element.childNodes);\n\t\tfor (let i = this.element.childNodes.length - 1; i >= 0; --i) {\n\t\t\tconst node = this.element.childNodes[i];\n\t\t\tif (node.nodeType === 1 || node.nodeType === 3) {\n\t\t\t\thasContent = true;\n\t\t\t\tbreak;\n\t\t\t}\n\t\t}\n\t\tif (hasContent !== this.hasContent) {\n\t\t\tthis.hasContent = hasContent;\n\t\t\tif (hasContent) {\n\t\t\t\t// this.renderer.removeClass(this.element, 'is-empty');\n\t\t\t\tthis.container.clear();\n\t\t\t} else {\n\t\t\t\t// this.renderer.addClass(this.element, 'is-empty');\n\t\t\t\tthis.container.createEmbeddedView(this.default);\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import { Component, OnInit } from '@angular/core';\n\n@Component({\n\tselector: 'ws-core',\n\ttemplate: `\n    <span class=\"core__version\">core version 0.1.0</span>\n  `,\n\tstyles: []\n})\nexport class CoreComponent implements OnInit {\n\n\tconstructor() { }\n\n\tngOnInit() {\n\t}\n\n}\n","/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n/* global Reflect, Promise */\r\n\r\nvar extendStatics = function(d, b) {\r\n    extendStatics = Object.setPrototypeOf ||\r\n        ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\r\n        function (d, b) { for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p]; };\r\n    return extendStatics(d, b);\r\n};\r\n\r\nexport function __extends(d, b) {\r\n    extendStatics(d, b);\r\n    function __() { this.constructor = d; }\r\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\r\n}\r\n\r\nexport var __assign = function() {\r\n    __assign = Object.assign || function __assign(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\r\n        }\r\n        return t;\r\n    }\r\n    return __assign.apply(this, arguments);\r\n}\r\n\r\nexport function __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) if (e.indexOf(p[i]) < 0)\r\n            t[p[i]] = s[p[i]];\r\n    return t;\r\n}\r\n\r\nexport function __decorate(decorators, target, key, desc) {\r\n    var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\r\n    if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\r\n    else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\r\n    return c > 3 && r && Object.defineProperty(target, key, r), r;\r\n}\r\n\r\nexport function __param(paramIndex, decorator) {\r\n    return function (target, key) { decorator(target, key, paramIndex); }\r\n}\r\n\r\nexport function __metadata(metadataKey, metadataValue) {\r\n    if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\r\n}\r\n\r\nexport function __awaiter(thisArg, _arguments, P, generator) {\r\n    return new (P || (P = Promise))(function (resolve, reject) {\r\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\r\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\r\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\r\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\r\n    });\r\n}\r\n\r\nexport function __generator(thisArg, body) {\r\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\r\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\r\n    function verb(n) { return function (v) { return step([n, v]); }; }\r\n    function step(op) {\r\n        if (f) throw new TypeError(\"Generator is already executing.\");\r\n        while (_) try {\r\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\r\n            if (y = 0, t) op = [op[0] & 2, t.value];\r\n            switch (op[0]) {\r\n                case 0: case 1: t = op; break;\r\n                case 4: _.label++; return { value: op[1], done: false };\r\n                case 5: _.label++; y = op[1]; op = [0]; continue;\r\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\r\n                default:\r\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\r\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\r\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\r\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\r\n                    if (t[2]) _.ops.pop();\r\n                    _.trys.pop(); continue;\r\n            }\r\n            op = body.call(thisArg, _);\r\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\r\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\r\n    }\r\n}\r\n\r\nexport function __exportStar(m, exports) {\r\n    for (var p in m) if (!exports.hasOwnProperty(p)) exports[p] = m[p];\r\n}\r\n\r\nexport function __values(o) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator], i = 0;\r\n    if (m) return m.call(o);\r\n    return {\r\n        next: function () {\r\n            if (o && i >= o.length) o = void 0;\r\n            return { value: o && o[i++], done: !o };\r\n        }\r\n    };\r\n}\r\n\r\nexport function __read(o, n) {\r\n    var m = typeof Symbol === \"function\" && o[Symbol.iterator];\r\n    if (!m) return o;\r\n    var i = m.call(o), r, ar = [], e;\r\n    try {\r\n        while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\r\n    }\r\n    catch (error) { e = { error: error }; }\r\n    finally {\r\n        try {\r\n            if (r && !r.done && (m = i[\"return\"])) m.call(i);\r\n        }\r\n        finally { if (e) throw e.error; }\r\n    }\r\n    return ar;\r\n}\r\n\r\nexport function __spread() {\r\n    for (var ar = [], i = 0; i < arguments.length; i++)\r\n        ar = ar.concat(__read(arguments[i]));\r\n    return ar;\r\n}\r\n\r\nexport function __await(v) {\r\n    return this instanceof __await ? (this.v = v, this) : new __await(v);\r\n}\r\n\r\nexport function __asyncGenerator(thisArg, _arguments, generator) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var g = generator.apply(thisArg, _arguments || []), i, q = [];\r\n    return i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i;\r\n    function verb(n) { if (g[n]) i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; }\r\n    function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\r\n    function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\r\n    function fulfill(value) { resume(\"next\", value); }\r\n    function reject(value) { resume(\"throw\", value); }\r\n    function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\r\n}\r\n\r\nexport function __asyncDelegator(o) {\r\n    var i, p;\r\n    return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\r\n    function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: n === \"return\" } : f ? f(v) : v; } : f; }\r\n}\r\n\r\nexport function __asyncValues(o) {\r\n    if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\r\n    var m = o[Symbol.asyncIterator], i;\r\n    return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\r\n    function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\r\n    function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\r\n}\r\n\r\nexport function __makeTemplateObject(cooked, raw) {\r\n    if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\r\n    return cooked;\r\n};\r\n\r\nexport function __importStar(mod) {\r\n    if (mod && mod.__esModule) return mod;\r\n    var result = {};\r\n    if (mod != null) for (var k in mod) if (Object.hasOwnProperty.call(mod, k)) result[k] = mod[k];\r\n    result.default = mod;\r\n    return result;\r\n}\r\n\r\nexport function __importDefault(mod) {\r\n    return (mod && mod.__esModule) ? mod : { default: mod };\r\n}\r\n","\nimport { Component, OnDestroy } from '@angular/core';\nimport { Subject } from 'rxjs';\n\n@Component({\n\ttemplate: ''\n})\nexport class DisposableComponent implements OnDestroy {\n\n\tprotected unsubscribe: any = new Subject();\n\n\tngOnDestroy() {\n\t\tthis.unsubscribe.next();\n\t\tthis.unsubscribe.complete();\n\t\t// console.log('DisposableComponent.ngOnDestroy', this);\n\t}\n\n}\n","\nimport { Location } from '@angular/common';\nimport { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'segment',\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SegmentPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate location: Location\n\t) { }\n\n\ttransform(segments: any[] | string): any[] {\n\t\tsegments = segments != null ? (Array.isArray(segments) ? segments : segments.split('/')) : [];\n\t\tlet path: string = segments.join('/');\n\t\tpath = this.location.normalize(path);\n\t\tif (path.indexOf('/') !== 0) {\n\t\t\tpath = `/${path}`;\n\t\t}\n\t\tsegments = path.split('/');\n\t\treturn segments;\n\t}\n\n}\n","import { HttpErrorResponse } from '@angular/common/http';\nimport { Injectable } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\n\nexport class LoggerError extends HttpErrorResponse {\n\tbody?: any;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class Logger {\n\n\thttpError: LoggerError;\n\tlogs: string[] = [];\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t) {\n\t\t//\n\t}\n\n\trequest(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\t// console.log.apply(this, ['%c %s', 'background: #dddddd; color: #111'].concat(args));\n\t\t}\n\t}\n\n\tlog(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #1976d2; color: #fff; border-radius: 3px; padding: 4px 8px; margin-bottom: 4px;'].concat(args));\n\t\t}\n\t}\n\n\twarn(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.log.apply(this, ['%c%s', 'background: #ff5500; color: #fff'].concat(args));\n\t\t}\n\t}\n\n\terror(...args: any[]) {\n\t\tif (!this.configService.options.production) {\n\t\t\tconst s = args.join(', ');\n\t\t\tthis.logs.push(s);\n\t\t\tconsole.error.apply(console, args);\n\t\t}\n\t}\n\n\thttp(error: HttpErrorResponse) {\n\t\tthis.httpError = error;\n\t\tif (!this.configService.options.production) {\n\t\t\tthis.logs.push(error.message);\n\t\t}\n\t\tconsole.warn('Logger.http.error', error.status, error.statusText, error.url);\n\t}\n\n\tclear() {\n\t\tthis.httpError = null;\n\t\tthis.logs = [];\n\t}\n}\n","import { isPlatformBrowser, isPlatformServer } from '@angular/common';\nimport { HttpClient, HttpHeaders, HttpParams } from '@angular/common/http';\nimport { Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { makeStateKey, StateKey, TransferState } from '@angular/platform-browser';\nimport { Observable, of } from 'rxjs';\nimport { tap } from 'rxjs/operators';\nimport { ConfigService } from '../config/config.service';\nimport { CoreConfig } from '../config/core.config';\nimport { Logger } from '../logger/logger';\nimport { Identity } from '../models/identity';\n\nexport class ApiRequestOptions {\n\theaders?: HttpHeaders;\n\tparams?: HttpParams;\n\tconstructor(options?: {}) {\n\t\tthis.headers = new HttpHeaders({\n\t\t\t'Content-Type': 'application/json'\n\t\t});\n\t\tthis.params = options ? new HttpParams(options) : null;\n\t}\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ApiService<T extends Identity> {\n\n\tget collection(): string {\n\t\treturn '/api';\n\t}\n\n\tprivate _logger: Logger;\n\tget logger(): Logger {\n\t\tif (!this._logger) {\n\t\t\tthis._logger = this.injector.get(Logger);\n\t\t}\n\t\treturn this._logger;\n\t}\n\n\tprivate _http: HttpClient;\n\tget http(): HttpClient {\n\t\tif (!this._http) {\n\t\t\tthis._http = this.injector.get(HttpClient);\n\t\t}\n\t\treturn this._http;\n\t}\n\n\tprivate _state: TransferState;\n\tget state(): TransferState {\n\t\tif (!this._state) {\n\t\t\tthis._state = this.injector.get(TransferState);\n\t\t}\n\t\treturn this._state;\n\t}\n\n\tprivate _platformId: string;\n\tget platformId(): string {\n\t\tif (!this._platformId) {\n\t\t\tthis._platformId = this.injector.get<string>(PLATFORM_ID);\n\t\t}\n\t\treturn this._platformId;\n\t}\n\n\tprivate _config: CoreConfig;\n\tget config(): CoreConfig {\n\t\tif (!this._config) {\n\t\t\tthis._config = this.injector.get(ConfigService).options;\n\t\t}\n\t\treturn this._config;\n\t}\n\n\tprivate _origin: string;\n\tget origin(): string {\n\t\tif (!this._origin) {\n\t\t\tthis._origin = this.config.origin;\n\t\t}\n\t\treturn this._origin;\n\t}\n\n\tget url(): string {\n\t\tlet base: string = this.origin;\n\t\tconst collection = this.collection.toLowerCase();\n\t\tif (collection.indexOf('http') === 0) {\n\t\t\tbase = '';\n\t\t}\n\t\treturn `${base}${collection}`;\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) { }\n\n\tgetUrl(method: string = ''): string {\n\t\treturn `${this.url}${method}`;\n\t}\n\n\tget(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.get<T>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tput(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.put<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tpatch(first: string | T, second?: T | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: T = (typeof first === 'object' ? first : second) as T;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.patch<T>(url, model, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\tdelete(first: string | T | number, second?: T | number | {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst identity: T | number = (typeof first !== 'string' ? first : second) as T | number;\n\t\tconst id = identity ? (typeof identity === 'number' ? identity : identity.id) : null;\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = id !== null ? this.getUrl(`${method}/${id}`) : this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\treturn this.http.delete<T[]>(url, options).pipe(\n\t\t\ttap(x => this.logger.request(url)),\n\t\t);\n\t}\n\n\ttoCamelCase(input: any): any {\n\t\tlet output, key, keyCamelCase, value;\n\t\tif (input instanceof Array) {\n\t\t\treturn input.map((value: any) => {\n\t\t\t\tif (typeof value === 'object') {\n\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t});\n\t\t} else {\n\t\t\toutput = {};\n\t\t\tfor (key in input) {\n\t\t\t\tif (input.hasOwnProperty(key)) {\n\t\t\t\t\tkeyCamelCase = (key.charAt(0).toLowerCase() + key.slice(1) || key).toString();\n\t\t\t\t\tvalue = input[key];\n\t\t\t\t\tif (value instanceof Array || (value !== null && value.constructor === Object)) {\n\t\t\t\t\t\tvalue = this.toCamelCase(value);\n\t\t\t\t\t}\n\t\t\t\t\toutput[keyCamelCase] = value;\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn output;\n\t}\n\n\t// TRANSFER STATE\n\n\tgetStateKey(url: string, model: {}): StateKey<T> {\n\t\tconst flatMap = (s: string, x: any) => {\n\t\t\tif (typeof x === 'number') {\n\t\t\t\ts += x.toString();\n\t\t\t} else if (typeof x === 'string') {\n\t\t\t\ts += x.substr(0, 10);\n\t\t\t} else if (x && typeof x === 'object') {\n\t\t\t\ts += '_' + Object.keys(x).map(k => k + '_' + flatMap('', x[k])).join('_');\n\t\t\t}\n\t\t\treturn s;\n\t\t};\n\t\turl = flatMap(url, model);\n\t\t// console.log('ApiService.getStateKey.url', url);\n\t\tconst key: string = url.replace(/(\\W)/gm, '_');\n\t\t// this.logger.log('ApiService.getStateKey.key', key);\n\t\treturn makeStateKey(key);\n\t}\n\n\tstateGet(first?: string | {}, second?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst params: {} = (typeof first === 'object' ? first : second);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, params);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.get<T>(url, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t}\n\t}\n\n\tstatePost(first: string | {}, second?: {}, third?: {}): Observable<any> {\n\t\tconst method: string = (typeof first === 'string' ? first : '');\n\t\tconst model: {} = (typeof first === 'object' ? first : second);\n\t\tconst params: {} = (typeof second === 'object' ? second : third);\n\t\tconst url: string = this.getUrl(method);\n\t\tconst options = new ApiRequestOptions(params);\n\t\tconst stateKey = this.getStateKey(url, model);\n\t\tif (isPlatformBrowser(this.platformId) && this.state.hasKey(stateKey)) {\n\t\t\tconst cached = this.state.get(stateKey, null);\n\t\t\tthis.state.remove(stateKey);\n\t\t\treturn of(cached);\n\t\t} else {\n\t\t\treturn this.http.post<T>(url, model, options).pipe(\n\t\t\t\ttap(x => {\n\t\t\t\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t\t\t\tthis.state.onSerialize(stateKey, () => x);\n\t\t\t\t\t}\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { ApiService } from '../api/api.service';\n\nexport class Translate {\n\tid: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslateService extends ApiService<Translate>  {\n\n\tget collection(): string {\n\t\treturn '/api/translate';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tpublic use(lang: string) {\n\n\t}\n\n\tpublic setDefaultLang(lang: string) {\n\n\t}\n\n\tpublic addLangs(lang: string[]) {\n\n\t}\n\n\tpublic getBrowserLang(): string {\n\t\treturn 'it';\n\t}\n}\n","\n\nimport { isPlatformBrowser, isPlatformServer, Location } from '@angular/common';\nimport { ComponentFactory, ComponentFactoryResolver, Inject, Injectable, Injector, PLATFORM_ID } from '@angular/core';\nimport { ActivatedRoute, ActivationEnd, NavigationStart, Params, Router } from '@angular/router';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { concatMap, distinctUntilChanged, filter, map, switchMap, tap } from 'rxjs/operators';\nimport { ConfigService } from '../config/config.service';\nimport { Page } from '../pages/page';\nimport { PageComponent } from '../pages/page.component';\nimport { SegmentPipe } from '../pipes/segment.pipe';\nimport { TranslateService } from '../translate/translate.service';\n\ndeclare const Buffer;\ndeclare const process;\n\n// @dynamic\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RouteService {\n\n\tstatic startTime: number;\n\tstatic endTime: number;\n\tprivate urlStrategy: string;\n\tprivate _language: any = new BehaviorSubject({});\n\tpublic readonly language: Observable<any> = this._language.asObservable();\n\tprivate _languages: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\tpublic readonly languages: Observable<any[]> = this._languages.asObservable();\n\tprivate _lang: string;\n\tprivate path: string;\n\tpublic page: Page;\n\tpublic params: Observable<Params>;\n\tpublic queryParams: Observable<Params>;\n\tprivate busy: boolean;\n\tpublic currentMarket: string;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate injector: Injector,\n\t\tprivate translateService: TranslateService,\n\t\tprivate location: Location,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate router: Router,\n\t\tprivate segment: SegmentPipe,\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver\n\t) {\n\t\tthis.urlStrategy = this.configService.options.urlStrategy;\n\t\tthis._languages.next(this.configService.options.languages);\n\t\tthis.currentMarket = this.configService.options.defaultMarket;\n\t\tthis.setLanguages();\n\t\tif (this.configService.options.useLang || this.configService.options.useMarket) {\n\t\t\tthis.subscribeToRouter();\n\t\t}\n\t}\n\n\tprivate get lang(): string {\n\t\treturn this._lang;\n\t}\n\n\tprivate set lang(lang: string) {\n\t\tif (lang !== this._lang) {\n\t\t\tthis._lang = lang;\n\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\tthis._language.next(language);\n\t\t\tthis.translateService.use(lang);\n\t\t\t// console.log('RouteService.set lang', lang, this.configService.options.useLang);\n\t\t\tif (this.configService.options.useLang) {\n\t\t\t\tconst _lang: string = this._lang;\n\t\t\t\tlet path = this.location.path();\n\t\t\t\tif (path.indexOf(`/${_lang}`) === 0) {\n\t\t\t\t\tpath = path.replace(`/${_lang}`, `/${lang}`);\n\t\t\t\t} else if (path.indexOf(`/${lang}`) !== 0) {\n\t\t\t\t\tpath = `/${lang}` + path;\n\t\t\t\t}\n\t\t\t\tthis.path = path;\n\t\t\t\t// const langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t}\n\t\t}\n\t}\n\n\tpublic get currentLang(): string {\n\t\treturn this._lang;\n\t}\n\n\tpublic pageParams$: BehaviorSubject<Params> = new BehaviorSubject({});\n\tpublic getPageParams(): Observable<Params> {\n\t\t// console.log('RouteService.getPageParams', this.router.url);\n\t\treturn this.route.queryParams.pipe(\n\t\t\tdistinctUntilChanged(),\n\t\t\tswitchMap(params => {\n\t\t\t\t// console.log(params);\n\t\t\t\tconst parsed = this.parseParams(params);\n\t\t\t\tthis.pageParams$.next(parsed);\n\t\t\t\treturn of(parsed);\n\t\t\t}),\n\t\t\t// tap(params => console.log('RouteService.getPageParams', params)),\n\t\t);\n\t}\n\n\tpublic parseParams(params: any): any {\n\t\tconst parsed = {};\n\t\tObject.keys(params).forEach(k => parsed[k] = this.parse(params[k]));\n\t\t/*\n\t\tfor (const key in params) {\n\t\t\tif (typeof (params[key]) === 'string') {\n\t\t\t\tparsed[key] = this.parse(params[key]);\n\t\t\t} else {\n\t\t\t\tparsed[key] = params[key];\n\t\t\t}\n\t\t}\n\t\t*/\n\t\treturn parsed;\n\t}\n\n\tpublic serializeParams(params: any) {\n\t\tconst serialized = {};\n\t\tObject.keys(params).forEach(k => serialized[k] = this.serialize(params[k]));\n\t\treturn serialized;\n\t}\n\n\tpublic parse(base64) {\n\t\ttry {\n\t\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t\treturn JSON.parse(window.atob(base64));\n\t\t\t} else {\n\t\t\t\treturn JSON.parse(Buffer.from(base64, 'base64').toString('ascii'));\n\t\t\t}\n\t\t} catch {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tpublic serialize(object) {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn window.btoa(JSON.stringify(object));\n\t\t} else {\n\t\t\treturn Buffer.from(JSON.stringify(object), 'ascii').toString('base64');\n\t\t}\n\t}\n\n\tpublic getId(): number {\n\t\treturn +this.route.snapshot.paramMap.get('id');\n\t}\n\n\tpublic getSlug(): string {\n\t\treturn this.route.snapshot.paramMap.get('slug');\n\t}\n\n\tpublic toRoute(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tif (this.configService.options.useMarket) {\n\t\t\tconst market: string = this.currentMarket;\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tsegments.splice(marketIndex, 0, market);\n\t\t}\n\t\tif (this.configService.options.useLang) {\n\t\t\tconst lang: string = this._lang;\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tsegments.splice(langIndex, 0, lang);\n\t\t}\n\t\t// console.log('RouteService.toRoute', segments);\n\t\treturn segments;\n\t}\n\n\tpublic toSlug(data: any[] | string): any[] {\n\t\tconst segments = this.segment.transform(data);\n\t\tlet paths = segments.filter(x => {\n\t\t\treturn typeof x === 'string';\n\t\t});\n\t\tconst datas = segments.filter(x => {\n\t\t\treturn typeof x !== 'string';\n\t\t});\n\t\tif (this.configService.options.useMarket) {\n\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\tif (paths.length > marketIndex) {\n\t\t\t\tpaths[marketIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tif (this.configService.options.useLang) {\n\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\tif (paths.length > langIndex) {\n\t\t\t\tpaths[langIndex] = '*';\n\t\t\t}\n\t\t}\n\t\tpaths = paths.join('/').replace(/\\/\\*/gi, '').split('/');\n\t\t// console.log('RouteService.toSlug', data, paths);\n\t\treturn paths.concat(datas);\n\t}\n\n\tpublic toParams(data: any): any {\n\t\treturn {\n\t\t\tdata: window.btoa(JSON.stringify(data))\n\t\t};\n\t}\n\n\tpublic toData(params: any): any {\n\t\tif (params && params.data) {\n\t\t\treturn JSON.parse(window.atob(params.data));\n\t\t}\n\t}\n\n\tpublic getParams(): Observable<ComponentFactory<PageComponent>> {\n\t\treturn this.router.events.pipe(\n\t\t\tfilter(event => event instanceof ActivationEnd),\n\t\t\tmap(() => this.route),\n\t\t\tdistinctUntilChanged(),\n\t\t\tmap(route => route.firstChild),\n\t\t\tswitchMap(route => route.params),\n\t\t\t/*\n\t\t\ttap((params) => {\n\t\t\t\t// console.log('getParams', params);\n\t\t\t}),\n\t\t\t*/\n\t\t\tconcatMap(x => {\n\t\t\t\treturn of(this.toData(x));\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic _unused_getPageComponentFactory(): Observable<ComponentFactory<PageComponent>> {\n\t\treturn this.router.events.pipe(\n\t\t\tfilter(event => event instanceof ActivationEnd),\n\t\t\t/*\n\t\t\ttap((event) => {\n\t\t\t\t// console.log('ActivationEnd', event);\n\t\t\t}),\n\t\t\t*/\n\t\t\tmap(() => this.route),\n\t\t\tdistinctUntilChanged(),\n\t\t\tmap(route => route.firstChild),\n\t\t\ttap((route) => {\n\t\t\t\tthis.params = route.params.pipe(\n\t\t\t\t\tconcatMap(x => {\n\t\t\t\t\t\treturn of(this.toData(x));\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\tthis.queryParams = route.queryParams.pipe(\n\t\t\t\t\t// tap(x => console.log('queryParams', x)),\n\t\t\t\t\tconcatMap(x => {\n\t\t\t\t\t\treturn of(this.toData(x));\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\t// console.log('params', this.route.params);\n\t\t\t}),\n\t\t\tswitchMap(route => route.data),\n\t\t\tmap((data): ComponentFactory<PageComponent> => {\n\t\t\t\tif (data.pageResolver) {\n\t\t\t\t\tthis.page = data.pageResolver.page;\n\t\t\t\t\tconst factory: ComponentFactory<PageComponent> = this.componentFactoryResolver.resolveComponentFactory(data.pageResolver.component);\n\t\t\t\t\treturn factory;\n\t\t\t\t} else {\n\t\t\t\t\treturn null;\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic setLanguage(lang: string, silent?: boolean) {\n\t\tthis.lang = lang;\n\t\tif (this.configService.options.useLang && this.path) {\n\t\t\t// console.log('RouteService.setLanguage', this.path, this._lang, lang, silent);\n\t\t\tif (silent) {\n\t\t\t\tthis.location.replaceState(this.path);\n\t\t\t} else {\n\t\t\t\tthis.router.navigate([this.path]);\n\t\t\t}\n\t\t}\n\t}\n\n\t// PRIVATE METHODS\n\n\tprivate setLanguages() {\n\t\tthis.translateService.addLangs(this.configService.options.languages ? this.configService.options.languages.map(x => x.lang) : []);\n\t\tthis.translateService.setDefaultLang(this.configService.options.defaultLanguage);\n\t\t// this.setLanguage(this.detectLanguage(), true);\n\t\tthis.setLanguage(this.configService.options.defaultLanguage, true);\n\t\t/*\n\t\tthis.translateService.onLangChange.subscribe((e: LangChangeEvent) => {\n\t\t\t// console.log('RouteService.onLangChange', e);\n\t\t});\n\t\t*/\n\t}\n\n\tprivate subscribeToRouter() {\n\t\tthis.router.events.pipe(\n\t\t\tfilter(event => event instanceof NavigationStart)\n\t\t).subscribe((event: NavigationStart) => {\n\t\t\tconst location = this.location.normalize(event.url).split('/');\n\t\t\tif (this.configService.options.useMarket) {\n\t\t\t\tconst marketIndex = this.urlStrategy.split('/').indexOf(':market');\n\t\t\t\tconst market = location[marketIndex];\n\t\t\t\tif (market !== this.currentMarket) {\n\t\t\t\t\tthis.currentMarket = market;\n\t\t\t\t\t// console.log('RouteService.setMarket', market, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t\tif (this.configService.options.useLang) {\n\t\t\t\tconst langIndex = this.urlStrategy.split('/').indexOf(':lang');\n\t\t\t\tconst lang = location[langIndex];\n\t\t\t\tif (lang !== this._lang) {\n\t\t\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\t\t\tthis._language.next(language);\n\t\t\t\t\tthis.translateService.use(lang);\n\t\t\t\t\t// console.log('RouteService.setLang', lang, this._lang, langIndex, location, event.url);\n\t\t\t\t}\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate detectLanguage(): string {\n\t\tlet acceptLanguage: string = null;\n\t\tif (isPlatformServer(this.platformId)) {\n\t\t\t/*\n\t\t\t// server side express engine\n\t\t\tapp.engine('html',  (_, options, callback) => {\n\t\t\t\tlet engine = ngExpressEngine({\n\t\t\t\t\tbootstrap: ServerAppModule,\n\t\t\t\t\tproviders: [ { provide: 'request', useFactory: () => options.req } ]\n\t\t\t\t});\n\t\t\t\tengine(_, options, callback)\n\t\t\t})\n\t\t\t*/\n\t\t\tconst request = this.injector.get('request');\n\t\t\tif (request) {\n\t\t\t\tacceptLanguage = request.headers['accept-language'];\n\t\t\t\tconst languages: string[] = acceptLanguage.match(/[a-zA-Z\\-]{2,10}/g) || [];\n\t\t\t\tif (languages.length > 0) {\n\t\t\t\t\tacceptLanguage = languages[0].split('-')[0];\n\t\t\t\t} else {\n\t\t\t\t\tacceptLanguage = null;\n\t\t\t\t}\n\t\t\t\t// console.log('request', request, 'acceptLanguage', acceptLanguage);\n\t\t\t}\n\t\t\t// console.log('RouteService.isPlatformServer', this.platformId, acceptLanguage);\n\t\t} else if (isPlatformBrowser(this.platformId)) {\n\t\t\tacceptLanguage = this.translateService.getBrowserLang();\n\t\t\t// console.log('RouteService.isPlatformBrowser', this.platformId, acceptLanguage);\n\t\t}\n\t\tlet detectedLanguage: string = this.configService.options.defaultLanguage;\n\t\tconst regexp: RegExp = new RegExp(`(${this.configService.options.languages ? this.configService.options.languages.map(x => x.lang).join('|') : ''})`, 'gi');\n\t\tconst match = (acceptLanguage || '').match(regexp);\n\t\tdetectedLanguage = match ? match[0] : detectedLanguage;\n\t\t// console.log('RouteService.detectLanguage', detectedLanguage);\n\t\treturn detectedLanguage;\n\t}\n\n\tpublic getTime() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn (performance || Date).now();\n\t\t} else {\n\t\t\tconst time = process.hrtime();\n\t\t\treturn (time[0] * 1e9 + time[1]) / 1e6;\n\t\t}\n\t}\n\n}\n","\nimport { isPlatformBrowser } from '@angular/common';\nimport { Component, Injector, Input, PLATFORM_ID } from '@angular/core';\nimport { NavigationEnd, Params, Router } from '@angular/router';\nimport { Observable } from 'rxjs';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { RouteService } from '../routes/route.service';\nimport { Page } from './page';\n\nexport interface PageInit {\n\tPageInit(): void;\n}\n\n@Component({\n\tselector: 'ws-page',\n\ttemplate: `<h1>I'm a default view!</h1>`,\n})\n\nexport class PageComponent extends DisposableComponent {\n\n\t@Input() page: Page;\n\t@Input() params: Observable<Params>;\n\t@Input() queryParams: Observable<Params>;\n\n\tget platformId(): string {\n\t\treturn this.injector.get(PLATFORM_ID) as string;\n\t}\n\n\tget routeService(): RouteService {\n\t\treturn this.injector.get(RouteService);\n\t}\n\n\tget router(): Router {\n\t\treturn this.injector.get(Router);\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper();\n\t\tthis.scrollToTop();\n\t}\n\n\t// !!! Scroll to top on page change\n\tprivate scrollToTop(): void {\n\t\t// !!! PLATFORM_ID dependancy manually activated\n\t\t// const platformId: string = RouteService.injector.get(PLATFORM_ID) as string;\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t// !!! Router dependancy manually activated\n\t\t\t// const router = RouteService.injector.get(Router);\n\t\t\tthis.router.events.subscribe((e) => {\n\t\t\t\tif (!(e instanceof NavigationEnd)) {\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\t\t\twindow.scrollTo(0, 0);\n\t\t\t});\n\t\t}\n\t}\n\n\tgetId(): number | string {\n\t\treturn this.routeService.getId() || (this.page ? this.page.id : 0);\n\t}\n\n\tgetSlug(): string {\n\t\treturn this.routeService.getSlug() || (this.page ? this.page.slug : '');\n\t}\n\n}\n","import { Component, Injector, ViewEncapsulation } from '@angular/core';\nimport { PageComponent } from './page.component';\n\n@Component({\n\tselector: 'page-not-found-component',\n\ttemplateUrl: './page-not-found.component.html',\n\tstyleUrls: ['./page-not-found.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\n\nexport class PageNotFoundComponent extends PageComponent {\n\n\tpublic url: string;\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t\tthis.url = this.router.url;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\n\n@Injectable()\nexport class HttpStatusCodeService {\n\n\tprivate statusCode: number;\n\tprivate redirectUrl: string;\n\n\tconstructor() {\n\t\tthis.statusCode = 200;\n\t\tthis.redirectUrl = null;\n\t}\n\n\tpublic setStatusCode(statusCode: number, redirectUrl: string = null) {\n\t\tthis.statusCode = statusCode;\n\t\tthis.redirectUrl = redirectUrl;\n\t}\n\n\tpublic getStatusCode(): number {\n\t\treturn (this.statusCode === 309 ? 301 : this.statusCode);\n\t}\n\n\tpublic getRedirectUrl(): string {\n\t\treturn this.redirectUrl;\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ApiService } from '../api/api.service';\nimport { Identity } from './identity';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class IdentityService<T extends Identity> extends ApiService<T> {\n\n\tconstructor(\n\t\tprotected injector: Injector\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tget collection(): string {\n\t\treturn '/api/identity';\n\t}\n\n\tgetList(): Observable<T[]> {\n\t\treturn this.get();\n\t}\n\n\tgetDetailByIdNo404<Data>(id: number | string): Observable<T> {\n\t\treturn this.get({ id }).pipe(\n\t\t\tmap((identities: T[]) => identities[0]),\n\t\t);\n\t}\n\n\tgetDetailById(id: number | string): Observable<T> {\n\t\treturn this.get({ id });\n\t}\n\n\tadd(identity: T) {\n\t\treturn this.post(identity);\n\t}\n\n\tupdate(identity: T) {\n\t\treturn this.put(identity);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { Entity } from './entity';\nimport { IdentityService } from './identity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EntityService<T extends Entity> extends IdentityService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/entity';\n\t}\n\n\tgetDetailByName(name: string): Observable<T[]> {\n\t\tif (!name.trim()) {\n\t\t\treturn of([]);\n\t\t}\n\t\treturn this.get({ name });\n\t}\n\n}\n","\nexport enum ImageType {\n\tDefault = 1,\n\tGallery = 2,\n\tShare = 3,\n}\n\nexport class Image {\n\tid: number | string;\n\turl: string;\n\ttitle?: string;\n\tdescription?: string;\n\tfileName?: string;\n\ttype?: ImageType;\n}\n","import { DOCUMENT } from '@angular/common';\nimport { Inject, Injectable } from '@angular/core';\n\nexport class LinkDefinition {\n\thref?: string;\n\tid?: string;\n\trel?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root',\n})\nexport class LinkService {\n\n\tconstructor(\n\t\t@Inject(DOCUMENT) private doc: any,\n\t) { }\n\n\taddTag(definition: LinkDefinition) {\n\t\tconst element = this.doc.createElement(`link`);\n\t\tthis.updateElementDefinition(element, definition);\n\t\tthis.doc.head.appendChild(element);\n\t}\n\n\tgetTag(selector: string) {\n\t\tconst element = this.doc.querySelector(`link${selector}`);\n\t\treturn element;\n\t}\n\n\tupdateTag(selector: string, definition: LinkDefinition) {\n\t\tconst element = this.doc.querySelector(`link${selector}`);\n\t\tthis.updateElementDefinition(element, definition);\n\t}\n\n\tremoveTag(selector: string) {\n\t\tconst element = this.doc.querySelector(`link${selector}`);\n\t\telement.remove();\n\t}\n\n\tupdateElementDefinition(element: HTMLLinkElement, definition: LinkDefinition) {\n\t\tthis.updateElementAttribute(element, 'href', definition.href);\n\t\tthis.updateElementAttribute(element, 'id', definition.id);\n\t\tthis.updateElementAttribute(element, 'rel', definition.rel);\n\t}\n\n\tupdateElementAttribute(element: HTMLLinkElement, attribute: string, value: any) {\n\t\tif (value) {\n\t\t\telement.setAttribute(attribute, value);\n\t\t} else {\n\t\t\telement.removeAttribute(attribute);\n\t\t}\n\t}\n\n}\n","import { Document } from '../models/document';\nimport { Feature } from '../models/feature';\nimport { Image } from '../models/image';\nimport { Taxonomy } from '../models/taxonomy';\n\nexport class PageMeta {\n\tappId?: string;\n\tauthor?: string;\n\tcanonical?: string;\n\tdescription?: string;\n\tkeywords?: string;\n\tlocale?: string;\n\trobots?: string;\n\ttitle?: string;\n\ttype?: string;\n}\n\nexport class PageIndex implements Document {\n\tabstract?: string;\n\tid: number | string;\n\timages?: Image[];\n\tname?: string;\n\trelationType?: number | string;\n\tslug?: string;\n\ttitle?: string;\n\ttype?: number | string;\n\turl?: string;\n\n\tconstructor(options?: PageIndex) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n}\n\nexport class PageRelation implements Document {\n\tid: number | string;\n\tpage: Page;\n\ttype?: number | string;\n}\n\nexport class Page implements Document {\n\tabstract?: string;\n\tactive?: boolean;\n\tcomponent?: number | string;\n\tdescription?: string;\n\tfeatures?: Feature[];\n\tid: number | string;\n\timages?: Image[];\n\tmeta?: PageMeta = {};\n\tname?: string;\n\trelated?: any[];\n\tslug?: string;\n\ttaxonomies?: Taxonomy[];\n\ttitle?: string;\n\ttype?: number | string;\n\turl?: string;\n\n\tconstructor(options?: Page) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tif (options.related) {\n\t\t\t\tconst related: PageIndex[] = options.related.map((x: PageRelation) => {\n\t\t\t\t\tconst item = new PageIndex(x.page);\n\t\t\t\t\titem.relationType = x.type;\n\t\t\t\t\treturn item;\n\t\t\t\t});\n\t\t\t\tthis.related = related;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetFeature?(id: number): Feature {\n\t\treturn this.features.find(x => x.id === id) || null;\n\t}\n\n\tgetFeatures?(type: number, n: number[]): Feature[] {\n\t\treturn this.features ? this.features.filter((x: Feature, i: number) => (\n\t\t\tn.indexOf(Number(x.id)) !== -1 && x.type === type\n\t\t)).sort((a: Feature, b: Feature) => a.type - b.type) : [];\n\t}\n\n\tgetFeaturesByTypes?(type: number[]): Feature[] {\n\t\treturn this.features ? this.features.filter((x: Feature) => (\n\t\t\ttype.indexOf(Number(x.type)) !== -1\n\t\t)) : [];\n\t}\n\n\tgetGroupedFeaturesByTypes?(type: number[]): any {\n\t\tconst groups = {};\n\t\ttype.forEach(type => {\n\t\t\tconst group = groups[type] || { features: [] };\n\t\t\tif (this.features) {\n\t\t\t\tthis.features.forEach((x: Feature) => {\n\t\t\t\t\tif (Number(x.type) === type) {\n\t\t\t\t\t\tgroup.features.push(x);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t\tgroups[type] = group;\n\t\t});\n\t\t/*\n\t\tif (this.features) {\n\t\t\tthis.features.forEach((x: Feature) => {\n\t\t\t\tif (type.indexOf(Number(x.type)) !== -1) {\n\t\t\t\t\tconst group = groups[x.type] || { features: [] };\n\t\t\t\t\tgroup.features.push(x);\n\t\t\t\t\tgroups[x.type] = group;\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\t*/\n\t\treturn groups;\n\t}\n\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { Meta, MetaDefinition, Title } from '@angular/platform-browser';\nimport { Observable, of } from 'rxjs';\nimport { catchError, map } from 'rxjs/operators';\nimport { HttpStatusCodeService } from '../http/http-status-code.service';\nimport { EntityService } from '../models/entity.service';\nimport { Image, ImageType } from '../models/image';\nimport { LinkDefinition, LinkService } from './link.service';\nimport { Page } from './page';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PageService extends EntityService<Page> {\n\n\tget collection(): string {\n\t\treturn '/api/page';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t\tprivate titleService: Title,\n\t\tprivate metaService: Meta,\n\t\tprivate linkService: LinkService,\n\t\tprivate statusCodeService: HttpStatusCodeService,\n\t) {\n\t\tsuper(injector);\n\t}\n\n\tgetStatePageBySlug(slug: string): Observable<Page> {\n\t\tslug = slug.split('?')[0];\n\t\tif (slug.indexOf('/') === 0) {\n\t\t\tslug = slug.substr(1);\n\t\t}\n\t\treturn this.stateGet(`?slug=/${slug}`).pipe(\n\t\t\tmap(x => {\n\t\t\t\tx = new Page(Array.isArray(x) ? x.find(x => x.slug === `/${slug}`) : x);\n\t\t\t\t// console.log('PageService.getStatePageBySlug', x);\n\t\t\t\treturn x;\n\t\t\t}),\n\t\t\tcatchError(error => {\n\t\t\t\t// console.log('getStatePageBySlug.error', error);\n\t\t\t\tthis.statusCodeService.setStatusCode(error.status, error.error ? error.error.redirectUrl : null);\n\t\t\t\treturn of(null);\n\t\t\t}),\n\t\t);\n\t}\n\n\tgetPageById(id: number | string): Observable<Page> {\n\t\treturn this.stateGet(`/${id}`).pipe(\n\t\t\t// tap(x => console.log('PageService.getPageById', id, x)),\n\t\t\tmap(x => new Page(x)),\n\t\t\tcatchError(error => {\n\t\t\t\tthis.statusCodeService.setStatusCode(error.status, error.error ? error.error.redirectUrl : null);\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\tgetPageBySlug(slug: string): Observable<Page> {\n\t\tslug = slug.split(';')[0];\n\t\t// console.log('PageService.getPageBySlug', slug);\n\t\treturn this.get(`?slug=/${slug}`).pipe(\n\t\t\tmap(x => new Page(x)),\n\t\t\t// tap(x => this.logger.log(`found pages matching \"${slug}\"`))\n\t\t\t// tap(x => console.log('PageService.getPageBySlug', x, slug))\n\t\t\tcatchError(error => {\n\t\t\t\t// console.log('PageService.getPageBySlug.error', error);\n\t\t\t\tthis.statusCodeService.setStatusCode(error.status, error.error ? error.error.redirectUrl : null);\n\t\t\t\treturn of(null);\n\t\t\t})\n\t\t);\n\t}\n\n\taddOrUpdateMetaData(page: Page) {\n\t\t// console.log('PageService.addOrUpdateMetaData', page);\n\t\tif (!page) {\n\t\t\treturn;\n\t\t}\n\t\tconst fbAppId: string = this.config.plugins && this.config.plugins.facebook ? this.config.plugins.facebook.appId.toString() : '';\n\t\tthis.titleService.setTitle(page.title);\n\t\tthis.addOrUpdateMeta({ property: 'og:title', content: page.title });\n\t\tthis.addOrUpdateMeta({ property: 'og:image', content: this.getSocialImage(page).url });\n\t\tthis.addOrUpdateMeta({ property: 'og:image:width', content: '1200' });\n\t\tthis.addOrUpdateMeta({ property: 'og:image:height', content: '630' });\n\t\tthis.addOrUpdateMeta({ property: 'fb:app_id', content: fbAppId });\n\t\tthis.addOrUpdateMeta({ property: 'og:url', content: page.url || this.origin });\n\t\tconst meta = page.meta;\n\t\tif (meta) {\n\t\t\tthis.addOrUpdateMeta({ name: 'description', content: meta.description || 'Servizio di qualitÃ  senza costi aggiuntivi con i convenienti pacchetti viaggio Eurospin. Prenota comodamente online!' });\n\t\t\tthis.addOrUpdateMeta({ name: 'keywords', content: meta.keywords || 'viaggi,viaggi eurospin' });\n\t\t\tthis.addOrUpdateMeta({ name: 'robots', content: meta.robots || 'index,follow' });\n\t\t\tthis.addOrUpdateMeta({ property: 'og:locale', content: meta.locale || 'it_IT' });\n\t\t\tthis.addOrUpdateMeta({ property: 'og:type', content: meta.type || 'article' });\n\t\t\tthis.addOrUpdateMeta({ property: 'og:author', content: meta.author || 'Eurospin Viaggi' });\n\t\t\tthis.addOrUpdateLink({ rel: 'canonical', href: meta.canonical || (this.origin.indexOf(page.url) === 0 ? null : page.url) });\n\t\t}\n\t\t// console.log('PageOutletComponent.addOrUpdateMetaData', page.id, page.title, page.url);\n\t}\n\n\tprivate getSocialImage(page: Page): Image {\n\t\tconst image = page.images ? (\n\t\t\tpage.images.find(i => i.type === ImageType.Share) ||\n\t\t\tpage.images.find(i => i.type === ImageType.Default) ||\n\t\t\tpage.images.find(i => i.type === ImageType.Gallery)\n\t\t) : null;\n\t\treturn image || {\n\t\t\turl: 'https://s-static.ak.fbcdn.net/images/devsite/attachment_blank.png'\n\t\t} as Image;\n\t}\n\n\tprivate addOrUpdateMeta(definition: MetaDefinition) {\n\t\tconst selector = definition.name ? `name=\"${definition.name}\"` : `property=\"${definition.property}\"`;\n\t\tif (this.metaService.getTag(selector)) {\n\t\t\tif (definition.content) {\n\t\t\t\tthis.metaService.updateTag(definition, selector);\n\t\t\t} else {\n\t\t\t\tthis.metaService.removeTag(selector);\n\t\t\t}\n\t\t} else if (definition.content) {\n\t\t\tthis.metaService.addTag(definition);\n\t\t}\n\t}\n\n\tprivate addOrUpdateLink(definition: LinkDefinition) {\n\t\tconst selector = definition.id ? `#${definition.id}` : `[rel=\"${definition.rel}\"]`;\n\t\tif (this.linkService.getTag(selector)) {\n\t\t\tif (definition.href) {\n\t\t\t\tthis.linkService.updateTag(selector, definition);\n\t\t\t} else {\n\t\t\t\tthis.linkService.removeTag(selector);\n\t\t\t}\n\t\t} else if (definition.href) {\n\t\t\tthis.linkService.addTag(definition);\n\t\t}\n\t}\n\n}\n","import { Component, ComponentFactory, ComponentFactoryResolver, Inject, ViewContainerRef } from '@angular/core';\nimport { ActivatedRoute, ActivatedRouteSnapshot, Router } from '@angular/router';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { RouteService } from '../routes/route.service';\nimport { PageNotFoundComponent } from './page-not-found.component';\nimport { PageComponent } from './page.component';\nimport { PageService } from './page.service';\n\n@Component({\n\tselector: 'page-outlet',\n\ttemplate: '',\n})\n\nexport class PageOutletComponent extends DisposableComponent {\n\n\tprivate factory: ComponentFactory<PageComponent>;\n\n\tconstructor(\n\t\t@Inject(ViewContainerRef) private viewContainerRef: ViewContainerRef,\n\t\tprivate router: Router,\n\t\tprivate route: ActivatedRoute,\n\t\tprivate componentFactoryResolver: ComponentFactoryResolver,\n\t\tprivate routeService: RouteService,\n\t\tprivate pageService: PageService,\n\t) {\n\t\tsuper();\n\t\t// !!! keep -> Avoid PageOutlet Route Caching for different routes\n\t\tthis.router.routeReuseStrategy.shouldReuseRoute = () => {\n\t\t\treturn false;\n\t\t};\n\t\tthis.setSnapshot(this.route.snapshot);\n\t}\n\n\tsetSnapshot(snapshot: ActivatedRouteSnapshot): void {\n\t\tthis.routeService.params = this.routeService.toData(snapshot.params);\n\t\tthis.routeService.queryParams = this.routeService.toData(snapshot.queryParams);\n\t\tconst data = snapshot.data;\n\t\tconst params = this.routeService.params;\n\t\tconst queryParams = this.routeService.queryParams;\n\t\tlet component: any = PageNotFoundComponent;\n\t\tif (data.pageResolver) {\n\t\t\tcomponent = data.pageResolver.component;\n\t\t\tthis.routeService.page = data.pageResolver.page;\n\t\t\tconst factory: ComponentFactory<PageComponent> = this.componentFactoryResolver.resolveComponentFactory(component);\n\t\t\tthis.factory = factory;\n\t\t\tthis.viewContainerRef.clear();\n\t\t\tconst componentRef = this.viewContainerRef.createComponent(this.factory);\n\t\t\tconst instance = componentRef.instance;\n\t\t\tinstance.page = data.pageResolver.page;\n\t\t\tinstance.params = params;\n\t\t\tinstance.queryParams = queryParams;\n\t\t\tif (typeof instance['PageInit'] === 'function') {\n\t\t\t\tinstance['PageInit']();\n\t\t\t}\n\t\t\tif (data.pageResolver.page) {\n\t\t\t\tconst config = this.router.config.slice();\n\t\t\t\tconst slug = data.pageResolver.page.slug;\n\t\t\t\tif (slug) {\n\t\t\t\t\tconfig.push({\n\t\t\t\t\t\tpath: slug.indexOf('/') === 0 ? slug.substr(1) : slug, component: data.pageResolver.component,\n\t\t\t\t\t});\n\t\t\t\t\tthis.router.resetConfig(config);\n\t\t\t\t}\n\t\t\t\tthis.pageService.addOrUpdateMetaData(this.routeService.page);\n\t\t\t}\n\t\t}/* else {\n\t\t\t// console.log('PageOutletComponent.setSnapshot 404', data);\n\t\t}*/\n\t}\n\n}\n","import { Type } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\nimport { Page } from './page';\nimport { PageNotFoundComponent } from './page-not-found.component';\nimport { PageComponent } from './page.component';\n\nexport class PageResolver {\n\n\tpublic component: Type<PageComponent> = PageComponent;\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tpublic page: Page,\n\t) {\n\t\tif (page && this.configService.options.pages) {\n\t\t\tthis.component = this.configService.options.pages[page.component] || this.configService.options.defaultPage;\n\t\t} else {\n\t\t\tthis.component = this.configService.options.notFoundPage || PageNotFoundComponent;\n\t\t}\n\t}\n}\n","\nimport { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, Resolve, RouterStateSnapshot } from '@angular/router';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ConfigService } from '../config/config.service';\nimport { RouteService } from '../routes/route.service';\nimport { Page } from './page';\nimport { PageResolver } from './page-resolver';\nimport { PageService } from './page.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PageResolverService implements Resolve<PageResolver> {\n\n\tpublic events$: BehaviorSubject<PageResolver> = new BehaviorSubject<PageResolver>(null);\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tprivate pageService: PageService,\n\t\tprivate routeService: RouteService,\n\t) { }\n\n\tpageToPageResolver(page: Page): PageResolver {\n\t\tconst pageResolver = new PageResolver(this.configService, page);\n\t\tthis.events$.next(pageResolver);\n\t\treturn pageResolver;\n\t}\n\n\tresolve(route: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<PageResolver> {\n\t\tif (route.params && route.params.id) {\n\t\t\treturn this.getPageById(route.params.id);\n\t\t} else {\n\t\t\tconst paths = route.url.filter(x => {\n\t\t\t\treturn x.path;\n\t\t\t}).map(x => {\n\t\t\t\treturn x.path;\n\t\t\t});\n\t\t\tconst slug = this.routeService.toSlug(paths).join('/');\n\t\t\treturn this.getPageBySlug(slug);\n\t\t}\n\t}\n\n\tgetPageById(id: number | string): Observable<PageResolver> {\n\t\t// console.log('PageResolverService.getPageById', id);\n\t\treturn this.pageService.getPageById(id).pipe(\n\t\t\tmap(page => this.pageToPageResolver(page))\n\t\t);\n\t}\n\n\tgetPageBySlug(slug: string): Observable<PageResolver> {\n\t\t// console.log('PageResolverService.getPageBySlug', slug);\n\t\treturn this.pageService.getStatePageBySlug(slug).pipe(\n\t\t\tmap(page => this.pageToPageResolver(page))\n\t\t);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanDeactivate, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class PageGuard implements CanActivate, CanDeactivate<any> {\n\n\tprivate match(route: ActivatedRouteSnapshot): boolean {\n\t\tconst lastPath = route.url.length ? route.url[route.url.length - 1].path : '';\n\t\tconst pattern = /\\.([0-9a-z]+)(?:[\\?#]|$)/i;\n\t\tconst match = (lastPath).match(pattern);\n\t\tif (match !== null) {\n\t\t\treturn false;\n\t\t} else {\n\t\t\treturn true;\n\t\t}\n\t}\n\n\tcanActivate(\n\t\troute: ActivatedRouteSnapshot,\n\t\tstate: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(route);\n\t}\n\n\tcanDeactivate(\n\t\tcomponent: any,\n\t\tcurrentRoute: ActivatedRouteSnapshot,\n\t\tcurrentState: RouterStateSnapshot,\n\t\tnextState?: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(currentRoute);\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { ActivatedRouteSnapshot, CanActivate, CanDeactivate, RouterStateSnapshot } from '@angular/router';\nimport { Observable } from 'rxjs';\n\n@Injectable()\nexport class StaticGuard implements CanActivate, CanDeactivate<any> {\n\n\tprivate match(route: ActivatedRouteSnapshot): boolean {\n\t\tconst lastPath = route.url[route.url.length - 1].path;\n\t\t// console.log('StaticGuard.CanActivate', e, lastPath);\n\t\tconst pattern = /\\.([0-9a-z]+)(?:[\\?#]|$)/i;\n\t\tconst match = (lastPath).match(pattern);\n\t\tif (match !== null) {\n\t\t\treturn true;\n\t\t} else {\n\t\t\treturn false;\n\t\t}\n\t}\n\n\tcanActivate(\n\t\troute: ActivatedRouteSnapshot,\n\t\tstate: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(route);\n\t}\n\n\tcanDeactivate(\n\t\tcomponent: any,\n\t\tcurrentRoute: ActivatedRouteSnapshot,\n\t\tcurrentState: RouterStateSnapshot,\n\t\tnextState?: RouterStateSnapshot\n\t): Observable<boolean> | Promise<boolean> | boolean {\n\t\treturn this.match(currentRoute);\n\t}\n\n}\n","import { NgModule } from '@angular/core';\nimport { RouterModule, Routes } from '@angular/router';\nimport { PageNotFoundComponent } from './pages/page-not-found.component';\nimport { PageOutletComponent } from './pages/page-outlet.component';\nimport { PageResolverService } from './pages/page-resolver.service';\nimport { PageGuard } from './pages/page.guard';\nimport { StaticGuard } from './pages/static.guard';\n\nconst routes: Routes = [\n\t{ path: 'page/:id', component: PageOutletComponent, resolve: { pageResolver: PageResolverService } },\n\t{ path: '**', component: PageOutletComponent, resolve: { pageResolver: PageResolverService }, canActivate: [PageGuard] },\n\t{ path: '**', component: PageNotFoundComponent, canActivate: [StaticGuard] },\n];\n\n@NgModule({\n\timports: [\n\t\tRouterModule.forChild(routes),\n\t],\n\texports: [\n\t\tRouterModule,\n\t],\n})\n\nexport class CoreRouting { }\n","export class ControlBaseOptions<T> {\n\tvalue?: T;\n\tkey?: string;\n\tlabel?: string;\n\tplaceholder?: string;\n\t// order\n\torder?: number;\n\tschema?: string;\n\ttype?: string;\n\t// validators\n\tmin?: number;\n\tmax?: number;\n\trequired?: boolean;\n\trequiredTrue?: boolean;\n\temail?: boolean;\n\tminLength?: number;\n\tmaxLength?: number;\n\tpattern?: string | RegExp;\n\tmatch?: string;\n\t// options\n\treverse?: boolean;\n\toptions?: { key: string, value: string }[];\n\t// state\n\tdisabled?: boolean;\n\t// formatters\n\tstep?: number;\n\tformat?: string;\n}\n\nexport class ControlBase<T> {\n\t// export class ControlBase<T> implements ControlValueAccessor {\n\n\tstatic uid: number = 0;\n\n\tprivate _originalValue: T;\n\tvalue: T;\n\tkey: string;\n\t//\n\tlabel: string;\n\tplaceholder: string;\n\t// order\n\torder: number;\n\tschema: string;\n\ttype: string;\n\t// validators\n\tmin: number;\n\tmax: number;\n\trequired: boolean;\n\trequiredTrue: boolean;\n\temail: boolean;\n\tminLength: number;\n\tmaxLength: number;\n\tpattern: string | RegExp;\n\tmatch: string;\n\t// options\n\treverse: boolean;\n\toptions: { key: string, value: string }[];\n\t// state\n\tdisabled: boolean;\n\t// formatters\n\tstep: number;\n\tformat: string;\n\n\tconstructor(options: ControlBaseOptions<T> = {}) {\n\t\tthis._originalValue = options.value;\n\t\tthis.value = options.value;\n\t\tthis.key = options.key;\n\t\t//\n\t\tconst name = `${options.key || 'Control'} ${++ControlBase.uid}`;\n\t\tthis.label = options.label || name;\n\t\tthis.placeholder = options.placeholder || name;\n\t\t// order\n\t\tthis.order = options.order === undefined ? 1 : options.order;\n\t\tthis.schema = options.schema || 'text';\n\t\tthis.type = options.type || this.schema;\n\t\t// validators\n\t\tthis.min = options.min || null;\n\t\tthis.max = options.max || null;\n\t\tthis.required = !!options.required;\n\t\tthis.requiredTrue = !!options.requiredTrue;\n\t\tthis.email = !!options.email;\n\t\tthis.minLength = options.minLength || null;\n\t\tthis.maxLength = options.maxLength || null;\n\t\tthis.pattern = options.pattern || null;\n\t\tthis.match = options.match || null;\n\t\t// options\n\t\tthis.reverse = !!options.reverse;\n\t\tthis.options = options.options || [];\n\t\t// state\n\t\tthis.disabled = !!options.disabled;\n\t\t// formatters\n\t\tthis.step = options.step || null;\n\t\tthis.format = options.format || null;\n\t}\n\n\t/*\n\t//\n\tcontrol?: FormControl;\n\tinnervalue: any;\n\tblurred: boolean = false;\n\n\tfocus(): void {\n\t\t// console.log('ControlBase.focus', this.control.value);\n\t\tthis.blurred = false;\n\t\tif (this.innervalue) {\n\t\t\tthis.control.patchValue(this.innervalue, { emitEvent: false });\n\t\t}\n\t}\n\n\tblur(): void {\n\t\t// console.log('ControlBase.blur', this.control.value);\n\t\tthis.blurred = true;\n\t\tif (this.innervalue) {\n\t\t\tthis.control.patchValue(this.innervalue + ' H', { emitEvent: false });\n\t\t}\n\t}\n\n\tsetControl(control: FormControl): void {\n\t\tthis.control = control;\n\t\tthis.innervalue = control.value;\n\t\tcontrol.valueChanges.subscribe(value => {\n\t\t\t// console.log('ControlBase.control.valueChanges', value);\n\t\t\tif (this.blurred) {\n\t\t\t\tcontrol.patchValue(value + ' H', { emitEvent: false });\n\t\t\t} else {\n\t\t\t\tthis.innervalue = value;\n\t\t\t}\n\t\t});\n\t\t// this.blur();\n\t}\n\n\tformatValue(): string {\n\t\t// console.log('ControlBase.formatValue', this, this.control);\n\t\treturn 'aaa';\n\t}\n\n\tparseValue(e: Event) {\n\t\t// console.log('ControlBase.parseValue', e);\n\t}\n\n\tprivate onChange = (value: any) => { };\n\n\tprivate onTouched = () => { };\n\n\twriteValue(value: any): void {\n\t\t// console.log('ControlBase.writeValue', value);\n\t\t// this.formattedValue = value;\n\t\tthis.onChange(this.value);\n\t}\n\n\tregisterOnChange(fn: (value: any) => void): void {\n\t\t// console.log('ControlBase.registerOnChange', fn);\n\t\tthis.onChange = fn;\n\t\t// this.onChange('my new value');\n\t}\n\n\tregisterOnTouched(fn: () => void): void {\n\t\t// console.log('ControlBase.registerOnTouched', fn);\n\t\tthis.onTouched = fn;\n\t}\n\n\tsetDisabledState?(isDisabled: boolean): void {\n\t\t// console.log('ControlBase.setDisabledState', isDisabled);\n\t\tthis.disabled = isDisabled;\n\t}\n\t*/\n\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlCheckbox extends ControlBase<boolean> {\n\n\tschema = 'checkbox';\n\n\tconstructor(options: ControlBaseOptions<boolean> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlEmail extends ControlBase<string> {\n\n\tschema = 'email';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t\tthis.email = true;\n\t\tthis.pattern = options.pattern || '[a-zA-Z0-9.-_]{1,}@[a-zA-Z.-]{2,}[.]{1}[a-zA-Z]{2,}';\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlMarkdown extends ControlBase<string> {\n\n\tschema = 'markdown';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlNumber extends ControlBase<string> {\n\n\tschema = 'number';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlPassword extends ControlBase<string> {\n\n\tschema = 'password';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlRadio extends ControlBase<boolean> {\n\n\tschema = 'radio';\n\n\tconstructor(options: ControlBaseOptions<boolean> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlSelect extends ControlBase<string> {\n\n\tschema = 'select';\n\toptions: { key: string, value: string }[] = [];\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.options = options.options || [];\n\t}\n}\n","import { ControlBase, ControlBaseOptions } from './control-base';\n\nexport class ControlText extends ControlBase<string> {\n\n\tschema = 'text';\n\n\tconstructor(options: ControlBaseOptions<string> = {}) {\n\t\tsuper(options);\n\t\tthis.type = options.type || this.type;\n\t}\n}\n","import { FormControl, FormGroup, ValidatorFn } from '@angular/forms';\n\nexport function __matchValidator(key: string, otherKey: string, group: FormGroup): ValidatorFn {\n\treturn (control: FormControl) => {\n\n\t\t// const control = group.controls[key];\n\t\tconst otherControl = group.controls[otherKey];\n\n\t\t// console.log(control.touched, otherControl.touched);\n\n\t\tif (control.touched && otherControl.touched) {\n\t\t\tconst match = control.value === otherControl.value;\n\t\t\tif (!match && control.valid && otherControl.valid) {\n\t\t\t\tcontrol.setErrors({\n\t\t\t\t\tmatch: otherKey\n\t\t\t\t});\n\t\t\t\treturn {\n\t\t\t\t\tmatch: otherKey + ' != ' + key\n\t\t\t\t};\n\t\t\t}\n\t\t\tif (match && control.hasError('match')) {\n\t\t\t\tcontrol.setErrors(null);\n\t\t\t}\n\t\t}\n\n\t\treturn null;\n\t};\n}\n\nexport function matchValidator(otherKey: string, reverse: boolean = false, group: FormGroup): ValidatorFn {\n\treturn (control: FormControl) => {\n\t\tconst otherControl = group.controls[otherKey];\n\n\t\tconst value = control.value;\n\n\t\t// value not equal\n\t\tif (otherControl && value !== otherControl.value && !reverse) {\n\t\t\treturn {\n\t\t\t\tmatch: true,\n\t\t\t};\n\t\t}\n\n\t\t// value equal and reverse\n\t\tif (otherControl && value === otherControl.value && reverse) {\n\t\t\tif (otherControl.errors) {\n\t\t\t\tdelete otherControl.errors['match'];\n\t\t\t\tif (!Object.keys(otherControl.errors).length) {\n\t\t\t\t\totherControl.setErrors(null);\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\t// value not equal and reverse\n\t\tif (otherControl && value !== otherControl.value && reverse) {\n\t\t\totherControl.setErrors({\n\t\t\t\tmatch: true,\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t};\n}\n\n/*\nvalidate(control: AbstractControl): { [key: string]: any } {\n\t\t// self value\n\t\tconst value = control.value;\n\n\t\t// control value\n\t\tconst input = control.root.get(this.match);\n\n\t\t// value not equal\n\t\tif (input && value !== input.value && !this.isReverse) {\n\t\t\treturn {\n\t\t\t\tmatch: true,\n\t\t\t};\n\t\t}\n\n\t\t// value equal and reverse\n\t\tif (input && value === input.value && this.isReverse) {\n\t\t\tdelete input.errors['match'];\n\t\t\tif (!Object.keys(input.errors).length) {\n\t\t\t\tinput.setErrors(null);\n\t\t\t}\n\t\t}\n\t\t// value not equal and reverse\n\t\tif (input && value !== input.value && this.isReverse) {\n\t\t\tinput.setErrors({\n\t\t\t\tmatch: true,\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n*/\n/*\nstatic isValidString(control: FormControl) {\n\tif (!control.value || typeof control.value !== 'string') {\n\t\treturn {isNotValidString: true};\n\t}\n\treturn null;\n}\n\nstatic isValidName(control: FormControl) {\n\tif (control.valid && control.value !== 'John Doe') {\n\t\treturn {isNotValidName: true};\n\t}\n\treturn null;\n}\n*/\n","import { Injectable } from '@angular/core';\nimport { FormControl, FormGroup, ValidatorFn, Validators } from '@angular/forms';\nimport { ControlBase } from './control-base';\nimport { matchValidator } from './match.validator';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ControlService {\n\n\tgetValidators(control: ControlBase<any>, group: FormGroup): ValidatorFn[] {\n\t\tconst validators: ValidatorFn[] = [];\n\t\tif (control.min) {\n\t\t\tvalidators.push(Validators.min(control.min));\n\t\t}\n\t\tif (control.max) {\n\t\t\tvalidators.push(Validators.max(control.max));\n\t\t}\n\t\tif (control.required) {\n\t\t\tvalidators.push(Validators.required);\n\t\t}\n\t\tif (control.requiredTrue) {\n\t\t\tvalidators.push(Validators.requiredTrue);\n\t\t}\n\t\tif (control.email) {\n\t\t\tvalidators.push(Validators.email);\n\t\t}\n\t\tif (control.minLength) {\n\t\t\tvalidators.push(Validators.minLength(control.minLength));\n\t\t}\n\t\tif (control.maxLength) {\n\t\t\tvalidators.push(Validators.maxLength(control.maxLength));\n\t\t}\n\t\tif (control.pattern) {\n\t\t\tvalidators.push(Validators.pattern(control.pattern));\n\t\t}\n\t\tif (control.match) {\n\t\t\tvalidators.push(matchValidator(control.match, control.reverse, group));\n\t\t}\n\t\t// console.log(control.key, validators);\n\t\treturn validators;\n\t}\n\n\ttoFormGroup(controls: ControlBase<any>[]): FormGroup {\n\t\tconst options: any = {};\n\t\tcontrols.forEach(x => {\n\t\t\t// group[x.key] = new FormControl(x.value, this.getValidators(x, group));\n\t\t\tconst formControl: FormControl = new FormControl(x.value);\n\t\t\tif (x.disabled) {\n\t\t\t\tformControl.disable();\n\t\t\t}\n\t\t\toptions[x.key] = formControl;\n\t\t\t// x.setControl(formControl); // !!!\n\t\t});\n\t\tconst group: FormGroup = new FormGroup(options);\n\t\t// console.log(group);\n\t\tcontrols.forEach(x => {\n\t\t\tconst validators = this.getValidators(x, group);\n\t\t\t// console.log(validators);\n\t\t\tgroup.controls[x.key].setValidators(validators);\n\t\t});\n\t\treturn group;\n\t}\n\n}\n","import { Injectable } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { ControlBase, ControlBaseOptions } from './controls/control-base';\nimport { ControlCheckbox } from './controls/control-checkbox';\nimport { ControlEmail } from './controls/control-email';\nimport { ControlMarkdown } from './controls/control-markdown';\nimport { ControlNumber } from './controls/control-number';\nimport { ControlPassword } from './controls/control-password';\nimport { ControlRadio } from './controls/control-radio';\nimport { ControlSelect } from './controls/control-select';\nimport { ControlText } from './controls/control-text';\nimport { ControlService } from './controls/control.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class FormService {\n\n\tconstructor(\n\t\tprivate controlService: ControlService\n\t) { }\n\n\tgetControlsFromOptions(options: ControlBaseOptions<any>[]): ControlBase<any>[] {\n\t\tconst controls: ControlBase<any>[] = options.map(o => {\n\t\t\tswitch (o.schema) {\n\t\t\t\tcase 'checkbox':\n\t\t\t\t\treturn new ControlCheckbox(o);\n\t\t\t\tcase 'email':\n\t\t\t\t\treturn new ControlEmail(o);\n\t\t\t\tcase 'number':\n\t\t\t\t\treturn new ControlNumber(o);\n\t\t\t\tcase 'password':\n\t\t\t\t\treturn new ControlPassword(o);\n\t\t\t\tcase 'radio':\n\t\t\t\t\treturn new ControlRadio(o);\n\t\t\t\tcase 'select':\n\t\t\t\t\treturn new ControlSelect(o);\n\t\t\t\tcase 'markdown':\n\t\t\t\t\treturn new ControlMarkdown(o);\n\t\t\t\tcase 'text':\n\t\t\t\t\treturn new ControlText(o);\n\t\t\t\tdefault:\n\t\t\t\t\treturn new ControlText(o);\n\t\t\t}\n\t\t});\n\t\tcontrols.sort((a, b) => a.order - b.order);\n\t\treturn controls;\n\t}\n\n\tgetGroupFromOptions(options: ControlBaseOptions<any>[]): FormGroup {\n\t\tconst controls: ControlBase<any>[] = this.getControlsFromOptions(options);\n\t\tconst group = this.controlService.toFormGroup(controls);\n\t\treturn group;\n\t}\n\n\tgetGroupFromControls(controls: ControlBase<any>[]): FormGroup {\n\t\tconst group = this.controlService.toFormGroup(controls);\n\t\treturn group;\n\t}\n\n}\n","import { animate, state, style, transition, trigger } from '@angular/animations';\nimport { isPlatformBrowser } from '@angular/common';\nimport { AfterViewInit, Component, HostListener, Inject, PLATFORM_ID, ViewEncapsulation } from '@angular/core';\nimport { FormGroup } from '@angular/forms';\nimport { MarkdownService } from 'ngx-markdown';\nimport { takeUntil } from 'rxjs/operators';\nimport { ConfigService } from '../config/config.service';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { ControlBase, ControlBaseOptions } from '../forms/controls/control-base';\nimport { FormService } from '../forms/form.service';\nimport { Page } from '../pages/page';\nimport { PageResolver } from '../pages/page-resolver';\nimport { PageResolverService } from '../pages/page-resolver.service';\n\n@Component({\n\tselector: 'ws-editor',\n\ttemplateUrl: './editor.component.html',\n\tstyleUrls: ['./editor.component.scss'],\n\tanimations: [\n\t\ttrigger('openClose', [\n\t\t\tstate('open', style({\n\t\t\t\topacity: 1,\n\t\t\t\ttransform: 'translateX(0)',\n\t\t\t})),\n\t\t\tstate('closed', style({\n\t\t\t\topacity: 0.5,\n\t\t\t\ttransform: 'translateX(100%)',\n\t\t\t})),\n\t\t\ttransition('open => closed', [\n\t\t\t\tanimate('250ms')\n\t\t\t]),\n\t\t\ttransition('closed => open', [\n\t\t\t\tanimate('150ms')\n\t\t\t]),\n\t\t]),\n\t],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class EditorComponent extends DisposableComponent implements AfterViewInit {\n\n\tprivate _pageCopy: Page;\n\tprivate _page: Page;\n\n\tcontrols: ControlBase<any>[];\n\tgroup: FormGroup;\n\n\tediting: boolean = false;\n\tbusy: boolean = false;\n\tsubmitted: boolean = false;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate markdownService: MarkdownService,\n\t\tprivate formService: FormService,\n\t\tprivate pageResolverService: PageResolverService,\n\t) {\n\t\tsuper();\n\t}\n\n\tget page(): Page {\n\t\treturn this._page;\n\t}\n\n\tset page(page: Page) {\n\t\tthis._pageCopy = Object.assign({}, page);\n\t\tthis._page = page;\n\t\tif (this._page) {\n\t\t\tthis.controls = this.formService.getControlsFromOptions(this.getControlsByPage(page));\n\t\t\tthis.group = this.formService.getGroupFromControls(this.controls);\n\t\t\tthis.group.valueChanges.subscribe(x => {\n\t\t\t\tthis.onAssign(x); // Object.assign(this._page, x);\n\t\t\t});\n\t\t} else {\n\t\t\tthis.controls = [];\n\t\t\tthis.group = null;\n\t\t}\n\t}\n\n\tget componentName(): string {\n\t\tif (this._page) {\n\t\t\tconst component = this.configService.options.pages[this._page.component];\n\t\t\tif (component) {\n\t\t\t\treturn component.name;\n\t\t\t}\n\t\t}\n\t}\n\n\tgetControlsByPage(page: Page): ControlBaseOptions<any>[] {\n\t\treturn page ? Object.keys(page).filter(key => typeof page[key] !== 'object').map((key: string, i: number) => {\n\t\t\treturn {\n\t\t\t\tkey: key,\n\t\t\t\tvalue: page[key],\n\t\t\t\tschema: key === 'description' ? 'markdown' : 'text',\n\t\t\t\tlabel: key,\n\t\t\t\tplaceholder: key,\n\t\t\t\trequired: false,\n\t\t\t\torder: i + 1\n\t\t\t};\n\t\t}) : [];\n\t}\n\n\tngAfterViewInit() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tthis.pageResolverService.events$.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe)\n\t\t\t).subscribe((resolver: PageResolver) => {\n\t\t\t\t// console.log('EditorComponent.resolver', resolver);\n\t\t\t\tthis.page = resolver ? resolver.page : null;\n\t\t\t});\n\t\t}\n\t}\n\n\t@HostListener('document:keydown', ['$event'])\n\tonKeydown(e: KeyboardEvent) {\n\t\tif (e.key === 'e' && e.ctrlKey) {\n\t\t\t// this.editing = this.configService.options.editor && !this.editing;\n\t\t\tthis.editing = !this.editing;\n\t\t\t// console.log('AppComponent.document:keydown', e.key, e.ctrlKey, e.altKey, e.code);\n\t\t}\n\t}\n\n\tonReset() {\n\t\t// console.log('EditorComponent.onReset');\n\t\tObject.keys(this.group.controls).forEach(key => {\n\t\t\tthis.group.get(key).setValue(this._pageCopy[key]);\n\t\t});\n\t\t/*\n\t\tconst keys = this.controls.map(x => x.key);\n\t\tkeys.forEach(k => {\n\t\t\t// console.log(k, this._page[k], this._pageCopy[k]);\n\t\t\tthis._page[k] = this._pageCopy[k];\n\t\t});\n\t\t*/\n\t}\n\n\tonSubmit(model) {\n\t\t// console.log('EditorComponent.onSubmit', model);\n\t\tthis.onAssign(model);\n\t\t// Object.assign(this._page, model);\n\t}\n\n\tonAssign(model) {\n\t\tObject.keys(this.group.controls).forEach(key => {\n\t\t\tswitch (key) {\n\t\t\t\tcase 'description':\n\t\t\t\t\tthis._page[key] = this.markdownService.compile(model[key]);\n\t\t\t\t\tbreak;\n\t\t\t\tdefault:\n\t\t\t\t\tthis._page[key] = model[key];\n\t\t\t}\n\t\t});\n\t}\n\n}\n","import { Component, forwardRef, Input, Renderer2 } from '@angular/core';\nimport { AbstractControl, ControlValueAccessor, FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';\nimport { ControlBase } from './control-base';\n\n@Component({\n\tselector: 'ws-control',\n\ttemplateUrl: './control.component.html',\n\tstyleUrls: ['./control.component.scss'],\n\tproviders: [{\n\t\tprovide: NG_VALUE_ACCESSOR,\n\t\tuseExisting: forwardRef(() => ControlComponent),\n\t\tmulti: true,\n\t}],\n})\nexport class ControlComponent implements ControlValueAccessor {\n\t@Input() control: ControlBase<any>;\n\t@Input() form: FormGroup;\n\n\tprivate element: any;\n\tprivate blurred: boolean;\n\tprivate innervalue: any;\n\n\treveal: { checked: boolean } = { checked: false };\n\n\tconstructor(\n\t\tprivate renderer: Renderer2\n\t) { }\n\n\tget controlRef(): AbstractControl {\n\t\t// console.log('controlRef', this.control.key, this.form.controls);\n\t\treturn this.form.controls[this.control.key];\n\t}\n\n\tget isValid() { return this.controlRef.valid; }\n\n\t// ControlValueAccessor\n\n\tgetFormattedValue(): any {\n\t\t// console.log('ControlComponent.getFormattedValue', this.controlRef.value);\n\t\treturn this.controlRef.value;\n\t}\n\n\tonInput($event): void {\n\t\tthis.element = $event.target;\n\t\tthis.onChange(this.element.value);\n\t}\n\n\tonFocus($event): void {\n\t\tthis.blurred = false;\n\t\tthis.element = $event.target;\n\t\t// this.element.value = this.controlRef.value;\n\t\tthis.renderer.setProperty(this.element, 'value', this.controlRef.value);\n\t\t// console.log('ControlComponent.onFocus', this.controlRef);\n\t}\n\n\tonBlur($event): void {\n\t\tthis.blurred = true;\n\t\tthis.element = $event.target;\n\t\t// this.element.value = this.controlRef.value;\n\t\tthis.renderer.setProperty(this.element, 'value', this.controlRef.value);\n\t\t// console.log('ControlComponent.onBlur', this.controlRef);\n\t\t/*\n\t\tif (this.innervalue) {\n\t\t\tthis.control.patchValue(this.innervalue + ' H', { emitEvent: false });\n\t\t}\n\t\t*/\n\t}\n\n\tprivate onChange = (value: any) => { };\n\n\tprivate onTouched = () => { };\n\n\tprivate formatValue(value: any): void {\n\t\t// console.log('ControlComponent.formatValue', value);\n\t\tthis.renderer.setProperty(this.element, 'value', value);\n\t\t// console.log('ControlEditableComponent.writeValue', value);\n\t}\n\n\tprivate parseValue(value: any) {\n\t\t// console.log('ControlComponent.parseValue', value);\n\t\tconst parsed = this.innervalue;\n\t\tthis.onChange(parsed);\n\t}\n\n\twriteValue(value: any): void {\n\t\tthis.formatValue(value);\n\t}\n\n\tregisterOnChange(fn: any): void {\n\t\tthis.onChange = fn;\n\t\t// console.log('ControlEditableComponent.registerOnChange');\n\t}\n\n\tregisterOnTouched(fn: any): void {\n\t\tthis.onTouched = fn;\n\t\t// console.log('ControlEditableComponent.registerOnTouched');\n\t}\n\n\tsetDisabledState(isDisabled: boolean): void {\n\t\t// const node = this.textarea.nativeElement;\n\t\t/*\n\t\tif (isDisabled) {\n\t\t\tthis.renderer.addClass(this.element, 'disabled');\n\t\t} else {\n\t\t\tthis.renderer.removeClass(this.element, 'disabled');\n\t\t}\n\t\t// console.log('ControlEditableComponent.setDisabledState', isDisabled);\n\t\t*/\n\t}\n\n}\n","import { Directive, forwardRef, Input } from '@angular/core';\nimport { AbstractControl, AsyncValidator, NG_ASYNC_VALIDATORS, ValidationErrors } from '@angular/forms';\nimport { BehaviorSubject, Observable, of } from 'rxjs';\nimport { catchError, debounceTime, switchMap, take } from 'rxjs/operators';\n\nconst DEBOUNCE_TIME: number = 250;\n\n@Directive({\n\tselector: '[exists][formControlName],[exists][formControl],[exists][ngModel]',\n\tproviders: [\n\t\t{ provide: NG_ASYNC_VALIDATORS, useExisting: forwardRef(() => ExistsValidator), multi: true },\n\t]\n})\nexport class ExistsValidator implements AsyncValidator {\n\n\tprivate values = new BehaviorSubject<string>(null);\n\tset value(value: string) {\n\t\tif (value && value.trim() !== '') {\n\t\t\tthis.values.next(value);\n\t\t}\n\t}\n\tprivate debounced$: Observable<ValidationErrors | null> = this.values.pipe(\n\t\tdebounceTime(DEBOUNCE_TIME),\n\t\tswitchMap((value: string) => {\n\t\t\t// console.log('ExistsValidator.debounced$', value);\n\t\t\treturn this.exists$(value);\n\t\t}),\n\t\tcatchError((response) => {\n\t\t\tconsole.log('ExistsValidator.debounced$.catchError', response);\n\t\t\treturn of(null);\n\t\t}),\n\t\ttake(1),\n\t);\n\n\t@Input() exists: Function;\n\n\texists$(value: string): Observable<ValidationErrors | null> {\n\t\tif (typeof this.exists === 'function') {\n\t\t\t// console.log('ExistsValidator.exists$', value);\n\t\t\treturn this.exists(value).pipe(\n\t\t\t\tswitchMap(exists => {\n\t\t\t\t\tif (exists) {\n\t\t\t\t\t\treturn of({\n\t\t\t\t\t\t\texists: true,\n\t\t\t\t\t\t});\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn of(null);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t);\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\tvalidate(control: AbstractControl): Promise<ValidationErrors | null> | Observable<ValidationErrors | null> {\n\t\tthis.value = control.value;\n\t\treturn this.debounced$;\n\t}\n\n}\n","import { Attribute, Directive, forwardRef } from '@angular/core';\nimport { AbstractControl, NG_VALIDATORS, Validator } from '@angular/forms';\n\n@Directive({\n\tselector: '[match][formControlName],[match][formControl],[match][ngModel]',\n\tproviders: [\n\t\t{ provide: NG_VALIDATORS, useExisting: forwardRef(() => MatchValidator), multi: true }\n\t]\n})\nexport class MatchValidator implements Validator {\n\n\tconstructor(\n\t\t@Attribute('match') public match: string,\n\t\t@Attribute('reverse') public reverse: string\n\t) { }\n\n\tprivate get isReverse() {\n\t\tif (!this.reverse) {\n\t\t\treturn false;\n\t\t}\n\t\treturn this.reverse === 'true' ? true : false;\n\t}\n\n\tvalidate(control: AbstractControl): { [key: string]: any } {\n\t\t// self value\n\t\tconst value = control.value;\n\n\t\t// control value\n\t\tconst input = control.root.get(this.match);\n\n\t\t// value not equal\n\t\tif (input && value !== input.value && !this.isReverse) {\n\t\t\treturn {\n\t\t\t\tmatch: true,\n\t\t\t};\n\t\t}\n\n\t\t// value equal and reverse\n\t\tif (input && value === input.value && this.isReverse) {\n\t\t\tdelete input.errors['match'];\n\t\t\tif (!Object.keys(input.errors).length) {\n\t\t\t\tinput.setErrors(null);\n\t\t\t}\n\t\t}\n\t\t// value not equal and reverse\n\t\tif (input && value !== input.value && this.isReverse) {\n\t\t\tinput.setErrors({\n\t\t\t\tmatch: true,\n\t\t\t});\n\t\t}\n\n\t\treturn null;\n\t}\n\n}\n","import { Directive, EventEmitter, HostListener, Output } from '@angular/core';\n\n@Directive({\n\tselector: '[ngModel][uppercase]'\n})\nexport class UppercaseDirective {\n\t@Output() ngModelChange: EventEmitter<any> = new EventEmitter();\n\tvalue: any;\n\n\t@HostListener('input', ['$event']) onInputChange($event) {\n\t\tthis.value = $event.target.value.toUpperCase();\n\t\tthis.ngModelChange.emit(this.value);\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\n\n@Pipe({\n\tname: 'highlight',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HighlightPipe implements PipeTransform {\n\n\ttransform(text: string, query: string): string {\n\t\tif (!query) {\n\t\t\treturn text;\n\t\t}\n\t\ttext = this.encodeHTML(text);\n\t\tquery = this.encodeHTML(query);\n\t\tconst regExp = new RegExp('&[^;]+;|' + this.escapeRegexChars(query), 'gi');\n\t\treturn text.replace(regExp, function (match) {\n\t\t\treturn match.toLowerCase() === query.toLowerCase() ? '<strong>' + match + '</strong>' : match;\n\t\t});\n\t}\n\n\tescapeRegexChars(text: string) {\n\t\treturn text.replace(/([.?*+^$[\\]\\\\(){}|-])/g, '\\\\$1');\n\t}\n\n\tsafeToString(text: string) {\n\t\treturn text === undefined || text === null ? '' : text.toString().trim();\n\t}\n\n\tencodeHTML(text: string) {\n\t\treturn this.safeToString(text)\n\t\t\t.replace(/&/g, '&amp;')\n\t\t\t.replace(/</g, '&lt;')\n\t\t\t.replace(/>/g, '&gt;');\n\t}\n\n}\n","\nimport { HttpErrorResponse, HttpEvent, HttpHandler, HttpInterceptor, HttpRequest } from '@angular/common/http';\nimport { Injectable, Injector } from '@angular/core';\nimport { Router } from '@angular/router';\nimport { Observable, throwError } from 'rxjs';\nimport { catchError, tap } from 'rxjs/operators';\nimport { Logger } from '../logger/logger';\nimport { RouteService } from '../routes/route.service';\nimport { HttpStatusCodeService } from './http-status-code.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class HttpResponseInterceptor implements HttpInterceptor {\n\n\tprivate _logger: Logger;\n\tget logger() {\n\t\tif (!this._logger) {\n\t\t\tthis._logger = this.injector.get(Logger);\n\t\t}\n\t\treturn this._logger;\n\t}\n\n\tprivate _router: Router;\n\tget router() {\n\t\tif (!this._router) {\n\t\t\tthis._router = this.injector.get(Router);\n\t\t}\n\t\treturn this._router;\n\t}\n\n\tprivate _routeService: RouteService;\n\tget routeService() {\n\t\tif (!this._routeService) {\n\t\t\tthis._routeService = this.injector.get(RouteService);\n\t\t}\n\t\treturn this.routeService;\n\t}\n\n\tconstructor(\n\t\tprivate injector: Injector,\n\t\tprivate statusCodeService: HttpStatusCodeService,\n\t) { }\n\n\tintercept(request: HttpRequest<any>, next: HttpHandler): Observable<HttpEvent<any>> {\n\t\t// injecting request\n\t\t// parsing response\n\t\treturn next.handle(request).pipe(\n\t\t\ttap((event: HttpEvent<any>) => {\n\t\t\t\t// console.log('HttpResponseInterceptor', event);\n\t\t\t\tthis.logger.httpError = null;\n\t\t\t\t// this.logger.log(event);\n\t\t\t\t/*\n\t\t\t\tif (event instanceof HttpResponse) {\n\t\t\t\t\t// console.log('event instanceof HttpResponse');\n\t\t\t\t\t// do stuff with response if you want\n\t\t\t\t}\n\t\t\t\t*/\n\t\t\t}),\n\t\t\tcatchError((error: any) => {\n\t\t\t\t// console.warn('HttpResponseInterceptor', error);\n\t\t\t\tif (error instanceof HttpErrorResponse) {\n\t\t\t\t\t// this.statusCodeService.setStatusCode(error.status);\n\t\t\t\t\tswitch (error.status) {\n\t\t\t\t\t\tcase 401:\n\t\t\t\t\t\t\t// unauthorized\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 404:\n\t\t\t\t\t\t\t// not found\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 409:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tcase 410:\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\tdefault:\n\t\t\t\t\t\t\tthis.logger.http(error);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn throwError(error);\n\t\t\t})\n\t\t);\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Component, ElementRef, Inject, Input, OnChanges, PLATFORM_ID, ViewChild, ViewEncapsulation } from '@angular/core';\nimport { isArray, isObject } from 'util';\n// import JSONFormatter from 'json-formatter-js';\n\n@Component({\n\tselector: 'json-formatter',\n\ttemplate: `<div #jsonFormatter></div>`,\n\tstyleUrls: ['./json-formatter.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class JsonFormatterComponent implements OnChanges {\n\t@ViewChild(`jsonFormatter`) input: ElementRef;\n\n\t@Input() json: Array<any> | Object | any;\n\n\telementRef: ElementRef;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t) { }\n\n\tngOnChanges() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tif (!isObject(this.json) && !isArray(this.json)) {\n\t\t\t\treturn;\n\t\t\t}\n\t\t\t// console.log('JsonFormatterComponent', this.json);\n\t\t\tif (this.elementRef) {\n\t\t\t\tthis.input.nativeElement.removeChild(this.elementRef.nativeElement);\n\t\t\t}\n\t\t\tconst JSONFormatter = require('json-formatter-js').default;\n\t\t\tconst formatter = new JSONFormatter(this.json);\n\t\t\tconst elementRef = formatter.render();\n\t\t\tthis.input.nativeElement.appendChild(elementRef);\n\t\t\tthis.elementRef = new ElementRef(elementRef);\n\t\t}\n\t}\n}\n","import { ChangeDetectorRef, OnDestroy, Pipe, PipeTransform, WrappedValue } from '@angular/core';\nimport { Observable, SubscriptionLike } from 'rxjs';\n\n@Pipe({\n\tname: 'customAsync',\n\tpure: false\n})\nexport class CustomAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate subject: Observable<any> | null = null;\n\tprivate subscription: SubscriptionLike | null = null;\n\tprivate value: any = null;\n\tprivate cachedValue: any = null;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef\n\t) { }\n\n\ttransform(subject: Observable<any> | null | undefined): any {\n\t\treturn this.observableToValue(subject);\n\t}\n\n\tprivate observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (subject !== this.subject) {\n\t\t\tif (this.subject) {\n\t\t\t\tthis.dispose();\n\t\t\t}\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\t// console.log('CustomAsyncPipe.A', value);\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // mark pipe as dirty\n\t\t\t\t});\n\t\t\t\tthis.cachedValue = this.value; // ???\n\t\t\t\treturn this.value;\n\t\t\t}\n\t\t}\n\t\t// console.log('CustomAsyncPipe.B', this.value);\n\t\tif (this.cachedValue !== this.value) {\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn WrappedValue.wrap(this.value); // notify that value has changed\n\t\t}\n\t\treturn this.cachedValue; // return cachedValue\n\t}\n\n\tpublic dispose(): void {\n\t\tif (this.subscription) {\n\t\t\tthis.subscription.unsubscribe();\n\t\t}\n\t\tthis.value = null;\n\t\tthis.cachedValue = null;\n\t\tthis.subscription = null;\n\t\tthis.subject = null;\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.dispose();\n\t}\n\n\tprivate _observableToValue(subject: Observable<any> | null | undefined): any {\n\t\tif (!this.subject) {\n\t\t\tif (subject) {\n\t\t\t\tthis.subject = subject;\n\t\t\t\tthis.subscription = this.subject.subscribe((value: any) => {\n\t\t\t\t\tthis.value = value;\n\t\t\t\t\tthis.changeDetector.markForCheck(); // value has changed\n\t\t\t\t});\n\t\t\t}\n\t\t\tthis.cachedValue = this.value;\n\t\t\treturn this.value;\n\t\t}\n\t\tif (subject !== this.subject) {\n\t\t\tthis.dispose();\n\t\t\treturn this.transform(subject as any);\n\t\t}\n\t\tif (this.value === this.cachedValue) {\n\t\t\treturn this.cachedValue;\n\t\t}\n\t\tthis.cachedValue = this.value;\n\t\treturn WrappedValue.wrap(this.value); // value has changed\n\t}\n\n}\n","import { EventEmitter, Injectable, Injector } from '@angular/core';\nimport { BehaviorSubject, Observable, of, Subject } from 'rxjs';\nimport { catchError, filter, first, map, take, tap } from 'rxjs/operators';\nimport { ApiService } from '../api/api.service';\nimport { Label } from './label';\n\nexport class LabelKey {\n\tid?: string;\n\tvalue?: string;\n\tdefaultValue?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelService<T extends Label> extends ApiService<T> {\n\n\tget collection(): string {\n\t\treturn '/api/label';\n\t}\n\n\tprivate _language: any = new BehaviorSubject({});\n\tpublic readonly language: Observable<any> = this._language.asObservable();\n\tprivate _languages: BehaviorSubject<Array<any>> = new BehaviorSubject([]);\n\tpublic readonly languages: Observable<any[]> = this._languages.asObservable();\n\n\tprivate _lang: string;\n\tpublic get lang(): string {\n\t\treturn this._lang;\n\t}\n\tpublic set lang(lang: string) {\n\t\tif (lang !== this._lang) {\n\t\t\tthis._lang = lang;\n\t\t\tconst language = this._languages.getValue().find(x => x.lang === lang);\n\t\t\tthis._language.next(language);\n\t\t}\n\t}\n\n\tpublic events: EventEmitter<any> = new EventEmitter();\n\tpublic missingHandler?: Function;\n\tpublic cache: {} = {};\n\n\t// !!! new async pipe\n\tprivate collectedKeys: { [key: string]: LabelKey; } = {};\n\t// private cache: { [key: string]: string; } = {};\n\tprivate labels$: Subject<{ [key: string]: string; }> = new Subject();\n\tprivate emitter: EventEmitter<any> = new EventEmitter();\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t\tthis._languages.next(this.config.languages);\n\t\tthis._lang = this.config.defaultLanguage;\n\t\tthis.getTranslation(this.lang).subscribe(x => {\n\t\t\t// console.log(x);\n\t\t});\n\t}\n\n\tpublic getTranslation(lang: string): Observable<{}> {\n\t\tif (!lang || !lang.trim()) {\n\t\t\treturn of(null);\n\t\t}\n\t\tthis.lang = lang;\n\t\tif (this.cache[lang]) {\n\t\t\treturn of(this.cache[lang]);\n\t\t} else {\n\t\t\treturn this.get({ lang }).pipe(\n\t\t\t\ttake(1),\n\t\t\t\tmap((x: Label[]) => {\n\t\t\t\t\tif (x[0]) {\n\t\t\t\t\t\tconst labels = x[0].labels;\n\t\t\t\t\t\tthis.cache[lang] = labels;\n\t\t\t\t\t\tthis.events.emit(labels);\n\t\t\t\t\t\treturn labels;\n\t\t\t\t\t} else {\n\t\t\t\t\t\treturn of(null);\n\t\t\t\t\t}\n\t\t\t\t}),\n\t\t\t\t/*\n\t\t\t\ttap(x => {\n\t\t\t\t\t// this.logger.log(`found label matching \"${lang}\"`);\n\t\t\t\t})\n\t\t\t\t*/\n\t\t\t);\n\t\t}\n\t}\n\n\tpublic getLabel(key: string, defaultValue?: string, params?: any): string | any {\n\t\tlet value: string | null = null;\n\t\tlet labels: any = this.cache[this.lang];\n\t\tif (labels) {\n\t\t\tconst keys: string[] = key.split('.');\n\t\t\tlet k = keys.shift();\n\t\t\twhile (keys.length > 0 && labels[k]) {\n\t\t\t\tlabels = labels[k];\n\t\t\t\tk = keys.shift();\n\t\t\t}\n\t\t\tvalue = labels[k] || `{${k}}`;\n\t\t}\n\t\treturn this.parseLabel(value, key, defaultValue, params);\n\t}\n\n\tprivate parseLabel(value: string | null, key: string, defaultValue?: string, params?: any): string | any {\n\t\tif (value == null) {\n\t\t\tvalue = defaultValue;\n\t\t}\n\t\tif (value == null) {\n\t\t\treturn this.missingLabel(key);\n\t\t} else if (params) {\n\t\t\treturn this.parseParams(value, params);\n\t\t}\n\t\treturn value;\n\t}\n\n\tprivate missingLabel(key: string): string {\n\t\tif (this.missingHandler) {\n\t\t\treturn typeof this.missingHandler === 'function' ?\n\t\t\t\tthis.missingHandler(key) :\n\t\t\t\tthis.missingHandler;\n\t\t}\n\t\treturn key;\n\t}\n\n\tprivate parseParams(value: string, params: any): string {\n\t\tconst TEMPLATE_REGEXP: RegExp = /@\\s?([^{}\\s]*)\\s?/g; // /{{\\s?([^{}\\s]*)\\s?}}/g;\n\t\treturn value.replace(TEMPLATE_REGEXP, (text: string, key: string) => {\n\t\t\tconst replacer: string = params[key] as string;\n\t\t\treturn typeof replacer !== 'undefined' ? replacer : text;\n\t\t});\n\t}\n\n\t//\n\n\tgetKey(key: string, defaultValue?: string, params?: any): Observable<string> {\n\t\tif (this.cache.hasOwnProperty(key)) {\n\t\t\treturn of(this.cache[key]);\n\t\t} else {\n\t\t\tObject.defineProperty(this.collectedKeys, key, {\n\t\t\t\tvalue: { id: key, defaultValue: defaultValue },\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.cache[key] = null;\n\t\t}\n\t\treturn this.labels$.pipe(\n\t\t\tmap(items => items[key] || null),\n\t\t\tfilter(label => label !== null),\n\t\t\t// tap(label => console.log('getKey', key, label)),\n\t\t\tmap(label => this.parseLabel(label, key, defaultValue, params)),\n\t\t);\n\t}\n\n\tregister(): Observable<any> {\n\t\treturn this.emitter.pipe(\n\t\t\t// throttleTime(500),\n\t\t\ttap(() => {\n\t\t\t\tthis.collectKeys().pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t).subscribe((keys) => {\n\t\t\t\t\t// console.log('LabelService.collected', keys);\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tcollect(): void {\n\t\tif (Object.keys(this.collectedKeys).length) {\n\t\t\tthis.emitter.emit();\n\t\t}\n\t}\n\n\tprivate collectKeys(): Observable<{ [key: string]: string; }> {\n\t\tconst keys = Object.keys(this.collectedKeys).map(x => this.collectedKeys[x]);\n\t\tthis.collectedKeys = {};\n\t\tif (keys.length) {\n\t\t\t// console.log('LabelService.collectKeys', JSON.stringify(keys));\n\t\t\treturn this.statePost(`/api/i18n/labels`, keys).pipe(\n\t\t\t\tmap((keys: LabelKey[]) => {\n\t\t\t\t\tconst items = {};\n\t\t\t\t\tkeys.forEach(x => items[x.id] = x.value || x.defaultValue);\n\t\t\t\t\treturn items;\n\t\t\t\t}),\n\t\t\t\ttap((items: { [key: string]: string; }) => {\n\t\t\t\t\tObject.assign(this.cache, items);\n\t\t\t\t\tthis.labels$.next(this.cache);\n\t\t\t\t\t// console.log('collectKeys', this.cache);\n\t\t\t\t}),\n\t\t\t\tcatchError(error => {\n\t\t\t\t\tconsole.log('LabelService.collectKeys.error', error);\n\t\t\t\t\treturn of({});\n\t\t\t\t}),\n\t\t\t);\n\t\t\t/*\n\t\t\treturn this.post(`/api/i18n/labels`, keys).pipe(\n\t\t\t\tmap((keys: LabelKey[]) => {\n\t\t\t\t\tconst items = {};\n\t\t\t\t\tkeys.forEach(x => items[x.id] = x.value || x.defaultValue);\n\t\t\t\t\treturn items;\n\t\t\t\t}),\n\t\t\t\ttap((items: { [key: string]: string; }) => {\n\t\t\t\t\tObject.assign(this.cache, items);\n\t\t\t\t\tthis.labels$.next(this.cache);\n\t\t\t\t\t// console.log('collectKeys', this.cache);\n\t\t\t\t}),\n\t\t\t);\n\t\t\t*/\n\t\t} else {\n\t\t\treturn of({});\n\t\t}\n\t}\n\n}\n\nexport function CustomTranslateLoader(injector: Injector) {\n\treturn new LabelService(injector);\n}\n\n","import { ChangeDetectorRef, Injectable, OnDestroy, Pipe, PipeTransform } from '@angular/core';\nimport { CustomAsyncPipe } from '../pipes/custom-async.pipe';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Pipe({\n\tname: 'labelAsync',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate asyncPipe: CustomAsyncPipe;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef,\n\t\tprivate labelService: LabelService<Label>,\n\t) {\n\t\tthis.asyncPipe = new CustomAsyncPipe(this.changeDetector);\n\t}\n\n\ttransform(key: string, text?: string, params?: any): string {\n\t\treturn this.asyncPipe.transform(this.labelService.getKey(key, text, params));\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.asyncPipe.dispose();\n\t}\n\n}\n","import { Directive, ElementRef, Input, OnInit } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisposableComponent } from '../disposable/disposable.component';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Directive({\n\tselector: '[label]'\n})\nexport class LabelDirective extends DisposableComponent implements OnInit {\n\n\tkey: string;\n\tinnerHTML: string;\n\n\t/*\n\t@Input() set label(key: string) {\n\t\t// console.log('LabelDirective.label', this.key, this.labelParams, this.template, this.view);\n\t}\n\t*/\n\t@Input() label: string;\n\t@Input() labelParams: any;\n\n\tconstructor(\n\t\tprivate element: ElementRef,\n\t\tprivate labelService: LabelService<Label>,\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\t// console.log('LabelDirective.ngOnInit', this.element.nativeElement.innerHTML);\n\t\tthis.labelService.getKey(this.label, this.element.nativeElement.innerHTML, this.labelParams).pipe(\n\t\t\ttakeUntil(this.unsubscribe)\n\t\t).subscribe(label => {\n\t\t\tthis.element.nativeElement.innerHTML = label;\n\t\t\t// console.log('LabelDirective.ngOnInit', label);\n\t\t});\n\t\t// console.log('LabelDirective.ngOnInit', this.label, this.labelParams, this.template, this.view);\n\t}\n}\n","import { ChangeDetectorRef, Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Label } from './label';\nimport { LabelService } from './label.service';\n\n@Pipe({\n\tname: 'label',\n\tpure: false,\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class LabelPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate ref: ChangeDetectorRef,\n\t\tprotected labelService: LabelService<Label>\n\t) {\n\t\tthis.labelService.events.subscribe(\n\t\t\tx => this.ref.markForCheck()\n\t\t);\n\t}\n\n\tpublic transform(key: string, text?: string, params?: any): string {\n\t\t// console.log(key, params);\n\t\t// return WrappedValue.wrap(this.val);\n\t\tconst label = this.labelService.getLabel(key, text, params);\n\t\t// console.log('label', label, this.labelService.cache);\n\t\treturn label;\n\t}\n\n}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { Logger } from './logger';\n\n@Component({\n\tselector: 'ws-logger',\n\ttemplateUrl: './logger.component.html',\n\tstyleUrls: ['./logger.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class LoggerComponent implements OnInit {\n\tconstructor(public logger: Logger) { }\n\n\tngOnInit() {\n\t}\n}\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { tap } from 'rxjs/operators';\n\nexport class EventEntity {\n\ttype: string | number;\n\tdata?: any;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class EventDispatcherService {\n\n\tprivate emitter: EventEmitter<EventEntity>;\n\n\tconstructor() {\n\t\tthis.emitter = new EventEmitter<EventEntity>();\n\t}\n\n\temit(event: EventEntity): void {\n\t\treturn this.emitter.emit(event);\n\t}\n\n\tobserve(): Observable<EventEntity> {\n\t\treturn this.emitter.pipe(\n\t\t\ttap((event: EventEntity) => console.log('EventDispatcherService', event))\n\t\t);\n\t}\n\n}\n","import { Injectable, Injector } from '@angular/core';\nimport { EntityService } from './entity.service';\nimport { MenuItem } from './menu-item';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class MenuService extends EntityService<MenuItem> {\n\n\tget collection(): string {\n\t\treturn '/api/menu';\n\t}\n\n\tconstructor(\n\t\tprotected injector: Injector,\n\t) {\n\t\tsuper(injector);\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\nimport { from, fromEvent, Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\n\n// export class OnceEvent extends Event { }\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class OnceService {\n\n\tprivate uid: number = 0;\n\tprivate paths: string[] = [];\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate zone: NgZone,\n\t) { }\n\n\tscript(url: string, callback?: string | boolean): Observable<Event> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t// !!! this.zone.runOutsideAngular(() => {\n\t\t\tif (this.paths.indexOf(url) === -1) {\n\t\t\t\tthis.paths.push(url);\n\t\t\t\tlet callbackName: string;\n\t\t\t\tif (callback === true) {\n\t\t\t\t\tcallbackName = 'OnceCallback' + (++this.uid);\n\t\t\t\t\turl = url.split('{{callback}}').join(callbackName);\n\t\t\t\t} else {\n\t\t\t\t\tcallbackName = callback as string;\n\t\t\t\t}\n\t\t\t\tlet callback$: Observable<any>;\n\t\t\t\tconst element = document.createElement('script');\n\t\t\t\telement.type = 'text/javascript';\n\t\t\t\tif (callback) {\n\t\t\t\t\tcallback$ = from(\n\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\twindow[callbackName] = function (data) {\n\t\t\t\t\t\t\t\tresolve(data);\n\t\t\t\t\t\t\t};\n\t\t\t\t\t\t})\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\telement.async = true;\n\t\t\t\t\tcallback$ = fromEvent(element, 'load').pipe(\n\t\t\t\t\t\tmap(x => x as Event)\n\t\t\t\t\t);\n\t\t\t\t}\n\t\t\t\tconst scripts = document.getElementsByTagName('script');\n\t\t\t\tif (scripts.length) {\n\t\t\t\t\tconst script = scripts[scripts.length - 1];\n\t\t\t\t\tscript.parentNode.insertBefore(element, script.nextSibling);\n\t\t\t\t}\n\t\t\t\telement.src = url;\n\t\t\t\treturn callback$;\n\t\t\t} else {\n\t\t\t\treturn of(new Event('loaded!'));\n\t\t\t}\n\t\t\t// });\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'asset',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class AssetPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tif (typeof data === 'string' && (data.indexOf('http') === 0 || data.indexOf('/media/') === 0)) {\n\t\t\treturn data;\n\t\t} else {\n\t\t\tconst segments = this.segment.transform(data);\n\t\t\tsegments.unshift(this.configService.options.assets);\n\t\t\treturn segments.join('/');\n\t\t}\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Image, ImageType } from '../models/image';\n\n@Pipe({\n\tname: 'image',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ImagePipe implements PipeTransform {\n\ttransform(images: Image[], type?: string, queryString?: string): string {\n\t\ttype = type || 'Default';\n\t\tqueryString = queryString ? `?${queryString}` : '';\n\t\tconst imageType: ImageType = ImageType[type] || ImageType.Default;\n\t\tlet image: Image = null;\n\t\tif (images && images.length) {\n\t\t\timage = images.find(i => i.type === imageType) || images[0];\n\t\t}\n\t\treturn image ? (image.url + queryString).replace(/ /g, '%20') : null;\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { ConfigService } from '../config/config.service';\nimport { SegmentPipe } from './segment.pipe';\n\n@Pipe({\n\tname: 'public',\n\t// pure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PublicPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate configService: ConfigService,\n\t\tprivate segment: SegmentPipe\n\t) { }\n\n\ttransform(data: any[] | string): string {\n\t\tconst segments = this.segment.transform(data);\n\t\tsegments.unshift(this.configService.options.public);\n\t\treturn segments.join('/');\n\t}\n\n}\n","\n\n\nimport { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { from, Observable, of } from 'rxjs';\nimport { concatMap, filter } from 'rxjs/operators';\nimport { ConfigService } from '../../config/config.service';\nimport { OnceService } from '../../once/once.service';\nimport { RouteService } from '../../routes/route.service';\nimport { LocalStorageService, StorageService } from '../../storage/storage.service';\n\nexport class FacebookConfig {\n\tpublic appId: number;\n\tpublic fields: string = 'id,name,first_name,last_name,email,gender,picture,cover,link';\n\tpublic scope: string = 'public_profile, email'; // publish_stream\n\tpublic tokenClient: string;\n\tpublic version: string = 'v2.10';\n}\n\nexport class FacebookAuthResponse {\n\taccessToken: string;\n\texpiresIn: number;\n\tsignedRequest: string;\n\tuserID: string;\n}\n\nexport class FacebookPictureData {\n\theight: number;\n\tis_silhouette: boolean;\n\turl: string;\n\twidth: number;\n}\n\nexport class FacebookPicture {\n\tdata: FacebookPictureData;\n}\n\nexport class FacebookUser {\n\temail: string;\n\tfirst_name: string;\n\tid: string;\n\tlast_name: string;\n\tname: string;\n\tpicture: FacebookPicture;\n\tauthResponse?: FacebookAuthResponse;\n\tfacebookToken?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class FacebookService {\n\n\tpublic authResponse: FacebookAuthResponse;\n\tpublic storage: StorageService;\n\tprivate options: FacebookConfig;\n\tprivate FB: any;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate storageService: LocalStorageService,\n\t\tprivate onceService: OnceService,\n\t\tprivate routeService: RouteService,\n\t) {\n\t\tthis.init();\n\t}\n\n\tinit(): void {\n\t\tif (!this.configService.options.plugins && !this.configService.options.plugins.facebook) {\n\t\t\tthrow new Error('FacebookService.error missing config object in environment.plugins.facebook');\n\t\t}\n\t\tthis.options = Object.assign(new FacebookConfig(), this.configService.options.plugins.facebook);\n\t\tthis.storage = this.storageService.tryGet();\n\t\tthis.authResponse = this.storage.get('facebook');\n\t\t// console.log('FacebookService.authResponse', this.authResponse);\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t*  call FacebookService.facebook on component OnInit to avoid popup blockers via asyncronous loading *\n\t* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n\tfacebook(): Observable<any> {\n\t\tif (isPlatformBrowser(this.platformId) && window.location.protocol.indexOf('https') !== -1) {\n\t\t\tif (this.FB) {\n\t\t\t\treturn of(this.FB);\n\t\t\t} else {\n\t\t\t\treturn this.onceService.script('//connect.facebook.net/' + this.routeService.currentLang + '/sdk.js', 'fbAsyncInit').pipe(\n\t\t\t\t\tconcatMap(x => {\n\t\t\t\t\t\t// console.log(x);\n\t\t\t\t\t\tconst FB = window['FB'];\n\t\t\t\t\t\tFB.init({\n\t\t\t\t\t\t\tappId: this.options.appId,\n\t\t\t\t\t\t\t// status: true,\n\t\t\t\t\t\t\tcookie: true,\n\t\t\t\t\t\t\txfbml: true,\n\t\t\t\t\t\t\tversion: this.options.version,\n\t\t\t\t\t\t});\n\t\t\t\t\t\tthis.FB = FB;\n\t\t\t\t\t\treturn of(FB);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\tstatus() {\n\t\treturn this.facebook().pipe(\n\t\t\tfilter(f => f !== null),\n\t\t\tconcatMap(f => {\n\t\t\t\treturn from(new Promise((resolve, reject) => {\n\t\t\t\t\tf.getLoginStatus((r) => {\n\t\t\t\t\t\tthis.authResponse = null;\n\t\t\t\t\t\tif (r.status === 'connected') {\n\t\t\t\t\t\t\tthis.authResponse = r.authResponse;\n\t\t\t\t\t\t\tthis.storage.set('facebook', r.authResponse);\n\t\t\t\t\t\t\tresolve(r);\n\t\t\t\t\t\t} else if (r.status === 'not_authorized') {\n\t\t\t\t\t\t\tthis.storage.delete('facebook');\n\t\t\t\t\t\t\treject(r);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, { scope: this.options.scope });\n\t\t\t\t}));\n\t\t\t})\n\t\t);\n\t\t/*\n\t\treturn from(new Promise((resolve, reject) => {\n\t\t\tthis.facebook().subscribe(x => {\n\t\t\t\tx.getLoginStatus((r) => {\n\t\t\t\t\tthis.authResponse = null;\n\t\t\t\t\tif (r.status === 'connected') {\n\t\t\t\t\t\tthis.authResponse = r.authResponse;\n\t\t\t\t\t\tthis.storage.set('facebook', r.authResponse);\n\t\t\t\t\t\tresolve(r);\n\t\t\t\t\t} else if (r.status === 'not_authorized') {\n\t\t\t\t\t\tthis.storage.delete('facebook');\n\t\t\t\t\t\treject(r);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(r);\n\t\t\t\t\t}\n\t\t\t\t}, { scope: this.options.scope });\n\t\t\t});\n\t\t}));\n\t\t*/\n\t}\n\n\tlogin() {\n\t\treturn this.facebook().pipe(\n\t\t\tfilter(f => f !== null),\n\t\t\tconcatMap(f => {\n\t\t\t\treturn from(new Promise((resolve, reject) => {\n\t\t\t\t\tf.login((r) => {\n\t\t\t\t\t\tthis.authResponse = null;\n\t\t\t\t\t\tif (r.status === 'connected') {\n\t\t\t\t\t\t\tthis.authResponse = r.authResponse;\n\t\t\t\t\t\t\tthis.storage.set('facebook', r.authResponse);\n\t\t\t\t\t\t\tresolve(r);\n\t\t\t\t\t\t} else if (r.status === 'not_authorized') {\n\t\t\t\t\t\t\tthis.storage.delete('facebook');\n\t\t\t\t\t\t\treject(r);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treject(r);\n\t\t\t\t\t\t}\n\t\t\t\t\t}, { scope: this.options.scope });\n\t\t\t\t}));\n\t\t\t})\n\t\t);\n\t\t/*\n\t\treturn from(new Promise((resolve, reject) => {\n\t\t\tthis.facebook().subscribe(x => {\n\t\t\t\tx.login((r) => {\n\t\t\t\t\tthis.authResponse = null;\n\t\t\t\t\tif (r.status === 'connected') {\n\t\t\t\t\t\tthis.authResponse = r.authResponse;\n\t\t\t\t\t\tthis.storage.set('facebook', r.authResponse);\n\t\t\t\t\t\tresolve(r);\n\t\t\t\t\t} else if (r.status === 'not_authorized') {\n\t\t\t\t\t\tthis.storage.delete('facebook');\n\t\t\t\t\t\treject(r);\n\t\t\t\t\t} else {\n\t\t\t\t\t\treject(r);\n\t\t\t\t\t}\n\t\t\t\t}, { scope: this.options.scope });\n\t\t\t});\n\t\t}));\n\t\t*/\n\t}\n\n\tlogout(): Observable<any> {\n\t\treturn this.facebook().pipe(\n\t\t\tfilter(f => f !== null),\n\t\t\tconcatMap(f => {\n\t\t\t\treturn from(new Promise((resolve, reject) => {\n\t\t\t\t\t// console.log('f', f);\n\t\t\t\t\tf.logout(r => {\n\t\t\t\t\t\tresolve(r);\n\t\t\t\t\t\tthis.storage.delete('facebook');\n\t\t\t\t\t});\n\t\t\t\t}));\n\t\t\t})\n\t\t);\n\t\t/*\n\t\treturn from(new Promise((resolve, reject) => {\n\t\t\tthis.facebook().subscribe(x => {\n\t\t\t\tx.logout(r => {\n\t\t\t\t\tresolve(r);\n\t\t\t\t\tthis.storage.delete('facebook');\n\t\t\t\t});\n\t\t\t});\n\t\t}));\n\t\t*/\n\t}\n\n\tgetMe(fields?: string): Observable<FacebookUser> {\n\t\treturn this.login().pipe(\n\t\t\tconcatMap(l => {\n\t\t\t\treturn from(new Promise((resolve, reject) => {\n\t\t\t\t\tfields = fields || this.options.fields;\n\t\t\t\t\tthis.FB.api('/me', {\n\t\t\t\t\t\tfields: fields,\n\t\t\t\t\t\taccessToken: this.options.tokenClient,\n\t\t\t\t\t}, (r) => {\n\t\t\t\t\t\tif (!r || r.error) {\n\t\t\t\t\t\t\tconst error = r ? r.error : 'error';\n\t\t\t\t\t\t\tconsole.log('FacebookService.getMe.error', error);\n\t\t\t\t\t\t\treject(r.error);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tconst user = r as FacebookUser;\n\t\t\t\t\t\t\tuser.authResponse = this.authResponse;\n\t\t\t\t\t\t\tuser.facebookToken = this.authResponse.accessToken;\n\t\t\t\t\t\t\t// console.log('FacebookService.getMe.success', user);\n\t\t\t\t\t\t\tresolve(user);\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\t\t\t\t}));\n\t\t\t})\n\t\t);\n\t}\n\n}\n","\nimport { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { first, map } from 'rxjs/operators';\nimport { ConfigService } from '../../config/config.service';\nimport { Logger } from '../../logger/logger';\nimport { OnceService } from '../../once/once.service';\n\nexport class GoogleTagManagerPageViewEvent {\n\tdataLayer: any[];\n\turl: string;\n}\n\nexport class GoogleTagManagerConfig {\n\tid: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class GoogleTagManagerService {\n\n\tpublic options: GoogleTagManagerConfig;\n\n\tprivate dataLayer: any[];\n\tprivate dataLayer$: Observable<any[]>;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate zone: NgZone,\n\t\tprivate onceService: OnceService,\n\t\tprivate logger: Logger,\n\t) {\n\t\tthis.init();\n\t}\n\n\tprivate init(): void {\n\t\tif (!this.configService.options.plugins && !this.configService.options.plugins.googleTagManager) {\n\t\t\tthrow new Error('GoogleTagManagerService.error missing config object in environment.plugins.googleTagManager');\n\t\t}\n\t\tthis.options = Object.assign(new GoogleTagManagerConfig(), this.configService.options.plugins.googleTagManager);\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t*  call GoogleTagManagerConfig.once() on app component OnInit *\n\t* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n\tonce(): Observable<any[]> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tif (this.dataLayer) {\n\t\t\t\treturn of(this.dataLayer);\n\t\t\t} else if (this.dataLayer$) {\n\t\t\t\treturn this.dataLayer$;\n\t\t\t} else {\n\t\t\t\twindow['dataLayer'] = window['dataLayer'] || [];\n\t\t\t\tconst id = this.options.id;\n\t\t\t\tconst src = `https://www.googletagmanager.com/gtm.js?id=${id}`;\n\t\t\t\tconst dataLayer = window['dataLayer'];\n\t\t\t\tdataLayer.push({ 'gtm.start': new Date().getTime(), event: 'gtm.js' });\n\t\t\t\t// console.log('GoogleTagManagerConfig.once', src, dataLayer);\n\t\t\t\tthis.dataLayer$ = this.onceService.script(src).pipe(\n\t\t\t\t\tmap(x => {\n\t\t\t\t\t\t// console.log('dataLayer', dataLayer, x);\n\t\t\t\t\t\tthis.dataLayer = dataLayer;\n\t\t\t\t\t\treturn dataLayer;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn this.dataLayer$;\n\t\t\t}\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\tpush(payload: any): void {\n\t\tthis.zone.runOutsideAngular(() => {\n\t\t\tif (this.dataLayer) {\n\t\t\t\tthis.dataLayer.push(payload);\n\t\t\t\tthis.logger.log('GoogleTagManagerConfig.push', payload);\n\t\t\t} else {\n\t\t\t\tthis.once().pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t).subscribe(dataLayer => {\n\t\t\t\t\tif (this.dataLayer) {\n\t\t\t\t\t\tthis.dataLayer.push(payload);\n\t\t\t\t\t\tthis.logger.log('GoogleTagManagerConfig.push', payload);\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t}\n\t\t});\n\t}\n}\n\n/*\n<!-- Google Tag Manager -->\n<script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':\nnew Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],\nj=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=\n'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);\n})(window,document,'script','dataLayer','GTM-TS2H6VG');</script>\n<!-- End Google Tag Manager -->\n*/\n\n/*\n<!-- after <body> -->\n<!-- Google Tag Manager (noscript) -->\n<noscript><iframe src=\"https://www.googletagmanager.com/ns.html?id=GTM-TS2H6VG\"\nheight=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe></noscript>\n<!-- End Google Tag Manager (noscript) -->\n*/\n\n/*\nwindow.dataLayer = window.dataLayer || [];\n window.dataLayer.push({\n 'event': 'Pageview',\n 'url': 'https://www.example.com/something/contact-us'\n });\n*/\n\n\n","import { isPlatformBrowser } from '@angular/common';\nimport { AfterViewInit, Component, EventEmitter, Inject, Output, PLATFORM_ID } from '@angular/core';\nimport { NavigationEnd, Router } from '@angular/router';\nimport { filter, takeUntil } from 'rxjs/operators';\nimport { ConfigService } from '../../config/config.service';\nimport { DisposableComponent } from '../../disposable/disposable.component';\nimport { GoogleTagManagerService } from './google-tag-manager.service';\n\n@Component({\n\tselector: 'ws-google-tag-manager',\n\ttemplate: `\n\t<!-- Google Tag Manager (noscript) -->\n\t\t<noscript *ngIf=\"useIframe && dataLayer\">\n\t\t\t<iframe [src]=\"iframeUrl | safeUrl\" height=\"0\" width=\"0\" style=\"display:none;visibility:hidden\"></iframe>\n\t\t</noscript>\n\t<!-- End Google Tag Manager (noscript) -->`,\n})\n\nexport class GoogleTagManagerComponent extends DisposableComponent implements AfterViewInit {\n\n\tuseIframe: boolean = true;\n\tid: string;\n\tiframeUrl: string;\n\tdataLayer: any[];\n\n\t@Output() public pageView = new EventEmitter();\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate router: Router,\n\t\tprivate googleTagManager: GoogleTagManagerService,\n\t) {\n\t\tsuper();\n\t}\n\n\tngAfterViewInit() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tthis.router.events.pipe(\n\t\t\t\ttakeUntil(this.unsubscribe),\n\t\t\t\tfilter(e => e instanceof NavigationEnd),\n\t\t\t).subscribe((e: NavigationEnd) => {\n\t\t\t\tconst url = `${this.configService.options.origin}${e.urlAfterRedirects}`;\n\t\t\t\t// console.log('GoogleTagManagerComponent.NavigationEnd', e.id, e.url, e.urlAfterRedirects, url);\n\t\t\t\tif (this.dataLayer) {\n\t\t\t\t\tthis.pageView.emit({ dataLayer: this.dataLayer, url });\n\t\t\t\t} else {\n\t\t\t\t\tthis.googleTagManager.once().pipe(\n\t\t\t\t\t\ttakeUntil(this.unsubscribe)\n\t\t\t\t\t).subscribe(dataLayer => {\n\t\t\t\t\t\t// console.log('dataLayer', dataLayer);\n\t\t\t\t\t\tthis.id = this.googleTagManager.options.id;\n\t\t\t\t\t\tthis.iframeUrl = `https://www.googletagmanager.com/ns.html?id=${this.id}`;\n\t\t\t\t\t\tthis.dataLayer = dataLayer;\n\t\t\t\t\t\tthis.pageView.emit({ dataLayer: this.dataLayer, url });\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t}\n\n}\n","\n\n\nimport { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { from, Observable, of } from 'rxjs';\nimport { concatMap } from 'rxjs/operators';\nimport { ConfigService } from '../../config/config.service';\nimport { OnceService } from '../../once/once.service';\nimport { LocalStorageService, StorageService } from '../../storage/storage.service';\n\nexport class GoogleConfig {\n\tpublic clientId: string;\n\tpublic cookiepolicy?: string = 'single_host_origin';\n\tpublic scope?: string = 'profile email';\n\tpublic fetch_basic_profile?: boolean = true;\n\tpublic ux_mode?: string = 'popup';\n}\n\nexport class GoogleAuthResponse {\n\ttoken_type: string;\n\taccess_token: string;\n\tscope: string;\n\tlogin_hint: string;\n\texpires_in: number;\n\texpires_at: number;\n\tfirst_issued_at: number;\n\tid_token: string;\n\tidpId: string;\n\tsignedRequest: string;\n\tuserID: string;\n}\n\nexport class GoogleUser {\n\temail: string;\n\tfirstName: string;\n\tid: string;\n\tlastName: string;\n\tname: string;\n\tpicture: string;\n\tauthResponse?: GoogleAuthResponse;\n\tgoogleToken?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class GoogleService {\n\n\tpublic authResponse: GoogleAuthResponse;\n\tpublic storage: StorageService;\n\tprivate options: GoogleConfig;\n\tprivate gapi: any;\n\tprivate auth2: any;\n\tprivate instance: any;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate storageService: LocalStorageService,\n\t\tprivate onceService: OnceService,\n\t) {\n\t\tthis.init();\n\t}\n\n\tinit(): void {\n\t\tif (!this.configService.options.plugins && !this.configService.options.plugins.google) {\n\t\t\tthrow new Error('GoogleService.error missing config object in environment.plugins.google');\n\t\t}\n\t\tthis.options = Object.assign(new GoogleConfig(), this.configService.options.plugins.google);\n\t\tthis.storage = this.storageService.tryGet();\n\t\tthis.authResponse = this.storage.get('google');\n\t\t// console.log('GoogleService.authResponse', this.authResponse);\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t*  call GoogleService.google on component OnInit to avoid popup blockers via asyncronous loading *\n\t* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n\tprivate google(): Observable<any> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\treturn new Observable().pipe(x => {\n\t\t\t\tif (this.gapi) {\n\t\t\t\t\treturn of(this.gapi);\n\t\t\t\t} else {\n\t\t\t\t\treturn this.once();\n\t\t\t\t}\n\t\t\t});\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\tgetMe() {\n\t\treturn this.login().pipe(\n\t\t\tconcatMap(x => {\n\t\t\t\tconst profile = this.instance.currentUser.get().getBasicProfile();\n\t\t\t\tconst user = {\n\t\t\t\t\tid: profile.getId(),\n\t\t\t\t\tname: profile.getName(),\n\t\t\t\t\tfirstName: profile.getGivenName(),\n\t\t\t\t\tlastName: profile.getFamilyName(),\n\t\t\t\t\tpicture: profile.getImageUrl(),\n\t\t\t\t\temail: profile.getEmail(),\n\t\t\t\t\tauthResponse: this.authResponse,\n\t\t\t\t\tgoogleToken: this.authResponse.access_token,\n\t\t\t\t} as GoogleUser;\n\t\t\t\treturn of(user);\n\t\t\t})\n\t\t);\n\t}\n\n\tlogin() {\n\t\treturn this.auth2Instance().pipe(\n\t\t\tconcatMap(x => {\n\t\t\t\treturn this.signin();\n\t\t\t})\n\t\t);\n\t}\n\n\tlogout() {\n\t\treturn this.auth2Instance().pipe(\n\t\t\tconcatMap(x => {\n\t\t\t\treturn from(\n\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\tif (this.instance.isSignedIn && this.instance.isSignedIn.get()) {\n\t\t\t\t\t\t\tthis.instance.signOut().then((signed) => {\n\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t}, reject);\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate once(): Observable<any> {\n\t\treturn this.onceService.script('https://apis.google.com/js/api:client.js?onload={{callback}}', true).pipe(\n\t\t\tconcatMap(x => {\n\t\t\t\tthis.gapi = window['gapi'];\n\t\t\t\treturn of(this.gapi);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate getAuth2() {\n\t\treturn new Observable().pipe(x => {\n\t\t\tif (this.auth2) {\n\t\t\t\treturn of(this.auth2);\n\t\t\t} else {\n\t\t\t\treturn this.google().pipe(\n\t\t\t\t\tconcatMap(x => {\n\t\t\t\t\t\tif (this.gapi.auth2) {\n\t\t\t\t\t\t\treturn this.auth2init();\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\treturn from(\n\t\t\t\t\t\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\t\t\t\t\t\tthis.gapi.load('auth2', () => {\n\t\t\t\t\t\t\t\t\t\tsetTimeout(() => {\n\t\t\t\t\t\t\t\t\t\t\tresolve();\n\t\t\t\t\t\t\t\t\t\t}, 200);\n\t\t\t\t\t\t\t\t\t}, reject);\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t).pipe(\n\t\t\t\t\t\t\t\tconcatMap(x => {\n\t\t\t\t\t\t\t\t\treturn this.auth2init();\n\t\t\t\t\t\t\t\t})\n\t\t\t\t\t\t\t);\n\t\t\t\t\t\t}\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t}\n\t\t});\n\t}\n\n\tprivate signin() {\n\t\treturn from(\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tconst readAccessToken = () => {\n\t\t\t\t\t// console.log('GoogleLogin.readAccessToken');\n\t\t\t\t\ttry {\n\t\t\t\t\t\tconst user = this.instance.currentUser.get().getAuthResponse(true);\n\t\t\t\t\t\t// console.log('GoogleLogin.readAccessToken.success', user);\n\t\t\t\t\t\tthis.authResponse = user;\n\t\t\t\t\t\tthis.storage.set('google', user);\n\t\t\t\t\t\tresolve({\n\t\t\t\t\t\t\tcode: user.access_token,\n\t\t\t\t\t\t});\n\t\t\t\t\t} catch (error) {\n\t\t\t\t\t\tconsole.log('GoogleLogin.readAccessToken.error', error);\n\t\t\t\t\t\tthis.storage.delete('google');\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t\tif (this.instance.isSignedIn && this.instance.isSignedIn.get()) {\n\t\t\t\t\treadAccessToken();\n\t\t\t\t} else {\n\t\t\t\t\tthis.instance.signIn({\n\t\t\t\t\t\tscope: 'profile email',\n\n\t\t\t\t\t}).then((signed) => {\n\t\t\t\t\t\treadAccessToken();\n\n\t\t\t\t\t}, (error) => {\n\t\t\t\t\t\tthis.storage.delete('google');\n\t\t\t\t\t\treject(error);\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate auth2init() {\n\t\treturn from(\n\t\t\tnew Promise((resolve, reject) => {\n\t\t\t\tthis.gapi.auth2.init({\n\t\t\t\t\tclient_id: this.options.clientId,\n\t\t\t\t\tcookiepolicy: 'single_host_origin',\n\t\t\t\t\tscope: 'profile email',\n\t\t\t\t\tfetch_basic_profile: true,\n\t\t\t\t\tux_mode: 'popup',\n\t\t\t\t}).then(() => {\n\t\t\t\t\tthis.auth2 = this.gapi.auth2;\n\t\t\t\t\t// console.log('Auth2Init.success', this.auth2);\n\t\t\t\t\tresolve(this.auth2);\n\t\t\t\t}, reject);\n\t\t\t})\n\t\t);\n\t}\n\n\tpublic auth2Instance() {\n\t\tif (this.instance) {\n\t\t\treturn of(this.instance);\n\t\t} else {\n\t\t\treturn this.getAuth2().pipe(\n\t\t\t\tconcatMap(x => {\n\t\t\t\t\tthis.instance = this.auth2.getAuthInstance();\n\t\t\t\t\treturn of(this.instance);\n\t\t\t\t})\n\t\t\t);\n\t\t}\n\t}\n\n}\n","import { ElementRef, Injectable } from '@angular/core';\n\n/*\nimport { isPlatformBrowser } from '@angular/common';\nimport { ElementRef, Inject, Injectable, NgZone, PLATFORM_ID } from '@angular/core';\nimport mapboxgl from 'mapbox-gl/dist/mapbox-gl';\nimport { fromEvent, Observable, of } from 'rxjs';\nimport { concatMap } from 'rxjs/operators';\n*/\n\nexport class MapboxConfig {\n\tpublic accessToken?: string;\n\tpublic style?: string;\n}\n\nexport class MapboxMapOptions {\n\tpublic element: ElementRef;\n\tpublic style?: string;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class MapboxService {\n\n\t/*\n\tprivate options: MapboxConfig;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate zone: NgZone,\n\t) {\n\t\tthis.init();\n\t}\n\n\tinit(): void {\n\t\tif (!this.configService.options.plugins && !this.configService.options.plugins.mapbox) {\n\t\t\tthrow new Error('MapboxService.error missing config object in environment.plugins.mapbox');\n\t\t}\n\t\tthis.options = Object.assign(new MapboxConfig(), this.configService.options.plugins.mapbox);\n\t}\n\n\tgetMap(options: MapboxMapOptions): Observable<mapboxgl.Map> {\n\t\treturn this.zone.runOutsideAngular(() => {\n\t\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\t\tmapboxgl.accessToken = this.options.accessToken;\n\t\t\t\toptions.style = options.style || this.options.style || 'mapbox://styles/mapbox/streets-v10';\n\t\t\t\tconst map = new mapboxgl.Map({\n\t\t\t\t\tcontainer: options.element.nativeElement,\n\t\t\t\t\tstyle: options.style\n\t\t\t\t});\n\t\t\t\tconst source = fromEvent(map, 'load').pipe(\n\t\t\t\t\tconcatMap(() => {\n\t\t\t\t\t\tmap.resize();\n\t\t\t\t\t\treturn of(map);\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn source;\n\t\t\t} else {\n\t\t\t\treturn of(null);\n\t\t\t}\n\t\t});\n\t}\n\t*/\n\n}\n","\nimport { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { from, Observable, of } from 'rxjs';\nimport { first, map, mergeMap } from 'rxjs/operators';\nimport { ConfigService } from '../../config/config.service';\nimport { OnceService } from '../../once/once.service';\n\nexport class PayPalConfigStyle {\n\tlabel?: string; // label: string\n\tsize?: string; // size: small | medium | large | responsive\n\tshape?: string;   // shape: pill | rect\n\tcolor?: string;   // color: gold | blue | silver | black\n}\n\nexport class PayPalConfigClient {\n\tsandbox: string;\n\tproduction: string;\n}\n\nexport class PayPalConfig {\n\tenv: string;\n\tstyle?: PayPalConfigStyle;\n\tclient: PayPalConfigClient;\n\tcommit?: boolean; // Show the buyer a 'Pay Now' button in the checkout flow\n\tsandboxFacilitator?: string;\n\t//\n\tpayment?: Function;\n\tonAuthorize?: Function;\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class PayPalService {\n\n\tpublic options: PayPalConfig;\n\tprivate paypal: any;\n\tprivate paypal$: Observable<any>;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate onceService: OnceService,\n\t) {\n\t\tthis.init();\n\t}\n\n\tprivate init(): void {\n\t\tif (!this.configService.options.plugins && !this.configService.options.plugins.paypal) {\n\t\t\tthrow new Error('PayPalService.error missing config object in environment.plugins.paypal');\n\t\t}\n\t\tthis.options = Object.assign(new PayPalConfig(), this.configService.options.plugins.paypal);\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t*  call PayPalConfig.once() on app component OnInit *\n\t* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n\tonce(): Observable<any> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tif (this.paypal) {\n\t\t\t\treturn of(this.paypal);\n\t\t\t} else if (this.paypal$) {\n\t\t\t\treturn this.paypal$;\n\t\t\t} else {\n\t\t\t\tconst src = `https://www.paypalobjects.com/api/checkout.js`;\n\t\t\t\t// console.log('PayPalConfig.once', src);\n\t\t\t\tthis.paypal$ = this.onceService.script(src).pipe(\n\t\t\t\t\tmap(x => {\n\t\t\t\t\t\tthis.paypal = window['paypal'];\n\t\t\t\t\t\treturn this.paypal;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn this.paypal$;\n\t\t\t}\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n\trender(options: any, selector?: string): Observable<any[]> {\n\t\tselector = selector || '#paypal-button';\n\t\treturn this.once().pipe(\n\t\t\tmergeMap(paypal => {\n\t\t\t\tpaypal.Button.render(this.getOptions(paypal, options), selector);\n\t\t\t\treturn of(paypal);\n\t\t\t})\n\t\t);\n\t}\n\n\tprivate getOptions(paypal, options): PayPalConfig {\n\t\tconst payload = Object.assign(this.options, options);\n\t\tpayload.payment = (data, actions) => {\n\t\t\treturn new paypal.Promise((resolve, reject) => {\n\t\t\t\tif (options.payment) {\n\t\t\t\t\toptions.payment().pipe(\n\t\t\t\t\t\tfirst(),\n\t\t\t\t\t\tmergeMap(payload => {\n\t\t\t\t\t\t\treturn from(actions.payment.create(payload));\n\t\t\t\t\t\t})\n\t\t\t\t\t).subscribe(\n\t\t\t\t\t\tsuccess => resolve(success), // actions.payment.create(success)\n\t\t\t\t\t\terror => reject(error)\n\t\t\t\t\t);\n\t\t\t\t} else {\n\t\t\t\t\tconsole.log('PayPalService.payment callback not setted');\n\t\t\t\t\treject(null);\n\t\t\t\t}\n\t\t\t\t// Make an ajax call to get the Payment ID. This should call your back-end,\n\t\t\t\t// which should invoke the PayPal Payment Create api to retrieve the Payment ID.\n\t\t\t\t// When you have a Payment ID, you need to call the `resolve` method, e.g `resolve(data.paymentID)`\n\t\t\t\t// Or, if you have an error from your server side, you need to call `reject`, e.g. `reject(err)`\n\t\t\t\t// jQuery.post('/my-api/create-payment')\n\t\t\t\t// .done(function(data) { resolve(data.paymentID); })\n\t\t\t\t// .fail(function(err)  { reject(err); });\n\t\t\t});\n\t\t};\n\t\tpayload.onAuthorize = (data, actions) => {\n\t\t\tif (options.onAuthorize) {\n\t\t\t\treturn actions.payment.execute().then(\n\t\t\t\t\tpayment => options.onAuthorize(payment, null),\n\t\t\t\t\terror => options.onAuthorize(null, error)\n\t\t\t\t);\n\t\t\t} else {\n\t\t\t\tconsole.log('PayPalService.onAuthorize callback not setted');\n\t\t\t}\n\t\t};\n\t\treturn payload;\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { AfterViewInit, Component, Inject, Input, PLATFORM_ID } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { DisposableComponent } from '../../disposable/disposable.component';\nimport { PayPalConfig, PayPalService } from './paypal.service';\n\n@Component({\n\tselector: 'ws-paypal-widget-component',\n\ttemplate: `<div id=\"#paypal-widget-button\"></div>`,\n})\n\nexport class PayPalWidgetComponent extends DisposableComponent implements AfterViewInit {\n\n\t@Input() paypalOptions: PayPalConfig;\n\tloaded: boolean;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate paypalService: PayPalService,\n\t) {\n\t\tsuper();\n\t}\n\n\tngAfterViewInit() {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tthis.paypalService.render(this.paypalOptions, '#paypal-widget-button').pipe(\n\t\t\t\ttakeUntil(this.unsubscribe)\n\t\t\t).subscribe(paypal => {\n\t\t\t\t// console.log('PayPalWidgetComponent.rendered', paypal)\n\t\t\t});\n\t\t}\n\t}\n\n}\n","\nimport { isPlatformBrowser } from '@angular/common';\nimport { Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { Observable, of } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { ConfigService } from '../../config/config.service';\nimport { OnceService } from '../../once/once.service';\n\nexport class TrustPilotConfig {\n\tbusinessunitId: string = '58e253ab0000ff00059fc0fe';\n\tbusinessunitName: string = 'www.eurospin-viaggi.it';\n}\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TrustPilotService {\n\n\tpublic options: TrustPilotConfig;\n\tprivate Trustpilot: any;\n\tprivate Trustpilot$: Observable<any>;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate onceService: OnceService,\n\t) {\n\t\tthis.init();\n\t}\n\n\tprivate init(): void {\n\t\tif (!this.configService.options.plugins && !this.configService.options.plugins.trustPilot) {\n\t\t\tthrow new Error('TrustPilotService.error missing config object in environment.plugins.trustPilot');\n\t\t}\n\t\tthis.options = Object.assign(new TrustPilotConfig(), this.configService.options.plugins.trustPilot);\n\t}\n\n\t/* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * *\n\t*  call TrustPilotConfig.once() on app component OnInit *\n\t* * * * * * * * * * * * * * * * * * * * * * * * * * * * * * * */\n\n\tonce(): Observable<any> {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tif (this.Trustpilot) {\n\t\t\t\treturn of(this.Trustpilot);\n\t\t\t} else if (this.Trustpilot$) {\n\t\t\t\treturn this.Trustpilot$;\n\t\t\t} else {\n\t\t\t\tconst src = `https://widget.trustpilot.com/bootstrap/v5/tp.widget.bootstrap.min.js`;\n\t\t\t\t// console.log('TrustPilotConfig.once', src);\n\t\t\t\tthis.Trustpilot$ = this.onceService.script(src).pipe(\n\t\t\t\t\tmap(x => {\n\t\t\t\t\t\tthis.Trustpilot = window['Trustpilot'];\n\t\t\t\t\t\treturn this.Trustpilot;\n\t\t\t\t\t})\n\t\t\t\t);\n\t\t\t\treturn this.Trustpilot$;\n\t\t\t}\n\t\t} else {\n\t\t\treturn of(null);\n\t\t}\n\t}\n\n}\n","import { isPlatformBrowser } from '@angular/common';\nimport { AfterViewInit, Component, ElementRef, Inject, Input, PLATFORM_ID, ViewEncapsulation } from '@angular/core';\nimport { takeUntil } from 'rxjs/operators';\nimport { ConfigService } from '../../config/config.service';\nimport { DisposableComponent } from '../../disposable/disposable.component';\nimport { TrustPilotConfig, TrustPilotService } from './trustpilot.service';\n\nexport class TrustPilotWidgetOptions {\n\ttemplateId?: string;\n\tbusinessunitId?: string;\n\tbusinessunitName?: string;\n\tlocale?: string = 'it-IT';\n\tsku?: string;\n\tstyleHeight?: string = '350px';\n\tstyleWidth?: string = '100%';\n\ttheme?: string = 'light';\n\tgroup?: string = 'on';\n\tstars?: string = '1,2,3,4,5';\n\n\tconstructor(\n\t\toptions?: TrustPilotWidgetOptions,\n\t) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t}\n\n\tstatic newFromConfig(options?: TrustPilotConfig): TrustPilotWidgetOptions {\n\t\treturn new TrustPilotWidgetOptions(options);\n\t}\n\n\tset?(options?: TrustPilotWidgetOptions): TrustPilotWidgetOptions {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t}\n\t\treturn this;\n\t}\n}\n\n@Component({\n\tselector: 'ws-trustpilot-widget-component',\n\ttemplateUrl: './trustpilot-widget.component.html',\n\tstyleUrls: ['./trustpilot-widget.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\n\nexport class TrustPilotWidgetComponent extends DisposableComponent implements AfterViewInit {\n\n\tloaded: boolean;\n\ttrustPilotOptions: TrustPilotConfig;\n\t@Input() options?: TrustPilotWidgetOptions;\n\t@Input() sku?: string;\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string,\n\t\tprivate configService: ConfigService,\n\t\tprivate elementRef: ElementRef,\n\t\tprivate trustPilot: TrustPilotService,\n\t) {\n\t\tsuper();\n\t\tthis.init();\n\t}\n\n\tprivate init(): void {\n\t\tif (!this.configService.options.plugins && !this.configService.options.plugins.trustPilot) {\n\t\t\tthrow new Error('TrustPilotService.error missing config object in environment.plugins.trustPilot');\n\t\t}\n\t\tthis.trustPilotOptions = this.configService.options.plugins.trustPilot;\n\t\tthis.options = new TrustPilotWidgetOptions(this.trustPilotOptions);\n\t}\n\n\tngAfterViewInit() {\n\t\t// console.log('TrustPilotWidgetComponent.ngOnInit', this.options, this.loaded);\n\t\tif (isPlatformBrowser(this.platformId) && this.elementRef.nativeElement.children.length) { // && environment.production\n\t\t\tif (!this.loaded) {\n\t\t\t\tthis.trustPilot.once().pipe(\n\t\t\t\t\ttakeUntil(this.unsubscribe)\n\t\t\t\t).subscribe(Trustpilot => {\n\t\t\t\t\tTrustpilot.loadFromElement(this.elementRef.nativeElement.firstElementChild);\n\t\t\t\t\tthis.loaded = true;\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { RouteService } from './route.service';\n\n@Pipe({\n\tname: 'route',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class RoutePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate routeService: RouteService,\n\t) { }\n\n\ttransform(data: any[] | string): string[] {\n\t\treturn this.routeService.toRoute(data);\n\t}\n\n}\n","import { EventEmitter, Injectable } from '@angular/core';\nimport { Observable, of, Subject } from 'rxjs';\nimport { filter, first, map, tap } from 'rxjs/operators';\nimport { DocumentIndex } from '../models/document';\nimport { EntityService } from '../models/entity.service';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugService extends EntityService<DocumentIndex> {\n\n\tprivate collectedKeys: { [key: string]: string; } = {};\n\tprivate cache: { [key: string]: string[]; } = {};\n\tprivate slugs$: Subject<{ [key: string]: string[]; }> = new Subject();\n\tprivate emitter: EventEmitter<any> = new EventEmitter();\n\n\tget collection(): string {\n\t\treturn `/api/slug`;\n\t}\n\n\tgetKey(key: string): Observable<string[]> {\n\t\tif (this.cache.hasOwnProperty(key)) {\n\t\t\treturn of(this.cache[key]);\n\t\t} else {\n\t\t\t// console.log('SlugService.getKey', key);\n\t\t\tObject.defineProperty(this.collectedKeys, key, {\n\t\t\t\tvalue: key,\n\t\t\t\tenumerable: true,\n\t\t\t\twritable: false,\n\t\t\t});\n\t\t\tthis.cache[key] = null;\n\t\t}\n\t\t// return observable of key\n\t\treturn this.slugs$.pipe(\n\t\t\tmap(items => items[key]),\n\t\t\tfilter(item => item !== null),\n\t\t);\n\t}\n\n\tregister(): Observable<any> {\n\t\treturn this.emitter.pipe(\n\t\t\t// throttleTime(500),\n\t\t\ttap(() => {\n\t\t\t\tthis.collectKeys().pipe(\n\t\t\t\t\tfirst(),\n\t\t\t\t).subscribe((keys) => {\n\t\t\t\t\t// console.log('SlugService.collected', keys);\n\t\t\t\t});\n\t\t\t})\n\t\t);\n\t}\n\n\tcollect(): void {\n\t\tif (Object.keys(this.collectedKeys).length) {\n\t\t\tthis.emitter.emit();\n\t\t}\n\t}\n\n\tprivate getSlugs(keys: string[]): Observable<DocumentIndex[]> {\n\t\tkeys = keys || [];\n\t\treturn this.statePost(keys).pipe(\n\t\t\t// tap(items => console.log(items)),\n\t\t);\n\t}\n\n\tprivate collectKeys(): Observable<{ [key: string]: string; }> {\n\t\tthis.slugs$.next(this.cache);\n\t\tconst keys = Object.keys(this.collectedKeys);\n\t\tthis.collectedKeys = {};\n\t\treturn this.getSlugs(keys).pipe(\n\t\t\tmap((items: DocumentIndex[]) => {\n\t\t\t\tconst dictionary = {};\n\t\t\t\titems.forEach(x => dictionary[x.mnemonic] = [x.slug]);\n\t\t\t\treturn dictionary;\n\t\t\t}),\n\t\t\ttap((dictionary: { [key: string]: string; }) => {\n\t\t\t\tObject.assign(this.cache, dictionary);\n\t\t\t\tthis.slugs$.next(this.cache);\n\t\t\t})\n\t\t);\n\t}\n\n}\n","import { ChangeDetectorRef, Injectable, OnDestroy, Pipe, PipeTransform } from '@angular/core';\nimport { CustomAsyncPipe } from '../pipes/custom-async.pipe';\nimport { RoutePipe } from '../routes/route.pipe';\nimport { SlugService } from './slug.service';\n\n@Pipe({\n\tname: 'slugAsync',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugAsyncPipe implements OnDestroy, PipeTransform {\n\n\tprivate asyncPipe: CustomAsyncPipe;\n\n\tconstructor(\n\t\tprivate changeDetector: ChangeDetectorRef,\n\t\tprivate slugService: SlugService,\n\t\tprivate routePipe: RoutePipe,\n\t) {\n\t\tthis.asyncPipe = new CustomAsyncPipe(this.changeDetector);\n\t}\n\n\ttransform(key: string, segments?: string[]): string[] {\n\t\tlet slugs = this.routePipe.transform(this.asyncPipe.transform(this.slugService.getKey(key)));\n\t\t// console.log('SlugAsyncPipe.transform', key, slugs);\n\t\tif (slugs && segments) {\n\t\t\tslugs = slugs.concat(segments);\n\t\t}\n\t\treturn slugs;\n\t}\n\n\tngOnDestroy(): void {\n\t\tthis.asyncPipe.dispose();\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { Observable } from 'rxjs';\nimport { SlugService } from './slug.service';\n\n@Pipe({\n\tname: 'slug',\n\tpure: false\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SlugPipe implements PipeTransform {\n\n\tconstructor(\n\t\t// private routeService: RouteService,\n\t\tprivate slugService: SlugService\n\t) { }\n\n\ttransform(key: string): Observable<string[]> {\n\t\treturn this.slugService.getKey(key);\n\t\t// return this.async.transform<any>(this.slugService.getKey(key));\n\t\t// return this.routeService.toSlug(key);\n\t}\n\n}\n","import { ChangeDetectorRef, Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { TranslateService } from './translate.service';\n\n@Pipe({\n\tname: 'translate',\n\tpure: false,\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class TranslatePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate ref: ChangeDetectorRef,\n\t\tprotected translateService: TranslateService\n\t) {\n\t\t// this.translateService.events.subscribe(\n\t\t// \tx => this.ref.markForCheck()\n\t\t// );\n\t}\n\n\tpublic transform(key: string, params?: { value: any }): string {\n\t\t// const label = this.translateService.getLabel(key, text, params);\n\t\treturn key;\n\t}\n\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeStyle'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeStylePipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(style: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustStyle(style);\n\t}\n}\n","import { Injectable, Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeUrl'\n})\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class SafeUrlPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(url: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustResourceUrl(url);\n\t}\n}\n","import { Pipe, PipeTransform } from '@angular/core';\nimport { DomSanitizer } from '@angular/platform-browser';\n\n@Pipe({\n\tname: 'safeHtml'\n})\nexport class TrustPipe implements PipeTransform {\n\n\tconstructor(\n\t\tprivate sanitizer: DomSanitizer\n\t) { }\n\n\ttransform(text: string) {\n\t\treturn this.sanitizer.bypassSecurityTrustHtml(text);\n\t\t// return this.sanitizer.bypassSecurityTrustStyle(text);\n\t\t// return this.sanitizer.bypassSecurityTrustXxx(text); - see docs\n\t}\n}\n","import { Directive, ElementRef, EventEmitter, HostListener, Output } from '@angular/core';\r\n\r\n@Directive({\r\n\tselector: '[clickOutside]'\r\n})\r\nexport class ClickOutsideDirective {\r\n\r\n\tconstructor(\r\n\t\tprivate element: ElementRef\r\n\t) { }\r\n\r\n\t@Output() public clickOutside = new EventEmitter();\r\n\r\n\t@HostListener('document:click', ['$event'])\r\n\tpublic onClick(e: Event) {\r\n\t\tconst targetElement: Element = e.target as Element;\r\n\t\t// console.log('ClickOutsideDirective.onClick', this.element.nativeElement, targetElement, this.element.nativeElement.contains(targetElement));\r\n\t\t// const documentContained: boolean = Boolean(document.compareDocumentPosition(targetElement) & Node.DOCUMENT_POSITION_CONTAINED_BY);\r\n\t\t// console.log(targetElement, documentContained);\r\n\t\tconst clickedInside = this.element.nativeElement.contains(targetElement) || !document.contains(targetElement);\r\n\t\tif (!clickedInside) {\r\n\t\t\tthis.clickOutside.emit(null);\r\n\t\t}\r\n\t}\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { AfterViewInit, Directive, ElementRef, Inject, Input, NgZone, PLATFORM_ID } from '@angular/core';\r\n// import * as $fancybox from '@fancyapps/fancybox';\r\n// import * as $ from 'jquery'; // this reload jquery breaking fancybox\r\n\r\n// const $: any = window ? (window['$'] || {}) : {}; // !!! rimuovere\r\ndeclare var $: any; // use $ for jquery // !!! rimuovere\r\n\r\n@Directive({\r\n\tselector: '[fancybox]',\r\n})\r\n\r\nexport class FancyboxDirective implements AfterViewInit {\r\n\r\n\t@Input() fancybox: any;\r\n\t@Input() target: string;\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\tprivate zone: NgZone,\r\n\t\tprivate element: ElementRef\r\n\t) { }\r\n\r\n\tngAfterViewInit() {\r\n\t\tif (isPlatformBrowser(this.platformId)) {\r\n\t\t\tthis.zone.runOutsideAngular(() => {\r\n\t\t\t\t$(() => {\r\n\t\t\t\t\t// $(this.element.nativeElement).fancybox(this.fancybox);\r\n\t\t\t\t\tconst group: any[] = Array.from($(this.element.nativeElement).find(this.target));\r\n\t\t\t\t\tgroup.forEach((item: HTMLElement, i: number) => item.addEventListener('click', (e) => {\r\n\t\t\t\t\t\t$.fancybox.open(group, this.fancybox, i);\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\te.stopImmediatePropagation();\r\n\t\t\t\t\t}));\r\n\t\t\t\t\t// console.log(group);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\r\n}\r\n","import { isPlatformBrowser } from '@angular/common';\r\nimport { Directive, ElementRef, Inject, Input, NgZone, OnDestroy, OnInit, PLATFORM_ID, Renderer2 } from '@angular/core';\r\n\r\ndeclare var require: any; // use require for polyfill\r\n\r\n@Directive({\r\n\tselector: '[lazy-images]'\r\n})\r\nexport class LazyImagesDirective implements OnInit, OnDestroy {\r\n\r\n\t@Input()\r\n\tlazyImages: Object;\r\n\tobserver: IntersectionObserver;\r\n\tnativeElement: HTMLElement;\r\n\r\n\tconstructor(\r\n\t\t@Inject(PLATFORM_ID) private platformId: string,\r\n\t\telement: ElementRef,\r\n\t\tpublic renderer: Renderer2,\r\n\t\tpublic zone: NgZone,\r\n\t) {\r\n\t\tthis.nativeElement = element.nativeElement;\r\n\t}\r\n\r\n\tngOnInit() {\r\n\t\tif (!isPlatformBrowser(this.platformId)) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\tthis.zone.runOutsideAngular(() => {\r\n\t\t\trequire('intersection-observer'); // use require for polyfill\r\n\t\t\tthis.onRegister();\r\n\t\t});\r\n\t}\r\n\r\n\tngOnDestroy() {\r\n\t\tif (this.observer) {\r\n\t\t\tthis.observer.disconnect();\r\n\t\t}\r\n\t}\r\n\r\n\tonRegister() {\r\n\t\tthis.newIntersectionObserver();\r\n\t\tconst observer = new MutationObserver(mutations => this.onChange(mutations));\r\n\t\tconst config = {\r\n\t\t\tattributes: true,\r\n\t\t\tcharacterData: true,\r\n\t\t\tchildList: true,\r\n\t\t\tsubtree: true\r\n\t\t};\r\n\t\tobserver.observe(this.nativeElement, config);\r\n\t\tthis.onChange();\r\n\t\t// this.observeDOMChanges(this.nativeElement, () => this.onChange);\r\n\t}\r\n\r\n\tonChange(...data) {\r\n\t\tconst images = Array.from(this.nativeElement.querySelectorAll('img[data-src], [data-srcset], [data-background-src]'));\r\n\t\timages.forEach((image: HTMLElement) => this.observer.observe(image));\r\n\t}\r\n\r\n\tnewIntersectionObserver() {\r\n\t\tconst config = this.lazyImages instanceof Object ? this.lazyImages : undefined;\r\n\t\tthis.observer = new IntersectionObserver((images: any[]) => images.forEach(image => {\r\n\t\t\tif (!image.isIntersecting) {\r\n\t\t\t\treturn;\r\n\t\t\t}\r\n\t\t\tthis.onAppearsInViewport(image.target);\r\n\t\t}), config);\r\n\t\treturn this.observer;\r\n\t}\r\n\r\n\tonAppearsInViewport(image: any) {\r\n\t\tif (image.dataset.src) {\r\n\t\t\tconst input = image.dataset.src;\r\n\t\t\tthis.onImagePreload(input, (output) => {\r\n\t\t\t\tthis.renderer.setAttribute(image, 'src', output);\r\n\t\t\t\tthis.renderer.removeAttribute(image, 'data-src');\r\n\t\t\t\tthis.zone.runOutsideAngular(() => {\r\n\t\t\t\t\tsetTimeout(() => {\r\n\t\t\t\t\t\tthis.renderer.addClass(image, 'ready');\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\tif (image.dataset.srcset) {\r\n\t\t\tthis.renderer.setAttribute(image, 'srcset', image.dataset.srcset);\r\n\t\t\tthis.renderer.removeAttribute(image, 'data-srcset');\r\n\t\t}\r\n\t\tif (image.dataset.backgroundSrc) {\r\n\t\t\tthis.renderer.setStyle(image, 'background-image', `url(${image.dataset.backgroundSrc})`);\r\n\t\t\tthis.renderer.removeAttribute(image, 'data-background-src');\r\n\t\t}\r\n\t\tif (this.observer) {\r\n\t\t\tthis.observer.unobserve(image);\r\n\t\t}\r\n\t}\r\n\r\n\tonImagePreload(src: string, callback: Function) {\r\n\t\tconst img = new Image();\r\n\t\timg.onload = () => {\r\n\t\t\tif (typeof callback === 'function') {\r\n\t\t\t\tcallback(img.src);\r\n\t\t\t}\r\n\t\t};\r\n\t\timg.onerror = function (e) {\r\n\t\t\timg.onerror = null;\r\n\t\t\timg.src = 'data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQgAAAC/CAMAAAA1kLK0AAAATlBMVEX////MzMyZmZn39/fHx8fPz8+Ojo7FxcXDw8Pn5+fS0tLq6url5eX8/PyUlJTi4uLX19fv7++JiYm9vb3d3d2FhYWtra2qqqqAgICdnZ2sCR5lAAAJUElEQVR4nO2d6YKzKgyGa7VaN1zqdL7e/42eigERkGobrM7J+2umM3V5DEkICKeQxHUKT6SnCASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgEiECACASIQIAIBIhAgAgE6NsgynFcvvzqhXwNRBk2RVdnQRBEXM8fsrormm/x+AqIsqnqAO5+Iv5ZXTVfgLE9iLDoIegIpjiCutj8srYFUaaZG8III0s3tYtNQTT1MgqCRd1sd20bgkiDZDmFQUmQbnV1m4Go5owhimTYsP612ub6NgKRWm60v/lL1nVF+lQfSi+BjUcUbWIVm4BogshkUKdmlCybtL4YNKJgA1+xAYiwjjQKQZc78qYw7/T4GtX+r9I7CK1VPCm8zpfKppsakf/24RtEmUWT+8nyhdlBmU9jbZT5TSs8g2jUm4lWWnhYT7/t1VP4BVFdlRtJ1jf0sEsUFFefkdQriFrJoK7v+btQPUZSY1+hciJ/IErF30XR26cJlfYRBd4chT8QoWLUyUdGXSlG8T7QF/IGIlSf44fnCFXb8nW9nkAoHJLuY3suu8Q3CU8gVA45xgFz3zbhB0Sp+Aek4yvNI/LhMf2AUJwbij30Ki8jXaxjKvIC4qIGDDQS42GjC9oxpXyA6Cb9pSseCdlviTq0Ywp5AJFqFTkfJBL0zig+iMaoTCKSkK0jwe6BoYMoFUcp/QTa81PSduTQgQ5ClqOiskjwScgEJULugGGDaFTbTT2QkCdALk8ggyind17IegReFB3pojYOZBAicgrDHUngeUzR+HBjKC6IUDwtmQWPfgKNhMzfE9RLRwWRiZse22+FT6IRZpYhHbAXKgiRQkw8ugcSonFgJhOoIKRnnLgxfD8xdm5xjtcLE4Q0CC1WpmPsQIqiInIgmgQmiMvcczJINGnuUPr6ksTx8LqhiCCkQZgNQCdR/cQOtffF58IzCUQQtcOX6ySK+OxQ/NqXiH4oWqKNB0LkEPbUN9VyTCcJ9tokRA0TLZfAA1FFzmarZ1ZOEgtMAhwS2oQaPBCBPWRIGSTaj0wiFSEU6fLRQMh6zGxXSM+sUgeJ9qUTFN07LHeJBgK6W66ekG4T+c/w+PtIwTQSr01iwQnXCAuEeECW0Zfq9tTQGrQcM29Zy36vWV1n19/nj2rjuE1lugJZosHpjWOBEJd1MS8raBlj7dAa9HzipnjFJmBKY2ETtRZXcJlF/9YNIIGAmGFz4hceH+wkNNVsJpbElljkOOUbwgKRzYf1AQSExFf9juvUg8Zs8B42ECJxwemMI4EIHcEMQJxjfuc2EmpzStnoKtj5kha3dgaEDNg4d4ADonG4cAHizHQS3EbK2/33936TE9CbhyTx4J9l8QwIETdQAigSiAKuyZYRShBAQqny83/vemf6jKD3Yvj/5gwkYsD6y+wgIM2OCow7QAIBNSNr5j+CMEkMNjL4Bdbeh6/n8AUGR8tmQICTwBnhQAIhQpn1b0okGDymkllxEpBZnSHInmrwmHBpdWwHcXL3btYJB4RIp6wOXAUBUVTJrCYkzv8GM7+z0bvy3+wgRK0YI6XCARG60t0JCCOfuPJbz8EGHj/c8zX8V/bg36/nnKX0lii3gAJCBA1rajAFYWZWnEQqQwt/vDc2hM+6aa6z4VP0QFHCBg4IuCJ7T1ADcW75GedIxNzPCAsR3TE7COjxoszcxwFROYKGAWIweINEMYkVj+l37CBE2MBIsnFAQGNNrF5LA8Gu8HmqeUwgEfPsNGELQJSJwzWtFA6I2hE9DR8hn1+a2Eiw3/7nql0A4oRYwf0CiP6EIaeh5xODn+BtIzwmCBHQrX/UQMT9Z+mPlmNCPsEjBA8r8RIQrvRlpbYHwfrPungmx2xFF2OJj/gTIMzMSpD4v4GYyazy+P8CgvsI3sGcyTEH93FMH7E+aii9Kp1EdeCosT6P+B1IDDZgqd4dNI9YlVkm/YcBpJEaiasgcT1mZrm+rxGKctzQz0h0Egfta6zrfXIfGU1q2zoJzUUcpve5ph5xZrf+01LYvp1EvsRH7K8esaJCdRZD3c3PQ7UQo3rXvgaxvwrV8polN4lhqLv4B7//OKt3DhD7q1kurmJzPdoh3uVi/FsnIXLMVyD2V8VeOq4h72so24d3QNEOmVUyJZEyN4g9jmssG+kaG8cZ/Ftx76uSjLXcu+SzJA4z0rVo7FMl8ZBDnfUw9snbea5XapgLxB7HPpeMhk9JMGuo1at3srZ9lNHwBfMjdLVX819NEuAxDzM/4vWMGVMxs3k5g0Q7B2KfM2bC+VA2B+JpFExdaisfZoxZSVhAlPucQ+WYVTcPoh//VmfVDTmm4jF5POgHQi0gdjqrzjHt0QWCwxjnWQ6ZVa5lVo11WsBO51k6Zt5e9MmkDg2ZlUKCt5aGmSB2O/N2fi524Hw5Q9O/IbPSs21znuVu52LPz87PL9kKDRZlkDDw7nd2vnxfA2dNGaNmNZV4M3qH72vICi5OgqNHUU2iB77DN3iw37NykpAv8Ozxna75t/zek4uE+Msu3/IbTQL57U6TRIpuEH7eBMZaKCrXqndCpSSEc55e/t8N/0R6ZgXa/bvhttUCPpOVxP5XC7CsH/Gp9MzqdIz1I4wVRT6X6SeOsKKIvsYMhoyK7iHWmPGxKNB07SLZy933qkPqOlRoB1bHO6SD2Ps6VGPjQFyodyShLAe495XJFNvFy39HjyltY/dr1SnPD6kf2ksncYTVC5X1LL2ROMZ6ln6WIh2j6HFWOFXWvI0s74q/KWUd5MOseassFPXx4uBCoWIQx1kFebJOOnIN81DrYtNK6cqBae18cWTaTQFE+2tITXdLeetEYX1Vj4F9hcqJfILQ9uDpVp8qrP/GHjy0K9MofZ+uevk+Xdlf2qfrRDu3Kaew7uU3++/lX93L72Tf3fEyt7ujudflX9ndsdf8fp+12O+z+x/s99mLdoCVoj2BpWiXaCnaN1w5I+0kL1U2FY+SBg7+WV29zrjw9RUQvcqw6bfIDkTYeP7Qh9LGsWuyV30NBKgMpb5EAPRtELsRgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAEQgQgQARCBCBABEIEIEAPUGQuP4DT2RwhyUkgc4AAAAASUVORK5CYII=';\r\n\t\t};\r\n\t\timg.src = src;\r\n\t}\r\n\r\n}\r\n","import { EventEmitter, Injectable, Provider } from '@angular/core';\r\n\r\nexport enum ModalEventType {\r\n\tComplete = 0,\r\n\tClose = 1,\r\n}\r\n\r\nexport class ModalCompleteEvent {\r\n\tmodal: Modal;\r\n\tdata?: any;\r\n\ttype?: ModalEventType.Complete = ModalEventType.Complete;\r\n\r\n\tconstructor(options?: ModalCompleteEvent) {\r\n\t\t// console.log('ModalCompleteEvent', options);\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport class ModalCloseEvent {\r\n\tmodal: Modal;\r\n\tdata?: any;\r\n\ttype?: ModalEventType.Close = ModalEventType.Close;\r\n\r\n\tconstructor(options?: ModalCloseEvent) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport type ModalEvent<T> = ModalCompleteEvent | ModalCloseEvent;\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class Modal {\r\n\tcomponent: any;\r\n\tproviders?: Provider = [];\r\n\tdata?: any;\r\n\temitter?: EventEmitter<ModalCompleteEvent | ModalCloseEvent> = new EventEmitter();\r\n\tclassName?: string;\r\n\r\n\tconstructor(options?: Modal) {\r\n\t\tif (options) {\r\n\t\t\tObject.assign(this, options);\r\n\t\t}\r\n\t}\r\n}\r\n\r\n@Injectable({\r\n\tprovidedIn: 'root'\r\n})\r\nexport class ModalData extends Object { }\r\n","import { isPlatformBrowser } from '@angular/common';\nimport { EventEmitter, Inject, Injectable, PLATFORM_ID } from '@angular/core';\nimport { BehaviorSubject, Observable } from 'rxjs';\nimport { map } from 'rxjs/operators';\nimport { Modal, ModalCloseEvent, ModalCompleteEvent } from './modal';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class ModalService {\n\n\tmodals$ = new BehaviorSubject<Modal[]>([]);\n\n\tconstructor(\n\t\t@Inject(PLATFORM_ID) private platformId: string\n\t) { }\n\n\tgetInfos(): Observable<Modal> {\n\t\treturn this.modals$.pipe(\n\t\t\tmap((modals: Modal[]) => {\n\t\t\t\treturn modals.length ? modals[modals.length - 1] : null;\n\t\t\t})\n\t\t);\n\t}\n\n\taddClass(name: string): void {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tconst body = document.querySelector('body') as HTMLElement;\n\t\t\tbody.classList.add(name);\n\t\t}\n\t}\n\n\tremoveClass(name: string): void {\n\t\tif (isPlatformBrowser(this.platformId)) {\n\t\t\tconst body = document.querySelector('body') as HTMLElement;\n\t\t\tbody.classList.remove(name);\n\t\t}\n\t}\n\n\topen(modal: Modal): EventEmitter<ModalCompleteEvent | ModalCloseEvent> {\n\t\tthis.addClass('modal-active');\n\t\tmodal = new Modal(modal);\n\t\tconst modals = this.modals$.getValue();\n\t\tmodals.push(modal);\n\t\tthis.modals$.next(modals);\n\t\treturn modal.emitter;\n\t\t// event emitter bound to modals$\n\t}\n\n\tcomplete(modal?: Modal, data?: any): void {\n\t\tmodal = modal ? this.remove(modal) : this.pop();\n\t\tif (modal) {\n\t\t\tmodal.emitter.emit(new ModalCompleteEvent({ modal: modal, data: data }));\n\t\t}\n\t}\n\n\tclose(modal?: Modal, data?: any): void {\n\t\tmodal = this.removeAll();\n\t\tif (modal) {\n\t\t\tmodal.emitter.emit(new ModalCloseEvent({ modal: modal, data: data }));\n\t\t}\n\t}\n\n\tprev(modal?: Modal, data?: any): void {\n\t\tmodal = modal ? this.remove(modal) : this.pop();\n\t\tif (modal) {\n\t\t\tmodal.emitter.emit(new ModalCloseEvent({ modal: modal, data: data }));\n\t\t}\n\t}\n\n\tprivate pop(): Modal {\n\t\tconst modals = this.modals$.getValue();\n\t\tif (modals.length) {\n\t\t\tconst modal = modals.pop();\n\t\t\tif (!modals.length) {\n\t\t\t\tthis.removeClass('modal-active');\n\t\t\t}\n\t\t\tthis.modals$.next(modals);\n\t\t\treturn modal;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate remove(modal: Modal): Modal {\n\t\tconst modals = this.modals$.getValue();\n\t\tif (modals.length && modals[modals.length - 1] === modal) {\n\t\t\tmodals.pop();\n\t\t\tif (!modals.length) {\n\t\t\t\tthis.removeClass('modal-active');\n\t\t\t}\n\t\t\tthis.modals$.next(modals);\n\t\t\treturn modal;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\tprivate removeAll(): Modal {\n\t\tconst modals = this.modals$.getValue();\n\t\tif (modals.length) {\n\t\t\tconst modal = modals.pop();\n\t\t\tthis.removeClass('modal-active');\n\t\t\tthis.modals$.next([]);\n\t\t\treturn modal;\n\t\t} else {\n\t\t\treturn null;\n\t\t}\n\t}\n\n\t/*\n\tinit(component: any, providers: object, outputs: object) {\n\t\tconst config = { inputs: providers, outputs };\n\t\tthis.domService.appendComponentTo(this.modalElementId, component, config);\n\t\tdocument.getElementById(this.modalElementId).className = 'show';\n\t\tdocument.getElementById(this.overlayElementId).className = 'show';\n\t}\n\n\tdestroy() {\n\t\tthis.domService.removeComponent();\n\t\tdocument.getElementById(this.modalElementId).className = 'hidden';\n\t\tdocument.getElementById(this.overlayElementId).className = 'hidden';\n\t}\n\t*/\n\n}\n","import { Component, OnInit, ViewEncapsulation } from '@angular/core';\nimport { map, takeUntil } from 'rxjs/operators';\nimport { DisposableComponent } from '../../disposable/disposable.component';\nimport { Modal } from './modal';\nimport { ModalService } from './modal.service';\n\n@Component({\n\tselector: 'ws-modal-container-component',\n\ttemplateUrl: './modal-container.component.html',\n\tstyleUrls: ['./modal-container.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\n\nexport class ModalContainerComponent extends DisposableComponent implements OnInit {\n\n\tmodalCount: number = 0;\n\tclassName?: string;\n\n\tconstructor(\n\t\tpublic modalService: ModalService\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnInit() {\n\t\tthis.modalService.modals$.pipe(\n\t\t\ttakeUntil(this.unsubscribe),\n\t\t\tmap((modals: Modal[]) => {\n\t\t\t\tthis.modalCount = modals.length;\n\t\t\t\tconst modal = modals.length ? modals[modals.length - 1] : null;\n\t\t\t\treturn modal;\n\t\t\t})\n\t\t).subscribe((modal: Modal) => {\n\t\t\tthis.className = modal ? modal.className : null;\n\t\t});\n\t}\n\n\tdoClose() {\n\t\tthis.modalService.close();\n\t}\n\n\tdoPrev() {\n\t\tthis.modalService.prev();\n\t}\n\n}\n","import { Component, ComponentFactoryResolver, ComponentRef, Input, OnDestroy, Provider, ReflectiveInjector, ViewChild, ViewContainerRef, ViewEncapsulation } from '@angular/core';\nimport { DisposableComponent } from '../../disposable/disposable.component';\nimport { Modal, ModalData } from './modal';\n\n@Component({\n\tselector: 'ws-modal-view-component',\n\ttemplateUrl: './modal-view.component.html',\n\tstyleUrls: ['./modal-view.component.scss'],\n\tencapsulation: ViewEncapsulation.Emulated,\n})\nexport class ModalViewComponent extends DisposableComponent implements OnDestroy {\n\n\tcomponent: ComponentRef<any>;\n\n\t@ViewChild('modalContainer', { read: ViewContainerRef }) modalContainer: ViewContainerRef;\n\n\t@Input() set modal(modal: Modal) {\n\t\tif (this.component) {\n\t\t\tthis.component.destroy();\n\t\t}\n\t\tif (!modal) {\n\t\t\tthis.component = null;\n\t\t\treturn;\n\t\t}\n\t\tconst providers: Provider = Object.keys(modal.providers).map(key => {\n\t\t\treturn { provide: key, useValue: modal.providers[key] };\n\t\t});\n\t\tproviders.push(\n\t\t\t{ provide: ModalData, useValue: modal.data },\n\t\t\t{ provide: Modal, useValue: modal },\n\t\t);\n\t\tconst resolvedInputs = ReflectiveInjector.resolve(providers);\n\t\tconst injector = ReflectiveInjector.fromResolvedProviders(resolvedInputs, this.modalContainer.parentInjector);\n\t\tconst factory = this.resolver.resolveComponentFactory(modal.component);\n\t\tconst component = factory.create(injector);\n\t\tthis.modalContainer.insert(component.hostView);\n\t\tthis.component = component;\n\t}\n\n\tconstructor(\n\t\tprivate resolver: ComponentFactoryResolver\n\t) {\n\t\tsuper();\n\t}\n\n\tngOnDestroy() {\n\t\tif (this.component) {\n\t\t\tthis.component.destroy();\n\t\t\tthis.component = null;\n\t\t}\n\t}\n\n}\n","import { CommonModule } from '@angular/common';\r\nimport { HttpClientModule, HTTP_INTERCEPTORS } from '@angular/common/http';\r\nimport { ModuleWithProviders, NgModule, Optional, SkipSelf } from '@angular/core';\r\nimport { FormsModule, ReactiveFormsModule } from '@angular/forms';\r\nimport { MarkdownModule, MarkedOptions } from 'ngx-markdown';\r\nimport { AuthService } from './auth/auth.service';\r\nimport { ConfigService } from './config/config.service';\r\nimport { CoreConfig, CORE_CONFIG } from './config/core.config';\r\nimport { DefaultContentDirective } from './content/default-content.directive';\r\nimport { CoreComponent } from './core.component';\r\nimport { CoreRouting } from './core.routing';\r\nimport { DisposableComponent } from './disposable/disposable.component';\r\nimport { EditorComponent } from './editor/editor.component';\r\nimport { ControlComponent } from './forms/controls/control.component';\r\nimport { ControlService } from './forms/controls/control.service';\r\nimport { ExistsValidator } from './forms/exists.validator';\r\nimport { FormService } from './forms/form.service';\r\nimport { MatchValidator } from './forms/match.validator';\r\nimport { UppercaseDirective } from './forms/uppercase.directive';\r\nimport { HighlightPipe } from './highlight/highlight.pipe';\r\nimport { HttpResponseInterceptor } from './http/http-response.interceptor';\r\nimport { HttpStatusCodeService } from './http/http-status-code.service';\r\nimport { JsonFormatterComponent } from './json-formatter/json-formatter.component';\r\nimport { LabelAsyncPipe } from './labels/label-async.pipe';\r\nimport { LabelDirective } from './labels/label.directive';\r\nimport { LabelPipe } from './labels/label.pipe';\r\nimport { LabelService } from './labels/label.service';\r\nimport { Logger } from './logger/logger';\r\nimport { LoggerComponent } from './logger/logger.component';\r\nimport { EventDispatcherService } from './models/event-dispatcher.service';\r\nimport { MenuService } from './models/menu.service';\r\nimport { OnceService } from './once/once.service';\r\nimport { PageNotFoundComponent } from './pages/page-not-found.component';\r\nimport { PageOutletComponent } from './pages/page-outlet.component';\r\nimport { PageComponent } from './pages/page.component';\r\nimport { PageGuard } from './pages/page.guard';\r\nimport { PageService } from './pages/page.service';\r\nimport { StaticGuard } from './pages/static.guard';\r\nimport { AssetPipe } from './pipes/asset.pipe';\r\nimport { CustomAsyncPipe } from './pipes/custom-async.pipe';\r\nimport { ImagePipe } from './pipes/image.pipe';\r\nimport { PublicPipe } from './pipes/public.pipe';\r\nimport { SegmentPipe } from './pipes/segment.pipe';\r\nimport { FacebookService } from './plugins/facebook/facebook.service';\r\nimport { GoogleTagManagerComponent } from './plugins/google/google-tag-manager.component';\r\nimport { GoogleTagManagerService } from './plugins/google/google-tag-manager.service';\r\nimport { GoogleService } from './plugins/google/google.service';\r\nimport { MapboxService } from './plugins/mapbox/mapbox.service';\r\nimport { PayPalWidgetComponent } from './plugins/paypal/paypal-widget.component';\r\nimport { PayPalService } from './plugins/paypal/paypal.service';\r\nimport { TrustPilotWidgetComponent } from './plugins/trustpilot/trustpilot-widget.component';\r\nimport { TrustPilotService } from './plugins/trustpilot/trustpilot.service';\r\nimport { RoutePipe } from './routes/route.pipe';\r\nimport { SlugAsyncPipe } from './slugs/slug-async.pipe';\r\nimport { SlugPipe } from './slugs/slug.pipe';\r\nimport { CookieStorageService, LocalStorageService, SessionStorageService, StorageService } from './storage/storage.service';\r\nimport { TranslatePipe } from './translate/translate.pipe';\r\nimport { SafeStylePipe } from './trust/safe-style.pipe';\r\nimport { SafeUrlPipe } from './trust/safe-url.pipe';\r\nimport { TrustPipe } from './trust/trust.pipe';\r\nimport { ClickOutsideDirective } from './ui/click-outside/click-outside.directive';\r\nimport { FancyboxDirective } from './ui/fancybox/fancybox.directive';\r\nimport { LazyImagesDirective } from './ui/lazy-images/lazy-images.directive';\r\nimport { ModalContainerComponent } from './ui/modal/modal-container.component';\r\nimport { ModalViewComponent } from './ui/modal/modal-view.component';\r\nimport { ModalService } from './ui/modal/modal.service';\r\n\r\n@NgModule({\r\n\timports: [\r\n\t\tCommonModule,\r\n\t\tHttpClientModule,\r\n\t\tFormsModule,\r\n\t\tReactiveFormsModule,\r\n\t\tCoreRouting,\r\n\t\tMarkdownModule.forRoot({\r\n\t\t\tmarkedOptions: {\r\n\t\t\t\tprovide: MarkedOptions,\r\n\t\t\t\tuseValue: {\r\n\t\t\t\t\t// gfm: true,\r\n\t\t\t\t\t// tables: true,\r\n\t\t\t\t\t// breaks: true,\r\n\t\t\t\t\t// pedantic: true,\r\n\t\t\t\t\t// sanitize: true,\r\n\t\t\t\t\t// smartLists: true,\r\n\t\t\t\t\t// smartypants: true,\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t}),\r\n\t],\r\n\tdeclarations: [\r\n\t\tAssetPipe,\r\n\t\tClickOutsideDirective,\r\n\t\tControlComponent,\r\n\t\tCoreComponent,\r\n\t\tCustomAsyncPipe,\r\n\t\tDefaultContentDirective,\r\n\t\tDisposableComponent,\r\n\t\tEditorComponent,\r\n\t\tExistsValidator,\r\n\t\tFancyboxDirective,\r\n\t\tGoogleTagManagerComponent,\r\n\t\tHighlightPipe,\r\n\t\tImagePipe,\r\n\t\tJsonFormatterComponent,\r\n\t\tLabelAsyncPipe,\r\n\t\tLabelDirective,\r\n\t\tLabelPipe,\r\n\t\tLazyImagesDirective,\r\n\t\tLoggerComponent,\r\n\t\tMatchValidator,\r\n\t\tModalContainerComponent,\r\n\t\tModalViewComponent,\r\n\t\tPageComponent,\r\n\t\tPageNotFoundComponent,\r\n\t\tPageOutletComponent,\r\n\t\tPayPalWidgetComponent,\r\n\t\tPublicPipe,\r\n\t\tRoutePipe,\r\n\t\tSafeStylePipe,\r\n\t\tSafeUrlPipe,\r\n\t\tSegmentPipe,\r\n\t\tSlugAsyncPipe,\r\n\t\tSlugPipe,\r\n\t\tTranslatePipe,\r\n\t\tTrustPilotWidgetComponent,\r\n\t\tTrustPipe,\r\n\t\tUppercaseDirective,\r\n\t],\r\n\texports: [\r\n\t\tAssetPipe,\r\n\t\tClickOutsideDirective,\r\n\t\tControlComponent,\r\n\t\tCoreComponent,\r\n\t\tCustomAsyncPipe,\r\n\t\tDefaultContentDirective,\r\n\t\tEditorComponent,\r\n\t\tExistsValidator,\r\n\t\tFancyboxDirective,\r\n\t\tGoogleTagManagerComponent,\r\n\t\tHighlightPipe,\r\n\t\tImagePipe,\r\n\t\tJsonFormatterComponent,\r\n\t\tLabelAsyncPipe,\r\n\t\tLabelDirective,\r\n\t\tLabelPipe,\r\n\t\tLazyImagesDirective,\r\n\t\tLoggerComponent,\r\n\t\tMatchValidator,\r\n\t\tModalContainerComponent,\r\n\t\tModalViewComponent,\r\n\t\tPageComponent,\r\n\t\tPayPalWidgetComponent,\r\n\t\tPublicPipe,\r\n\t\tRoutePipe,\r\n\t\tSafeStylePipe,\r\n\t\tSafeUrlPipe,\r\n\t\tSegmentPipe,\r\n\t\tSlugAsyncPipe,\r\n\t\tSlugPipe,\r\n\t\tTranslatePipe,\r\n\t\tTrustPilotWidgetComponent,\r\n\t\tTrustPipe,\r\n\t\tUppercaseDirective,\r\n\t],\r\n\tproviders: [\r\n\t\t{ provide: HTTP_INTERCEPTORS, useClass: HttpResponseInterceptor, multi: true },\r\n\t\tAssetPipe,\r\n\t\tAuthService,\r\n\t\tConfigService,\r\n\t\tControlService,\r\n\t\tCookieStorageService,\r\n\t\tCustomAsyncPipe,\r\n\t\tEventDispatcherService,\r\n\t\tExistsValidator,\r\n\t\tFacebookService,\r\n\t\tFormService,\r\n\t\tGoogleService,\r\n\t\tGoogleTagManagerService,\r\n\t\tHighlightPipe,\r\n\t\tHttpStatusCodeService,\r\n\t\tImagePipe,\r\n\t\tLabelPipe,\r\n\t\tLabelService,\r\n\t\tLocalStorageService,\r\n\t\tLogger,\r\n\t\tMapboxService,\r\n\t\tMatchValidator,\r\n\t\tMenuService,\r\n\t\tModalService,\r\n\t\tOnceService,\r\n\t\tPageGuard, StaticGuard,\r\n\t\tPageService,\r\n\t\tPayPalService,\r\n\t\tPublicPipe,\r\n\t\tRoutePipe,\r\n\t\tSafeUrlPipe,\r\n\t\tSegmentPipe,\r\n\t\tSessionStorageService,\r\n\t\tSlugAsyncPipe,\r\n\t\tSlugPipe,\r\n\t\tStorageService,\r\n\t\tTranslatePipe,\r\n\t\tTrustPilotService,\r\n\t\tTrustPipe,\r\n\t],\r\n})\r\n\r\nexport class CoreModule {\r\n\r\n\tconstructor(\r\n\t\t@Optional() @SkipSelf() parentModule: CoreModule\r\n\t) {\r\n\t\tif (parentModule) {\r\n\t\t\tthrow new Error('CoreModule is already loaded. Import it in the AppModule only');\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static forRoot(\r\n\t\tconfig?: CoreConfig,\r\n\t): ModuleWithProviders {\r\n\t\treturn {\r\n\t\t\tngModule: CoreModule,\r\n\t\t\tproviders: [\r\n\t\t\t\t{ provide: CORE_CONFIG, useValue: config },\r\n\t\t\t]\r\n\t\t};\r\n\t}\r\n\r\n}\r\n","import { Injectable } from '@angular/core';\n\n@Injectable({\n\tprovidedIn: 'root'\n})\nexport class CoreService {\n\n\tconstructor() { }\n}\n","import { Entity } from '../models/entity';\n\nexport class Label implements Entity {\n\tid: number | string;\n\tname: string;\n\tlang: string;\n\tlabels?: any;\n}\n","import { Entity } from './entity';\n\nexport class Document implements Entity {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tdescription?: string;\n\tslug?: string;\n}\n\nexport class DocumentIndex {\n\tid: number | string;\n\tmnemonic?: string;\n\tslug?: string;\n}\n\n","import { Document } from './document';\nimport { Image } from './image';\n\nexport class MenuItem implements Document {\n\tid: number | string;\n\tname?: string;\n\ttitle?: string;\n\tabstract?: string;\n\tslug?: string;\n\turl?: string;\n\ttype?: number | string;\n\timages?: Image[];\n\titems?: MenuItem[];\n\n\tconstructor(options?: any) {\n\t\tif (options) {\n\t\t\tObject.assign(this, options);\n\t\t\tif (options.items) {\n\t\t\t\tthis.items = options.items.map(item => new MenuItem(item));\n\t\t\t}\n\t\t}\n\t}\n}\n"],"names":["of","Injectable","isPlatformBrowser","Inject","PLATFORM_ID","Injector","InjectionToken","Directive","ElementRef","ViewContainerRef","Renderer2","Input","Component","Subject","Pipe","Location","tslib_1.__extends","HttpErrorResponse","HttpHeaders","HttpParams","HttpClient","TransferState","tap","makeStateKey","isPlatformServer","BehaviorSubject","distinctUntilChanged","switchMap","filter","ActivationEnd","map","concatMap","NavigationStart","ActivatedRoute","Router","ComponentFactoryResolver","NavigationEnd","ViewEncapsulation","DOCUMENT","catchError","Title","Meta","NgModule","RouterModule","Validators","FormControl","FormGroup","takeUntil","trigger","state","style","transition","animate","MarkdownService","HostListener","NG_VALUE_ACCESSOR","forwardRef","debounceTime","take","NG_ASYNC_VALIDATORS","NG_VALIDATORS","Attribute","EventEmitter","Output","throwError","isObject","isArray","ViewChild","WrappedValue","ChangeDetectorRef","first","from","fromEvent","NgZone","Observable","mergeMap","DomSanitizer","ReflectiveInjector","CommonModule","HttpClientModule","FormsModule","ReactiveFormsModule","MarkdownModule","MarkedOptions","HTTP_INTERCEPTORS","Optional","SkipSelf"],"mappings":"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"}
